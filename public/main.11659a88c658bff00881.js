(self.webpackChunkfinal_shopping=self.webpackChunkfinal_shopping||[]).push([[179],{8255:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=8255,t.exports=e},5366:(t,e,n)=>{"use strict";n.d(e,{deG:()=>hn,tb:()=>dl,AFp:()=>al,ip1:()=>ol,CZH:()=>sl,hGG:()=>oh,z2F:()=>$l,sBO:()=>Xu,Sil:()=>El,_Vd:()=>Eu,EJc:()=>gl,SBq:()=>Du,qLn:()=>Pr,vpe:()=>Uc,gxx:()=>Ro,tBr:()=>Fn,XFs:()=>k,OlP:()=>ln,zs3:()=>Qo,ZZ4:()=>Hu,aQg:()=>Wu,soG:()=>pl,YKP:()=>cc,v3s:()=>Kl,h0i:()=>uc,PXZ:()=>Zl,R0b:()=>Al,FiY:()=>Pn,Lbi:()=>hl,g9A:()=>ll,n_E:()=>jc,Qsj:()=>ku,FYo:()=>xu,JOm:()=>Ur,Tiy:()=>Fu,q3G:()=>Sr,tp0:()=>Nn,EAV:()=>th,Rgc:()=>ic,dDg:()=>Pl,DyG:()=>dn,q4F:()=>Nu,GfV:()=>Pu,s_b:()=>hc,ifc:()=>L,eFA:()=>zl,G48:()=>Vl,Gpc:()=>f,f3M:()=>xn,X6Q:()=>jl,_c5:()=>rh,VLi:()=>Ll,c2e:()=>fl,zSh:()=>Mo,wAp:()=>_a,vHH:()=>m,EiD:()=>Cr,mCW:()=>ir,qzn:()=>Hn,JVY:()=>Wn,pB0:()=>Jn,eBb:()=>Qn,L6k:()=>$n,LAX:()=>Kn,cg1:()=>ma,Tjo:()=>nh,kL8:()=>ya,yhl:()=>Yn,dqk:()=>j,sIi:()=>ss,CqO:()=>Ds,QGY:()=>Ts,F4k:()=>As,RDi:()=>At,AaK:()=>l,z3N:()=>zn,qOj:()=>Jo,TTD:()=>_t,_Bn:()=>bu,xp6:()=>Ri,uIk:()=>ds,Tol:()=>Ys,Gre:()=>ca,DjV:()=>la,ekj:()=>Hs,Suo:()=>Xc,Xpm:()=>J,lG2:()=>ot,Yz7:()=>w,cJS:()=>C,oAB:()=>nt,Yjl:()=>st,Y36:()=>ms,_UZ:()=>ws,BQk:()=>Es,ynx:()=>Cs,qZA:()=>bs,TgZ:()=>_s,EpF:()=>Ss,n5z:()=>on,Ikx:()=>ha,SDv:()=>lu,QtT:()=>du,pQV:()=>hu,LFG:()=>In,$8M:()=>an,NdJ:()=>Is,CRH:()=>tl,kcU:()=>Ce,O4$:()=>we,oxw:()=>Ps,ALo:()=>Fc,lcZ:()=>Pc,xi3:()=>Nc,gM2:()=>Rc,Hsn:()=>Ls,F$t:()=>Rs,Q6J:()=>ys,s9C:()=>Ms,MGl:()=>qs,VKq:()=>Ac,WLB:()=>Dc,kEZ:()=>Ic,iGM:()=>Kc,MAs:()=>gs,pYS:()=>Mr,CHM:()=>zt,oJD:()=>Tr,LSH:()=>Ar,kYT:()=>rt,Udp:()=>zs,WFA:()=>xs,d8E:()=>da,YNc:()=>ps,W1O:()=>il,_uU:()=>oa,Oqu:()=>sa,hij:()=>aa,AsE:()=>ua,Gf:()=>Jc});var r=n(5959),i=n(7570),o=n(8318),s=n(1906),a=n(1055);function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const d=u({__forward_ref__:u});function f(t){return t.__forward_ref__=f,t.toString=function(){return l(this())},t}function p(t){return g(t)?t():t}function g(t){return"function"==typeof t&&t.hasOwnProperty(d)&&t.__forward_ref__===f}class m extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function y(t){return"string"==typeof t?t:null==t?"":String(t)}function v(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():y(t)}function _(t,e){const n=e?` in ${e}`:"";throw new m("201",`No provider for ${v(t)} found${n}`)}function b(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function w(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function C(t){return{providers:t.providers||[],imports:t.imports||[]}}function E(t){return S(t,A)||S(t,I)}function S(t,e){return t.hasOwnProperty(e)?t[e]:null}function T(t){return t&&(t.hasOwnProperty(D)||t.hasOwnProperty(x))?t[D]:null}const A=u({"\u0275prov":u}),D=u({"\u0275inj":u}),I=u({ngInjectableDef:u}),x=u({ngInjectorDef:u});var k=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let O;function F(t){const e=O;return O=t,e}function P(t,e,n){const r=E(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&k.Optional?null:void 0!==e?e:void _(l(t),"Injector")}function N(t){return{toString:t}.toString()}var R=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),L=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const M="undefined"!=typeof globalThis&&globalThis,q="undefined"!=typeof window&&window,U="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,B="undefined"!=typeof global&&global,j=M||B||q||U,V={},G=[],Z=u({"\u0275cmp":u}),z=u({"\u0275dir":u}),H=u({"\u0275pipe":u}),Y=u({"\u0275mod":u}),W=u({"\u0275loc":u}),$=u({"\u0275fac":u}),Q=u({__NG_ELEMENT_ID__:u});let K=0;function J(t){return N(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===R.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||G,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||L.Emulated,id:"c",styles:t.styles||G,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=K++,n.inputs=it(t.inputs,e),n.outputs=it(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(X):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(tt):null,n})}function X(t){return at(t)||function(t){return t[z]||null}(t)}function tt(t){return function(t){return t[H]||null}(t)}const et={};function nt(t){return N(()=>{const e={type:t.type,bootstrap:t.bootstrap||G,declarations:t.declarations||G,imports:t.imports||G,exports:t.exports||G,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(et[t.id]=t.type),e})}function rt(t,e){return N(()=>{const n=ut(t,!0);n.declarations=e.declarations||G,n.imports=e.imports||G,n.exports=e.exports||G})}function it(t,e){if(null==t)return V;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const ot=J;function st(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function at(t){return t[Z]||null}function ut(t,e){const n=t[Y]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const ct=20,lt=10;function ht(t){return Array.isArray(t)&&"object"==typeof t[1]}function dt(t){return Array.isArray(t)&&!0===t[1]}function ft(t){return 0!=(8&t.flags)}function pt(t){return 2==(2&t.flags)}function gt(t){return 1==(1&t.flags)}function mt(t){return null!==t.template}function yt(t,e){return t.hasOwnProperty($)?t[$]:null}class vt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function _t(){return bt}function bt(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ct),wt}function wt(){const t=Et(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===V)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Ct(t,e,n,r){const i=Et(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:V,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new vt(u&&u.currentValue,e,s===V),t[r]=e}function Et(t){return t.__ngSimpleChanges__||null}_t.ngInherit=!0;const St="http://www.w3.org/2000/svg";let Tt;function At(t){Tt=t}function Dt(){return void 0!==Tt?Tt:"undefined"!=typeof document?document:void 0}function It(t){return!!t.listen}const xt={createRenderer:(t,e)=>Dt()};function kt(t){for(;Array.isArray(t);)t=t[0];return t}function Ot(t,e){return kt(e[t])}function Ft(t,e){return kt(e[t.index])}function Pt(t,e){return t.data[e]}function Nt(t,e){return t[e]}function Rt(t,e){const n=e[t];return ht(n)?n:n[0]}function Lt(t){return 4==(4&t[2])}function Mt(t){return 128==(128&t[2])}function qt(t,e){return null==e?null:t[e]}function Ut(t){t[18]=0}function Bt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const jt={lFrame:pe(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Vt(){return jt.bindingsEnabled}function Gt(){return jt.lFrame.lView}function Zt(){return jt.lFrame.tView}function zt(t){return jt.lFrame.contextLView=t,t[8]}function Ht(){let t=Yt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Yt(){return jt.lFrame.currentTNode}function Wt(){const t=jt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function $t(t,e){const n=jt.lFrame;n.currentTNode=t,n.isParent=e}function Qt(){return jt.lFrame.isParent}function Kt(){jt.lFrame.isParent=!1}function Jt(){return jt.isInCheckNoChangesMode}function Xt(t){jt.isInCheckNoChangesMode=t}function te(){const t=jt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function ee(){return jt.lFrame.bindingIndex}function ne(){return jt.lFrame.bindingIndex++}function re(t){const e=jt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function ie(t){jt.lFrame.inI18n=t}function oe(t,e){const n=jt.lFrame;n.bindingIndex=n.bindingRootIndex=t,se(e)}function se(t){jt.lFrame.currentDirectiveIndex=t}function ae(t){const e=jt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}function ue(){return jt.lFrame.currentQueryIndex}function ce(t){jt.lFrame.currentQueryIndex=t}function le(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function he(t,e,n){if(n&k.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&k.Host||(r=le(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=jt.lFrame=fe();return r.currentTNode=e,r.lView=t,!0}function de(t){const e=fe(),n=t[1];jt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function fe(){const t=jt.lFrame,e=null===t?null:t.child;return null===e?pe(t):e}function pe(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ge(){const t=jt.lFrame;return jt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const me=ge;function ye(){const t=ge();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ve(){return jt.lFrame.selectedIndex}function _e(t){jt.lFrame.selectedIndex=t}function be(){const t=jt.lFrame;return Pt(t.tView,t.selectedIndex)}function we(){jt.lFrame.currentNamespace=St}function Ce(){jt.lFrame.currentNamespace=null}function Ee(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function Se(t,e,n){De(t,e,3,n)}function Te(t,e,n,r){(3&t[2])===n&&De(t,e,n,r)}function Ae(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function De(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(Ie(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function Ie(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const xe=-1;class ke{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Oe(t,e,n){const r=It(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Pe(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Fe(t){return 3===t||4===t||6===t}function Pe(t){return 64===t.charCodeAt(0)}function Ne(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Re(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Re(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Le(t){return t!==xe}function Me(t){return 32767&t}function qe(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Ue=!0;function Be(t){const e=Ue;return Ue=t,e}let je=0;function Ve(t,e){const n=Ze(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Ge(r.data,t),Ge(e,null),Ge(r.blueprint,null));const i=ze(t,e),o=t.injectorIndex;if(Le(i)){const t=Me(i),n=qe(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Ge(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ze(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function ze(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return xe;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return xe}function He(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Q)&&(r=n[Q]),null==r&&(r=n[Q]=je++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Ye(t,e,n){if(n&k.Optional)return t;_(e,"NodeInjector")}function We(t,e,n,r){if(n&k.Optional&&void 0===r&&(r=null),0==(n&(k.Self|k.Host))){const i=t[9],o=F(void 0);try{return i?i.get(e,r,n&k.Optional):P(e,r,n&k.Optional)}finally{F(o)}}return Ye(r,e,n)}function $e(t,e,n,r=k.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Q)?t[Q]:void 0;return"number"==typeof e?e>=0?255&e:Ke:e}(n);if("function"==typeof o){if(!he(e,t,r))return r&k.Host?Ye(i,n,r):We(e,n,r,i);try{const t=o(r);if(null!=t||r&k.Optional)return t;_(n)}finally{me()}}else if("number"==typeof o){let i=null,s=Ze(t,e),a=xe,u=r&k.Host?e[16][6]:null;for((-1===s||r&k.SkipSelf)&&(a=-1===s?ze(t,e):e[s+8],a!==xe&&nn(r,!1)?(i=e[1],s=Me(a),e=qe(a,e)):s=-1);-1!==s;){const t=e[1];if(en(o,s,t.data)){const t=Je(s,e,n,i,r,u);if(t!==Qe)return t}a=e[s+8],a!==xe&&nn(r,e[1].data[s+8]===u)&&en(o,s,e)?(i=t,s=Me(a),e=qe(a,e)):s=-1}}}return We(e,n,r,i)}const Qe={};function Ke(){return new rn(Ht(),Gt())}function Je(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Xe(a,s,n,null==r?pt(a)&&Ue:r!=s&&0!=(3&a.type),i&k.Host&&o===a);return null!==u?tn(e,s,u,a):Qe}function Xe(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&mt(t)&&t.type===n)return u}return null}function tn(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof ke){const s=i;s.resolving&&function(t,e){throw new m("200",`Circular dependency in DI detected for ${t}`)}(v(o[n]));const a=Be(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?F(s.injectImpl):null;he(t,r,k.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=bt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&F(u),Be(a),s.resolving=!1,me()}}return i}function en(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function nn(t,e){return!(t&k.Self||t&k.Host&&e)}class rn{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return $e(this._tNode,this._lView,t,void 0,e)}}function on(t){return N(()=>{const e=t.prototype.constructor,n=e[$]||sn(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[$]||sn(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function sn(t){return g(t)?()=>{const e=sn(p(t));return e&&e()}:yt(t)}function an(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Fe(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Ht(),t)}const un="__parameters__";function cn(t,e,n){return N(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(un)?t[un]:Object.defineProperty(t,un,{value:[]})[un];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class ln{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=w({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const hn=new ln("AnalyzeForEntryComponents"),dn=Function;function fn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),fn(r,e)):e!==t&&e.push(r)}return e}function pn(t,e){t.forEach(t=>Array.isArray(t)?pn(t,e):e(t))}function gn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function mn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function yn(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function vn(t,e,n){let r=bn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function _n(t,e){const n=bn(t,e);if(n>=0)return t[1|n]}function bn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const wn={},Cn=/\n/gm,En="__source",Sn=u({provide:String,useValue:u});let Tn;function An(t){const e=Tn;return Tn=t,e}function Dn(t,e=k.Default){if(void 0===Tn)throw new Error("inject() must be called from an injection context");return null===Tn?P(t,void 0,e):Tn.get(t,e&k.Optional?null:void 0,e)}function In(t,e=k.Default){return(O||Dn)(p(t),e)}const xn=In;function kn(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=k.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(In(t,n))}else e.push(In(r))}return e}function On(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const Fn=On(cn("Inject",t=>({token:t})),-1),Pn=On(cn("Optional"),8),Nn=On(cn("SkipSelf"),4);let Rn,Ln;function Mn(t){var e;return(null===(e=function(){if(void 0===Rn&&(Rn=null,j.trustedTypes))try{Rn=j.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Rn}())||void 0===e?void 0:e.createHTML(t))||t}function qn(t){var e;return(null===(e=function(){if(void 0===Ln&&(Ln=null,j.trustedTypes))try{Ln=j.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Ln}())||void 0===e?void 0:e.createHTML(t))||t}class Un{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Bn extends Un{getTypeName(){return"HTML"}}class jn extends Un{getTypeName(){return"Style"}}class Vn extends Un{getTypeName(){return"Script"}}class Gn extends Un{getTypeName(){return"URL"}}class Zn extends Un{getTypeName(){return"ResourceURL"}}function zn(t){return t instanceof Un?t.changingThisBreaksApplicationSecurity:t}function Hn(t,e){const n=Yn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Yn(t){return t instanceof Un&&t.getTypeName()||null}function Wn(t){return new Bn(t)}function $n(t){return new jn(t)}function Qn(t){return new Vn(t)}function Kn(t){return new Gn(t)}function Jn(t){return new Zn(t)}function Xn(t){const e=new er(t);return function(){try{return!!(new window.DOMParser).parseFromString(Mn(""),"text/html")}catch(t){return!1}}()?new tr(e):e}class tr{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Mn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class er{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Mn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Mn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const nr=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,rr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ir(t){return(t=String(t)).match(nr)||t.match(rr)?t:"unsafe:"+t}function or(t){return(t=String(t)).split(",").map(t=>ir(t.trim())).join(", ")}function sr(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function ar(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const ur=sr("area,br,col,hr,img,wbr"),cr=sr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),lr=sr("rp,rt"),hr=ar(lr,cr),dr=ar(ur,ar(cr,sr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ar(lr,sr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),hr),fr=sr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),pr=sr("srcset"),gr=ar(fr,pr,sr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),sr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),mr=sr("script,style,template");class yr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!dr.hasOwnProperty(e))return this.sanitizedSomething=!0,!mr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const t=n.item(r),e=t.name,i=e.toLowerCase();if(!gr.hasOwnProperty(i)){this.sanitizedSomething=!0;continue}let o=t.value;fr[i]&&(o=ir(o)),pr[i]&&(o=or(o)),this.buf.push(" ",e,'="',br(o),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();dr.hasOwnProperty(e)&&!ur.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(br(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const vr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_r=/([^\#-~ |!])/g;function br(t){return t.replace(/&/g,"&amp;").replace(vr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(_r,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let wr;function Cr(t,e){let n=null;try{wr=wr||Xn(t);let r=e?String(e):"";n=wr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=wr.getInertBodyElement(r)}while(r!==o);return Mn((new yr).sanitizeChildren(Er(n)||n))}finally{if(n){const t=Er(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function Er(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Sr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function Tr(t){const e=Dr();return e?qn(e.sanitize(Sr.HTML,t)||""):Hn(t,"HTML")?qn(zn(t)):Cr(Dt(),y(t))}function Ar(t){const e=Dr();return e?e.sanitize(Sr.URL,t)||"":Hn(t,"URL")?zn(t):ir(y(t))}function Dr(){const t=Gt();return t&&t[12]}function Ir(t,e){t.__ngContext__=e}function xr(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function kr(t){return t.ngDebugContext}function Or(t){return t.ngOriginalError}function Fr(t,...e){t.error(...e)}class Pr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||Fr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?kr(t)?kr(t):this._findContext(Or(t)):null}_findOriginalError(t){let e=Or(t);for(;e&&Or(e);)e=Or(e);return e}}const Nr=/^>|^->|<!--|-->|--!>|<!-$/g,Rr=/(<|>)/,Lr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(j))();function Mr(t){return t.ownerDocument.body}function qr(t){return t instanceof Function?t():t}var Ur=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let Br;function jr(t,e){return Br(t,e)}function Vr(t){const e=t[3];return dt(e)?e[3]:e}function Gr(t){return zr(t[13])}function Zr(t){return zr(t[4])}function zr(t){for(;null!==t&&!dt(t);)t=t[4];return t}function Hr(t,e,n,r,i){if(null!=r){let o,s=!1;dt(r)?o=r:ht(r)&&(s=!0,r=r[0]);const a=kt(r);0===t&&null!==n?null==i?ii(e,n,a):ri(e,n,a,i||null,!0):1===t&&null!==n?ri(e,n,a,i||null,!0):2===t?mi(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==kt(n)&&Hr(e,t,r,o,i);for(let s=lt;s<n.length;s++){const i=n[s];vi(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Yr(t,e){return It(t)?t.createText(e):t.createTextNode(e)}function Wr(t,e,n){It(t)?t.setValue(e,n):e.textContent=n}function $r(t,e){return t.createComment(function(t){return t.replace(Nr,t=>t.replace(Rr,"\u200b$1\u200b"))}(e))}function Qr(t,e,n){return It(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Kr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Bt(i,-1)),n.splice(r,1)}function Jr(t,e){if(t.length<=lt)return;const n=lt+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Kr(o,r),e>0&&(t[n-1][4]=r[4]);const s=mn(t,lt+e);vi(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Xr(t,e){if(!(256&e[2])){const n=e[11];It(n)&&n.destroyNode&&vi(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return ti(t[1],t);for(;e;){let n=null;if(ht(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)ht(e)&&ti(e[1],e),e=e[3];null===e&&(e=t),ht(e)&&ti(e[1],e),n=e&&e[4]}e=n}}(e)}}function ti(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof ke)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):kt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&It(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&dt(e[3])){n!==e[3]&&Kr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function ei(t,e,n){return ni(t,e.parent,n)}function ni(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===L.None||e===L.Emulated)return null}return Ft(r,n)}function ri(t,e,n,r,i){It(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function ii(t,e,n){It(t)?t.appendChild(e,n):e.appendChild(n)}function oi(t,e,n,r,i){null!==r?ri(t,e,n,r,i):ii(t,e,n)}function si(t,e){return It(t)?t.parentNode(e):e.parentNode}function ai(t,e,n){return li(t,e,n)}function ui(t,e,n){return 40&t.type?Ft(t,n):null}let ci,li=ui;function hi(t,e){li=t,ci=e}function di(t,e,n,r){const i=ei(t,r,e),o=e[11],s=ai(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)oi(o,i,n[a],s,!1);else oi(o,i,n,s,!1);void 0!==ci&&ci(o,r,e,n,i)}function fi(t,e){if(null!==e){const n=e.type;if(3&n)return Ft(e,t);if(4&n)return gi(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return fi(t,n);{const n=t[e.index];return dt(n)?gi(-1,n):kt(n)}}if(32&n)return jr(e,t)()||kt(t[e.index]);{const n=pi(t,e);return null!==n?Array.isArray(n)?n[0]:fi(Vr(t[16]),n):fi(t,e.next)}}return null}function pi(t,e){return null!==e?t[16][6].projection[e.projection]:null}function gi(t,e){const n=lt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return fi(t,r)}return e[7]}function mi(t,e,n){const r=si(t,e);r&&function(t,e,n,r){It(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}function yi(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&Ir(kt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)yi(t,e,n.child,r,i,o,!1),Hr(e,t,i,a,o);else if(32&u){const s=jr(n,r);let u;for(;u=s();)Hr(e,t,i,u,o);Hr(e,t,i,a,o)}else 16&u?_i(t,e,r,n,i,o):Hr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function vi(t,e,n,r,i,o){yi(n,r,t.firstChild,e,i,o,!1)}function _i(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Hr(e,t,i,a[u],o);else yi(t,e,a,s[3],i,o,!0)}function bi(t,e,n){It(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function wi(t,e,n){It(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Ci(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Ei="ng-template";function Si(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Ci(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Ti(t){return 4===t.type&&t.value!==Ei}function Ai(t,e,n){return e===(4!==t.type||n?t.value:Ei)}function Di(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Fe(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Ai(t,u,n)||""===u&&1===e.length){if(Ii(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Si(t.attrs,c,n)){if(Ii(r))return!1;s=!0}continue}const l=xi(8&r?"class":u,i,Ti(t),n);if(-1===l){if(Ii(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Ci(e,c,0)||2&r&&c!==t){if(Ii(r))return!1;s=!0}}}}else{if(!s&&!Ii(r)&&!Ii(u))return!1;if(s&&Ii(u))continue;s=!1,r=u|1&r}}return Ii(r)||s}function Ii(t){return 0==(1&t)}function xi(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ki(t,e,n=!1){for(let r=0;r<e.length;r++)if(Di(t,e[r],n))return!0;return!1}function Oi(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function Fi(t,e){return t?":not("+e.trim()+")":e}function Pi(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Ii(s)||(e+=Fi(o,i),i=""),r=s,o=o||!Ii(r);n++}return""!==i&&(e+=Fi(o,i)),e}const Ni={};function Ri(t){Li(Zt(),Gt(),ve()+t,Jt())}function Li(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&Se(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Te(e,r,0,n)}_e(n)}function Mi(t,e){return t<<17|e<<2}function qi(t){return t>>17&32767}function Ui(t){return 2|t}function Bi(t){return(131068&t)>>2}function ji(t,e){return-131069&t|e<<2}function Vi(t){return 1|t}function Gi(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];ce(i),n.contentQueries(2,e[o],o)}}}function Zi(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Ut(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function zi(t,e,n,r,i){let o=t.data[e];if(null===o)o=Hi(t,e,n,r,i),jt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=Wt();o.injectorIndex=null===t?-1:t.injectorIndex}return $t(o,!0),o}function Hi(t,e,n,r,i){const o=Yt(),s=Qt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}function Yi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Wi(t,e,n){de(e);try{const r=t.viewQuery;null!==r&&Ao(1,r,n);const i=t.template;null!==i&&Ki(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Gi(t,e),t.staticViewQueries&&Ao(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)wo(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,ye()}}function $i(t,e,n,r){const i=e[2];if(256==(256&i))return;de(e);const o=Jt();try{Ut(e),jt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Ki(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&Se(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Te(e,n,0,null),Ae(e,0)}if(function(t){for(let e=Gr(t);null!==e;e=Zr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Bt(r,1),n[2]|=1024}}}(e),function(t){for(let e=Gr(t);null!==e;e=Zr(e))for(let t=lt;t<e.length;t++){const n=e[t],r=n[1];Mt(n)&&$i(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Gi(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&Se(e,n)}else{const n=t.contentHooks;null!==n&&Te(e,n,1),Ae(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)_e(~r);else{const i=r,o=n[++t],s=n[++t];oe(o,i),s(2,e[i])}}}finally{_e(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)_o(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Ao(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&Se(e,n)}else{const n=t.viewHooks;null!==n&&Te(e,n,2),Ae(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Bt(e[3],-1))}finally{ye()}}function Qi(t,e,n,r){const i=e[10],o=!Jt(),s=Lt(e);try{o&&!s&&i.begin&&i.begin(),s&&Wi(t,e,r),$i(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Ki(t,e,n,r,i){const o=ve(),s=2&r;try{_e(-1),s&&e.length>ct&&Li(t,e,ct,Jt()),n(r,i)}finally{_e(o)}}function Ji(t,e,n){if(ft(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function Xi(t,e,n){Vt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Ve(n,e),Ir(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=mt(r);o&&po(e,n,r);const u=tn(e,t,a,n);Ir(u,e),null!==s&&mo(0,a-i,u,r,0,s),o&&(Rt(n.index,e)[8]=u)}}(t,e,n,Ft(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=jt.lFrame.currentDirectiveIndex;try{_e(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];se(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||uo(r,i)}}finally{_e(-1),se(s)}}(t,e,n))}function to(t,e,n=Ft){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function eo(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=no(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function no(t,e,n,r,i,o,s,a,u,c){const l=ct+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ni);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function ro(t,e,n,r){const i=Io(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&xo(t).push(r,i.length-1))}function io(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function oo(t,e,n,r,i,o,s,a){const u=Ft(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Fo(t,n,c,r,i),pt(e)&&function(t,e){const n=Rt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,It(o)?o.setProperty(u,r,i):Pe(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function so(t,e,n,r){let i=!1;if(Vt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];ki(n,s.selectors,!1)&&(i||(i=[]),He(Ve(n,e),t,s.type),mt(s)?(co(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,ho(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=Yi(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Ne(n.mergedAttrs,c.hostAttrs),fo(t,n,e,u,c),lo(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Ti(e)?null:yo(n,i);o.push(c),s=io(n,u,s),a=io(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new m("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Ne(n.mergedAttrs,n.attrs),i}function ao(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function uo(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function co(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function lo(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;mt(e)&&(n[""]=t)}}function ho(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function fo(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=yt(i.type)),s=new ke(o,mt(i),null);t.blueprint[r]=s,n[r]=s,ao(t,e,0,r,Yi(t,n,i.hostVars,Ni),i)}function po(t,e,n){const r=Ft(e,t),i=eo(n),o=t[10],s=Co(t,Zi(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function go(t,e,n,r,i,o,s){if(null==o)It(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?y(o):s(o,r||"",i);It(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}function mo(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function yo(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function vo(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function _o(t,e){const n=Rt(e,t);if(Mt(n)){const t=n[1];80&n[2]?$i(t,n,t.template,n[8]):n[5]>0&&bo(n)}}function bo(t){for(let n=Gr(t);null!==n;n=Zr(n))for(let t=lt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];$i(t,e,t.template,e[8])}else e[5]>0&&bo(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Rt(e[n],t);Mt(r)&&r[5]>0&&bo(r)}}function wo(t,e){const n=Rt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Wi(r,n,n[8])}function Co(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Eo(t){for(;t;){t[2]|=64;const e=Vr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function So(t,e,n){const r=e[10];r.begin&&r.begin();try{$i(t,e,t.template,n)}catch(i){throw Oo(e,i),i}finally{r.end&&r.end()}}function To(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=xr(n),i=r[1];Qi(i,r,i.template,n)}}(t[8])}function Ao(t,e,n){ce(0),e(t,n)}const Do=(()=>Promise.resolve(null))();function Io(t){return t[7]||(t[7]=[])}function xo(t){return t.cleanup||(t.cleanup=[])}function ko(t,e,n){return(null===t||mt(t))&&(n=function(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(n[e.index])),n[11]}function Oo(t,e){const n=t[9],r=n?n.get(Pr,null):null;r&&r.handleError(e)}function Fo(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Po(t,e,n){const r=Ot(e,t);Wr(t[11],r,n)}function No(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Ro=new ln("INJECTOR",-1);class Lo{get(t,e=wn){if(e===wn){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const Mo=new ln("Set Injector scope."),qo={},Uo={};let Bo;function jo(){return void 0===Bo&&(Bo=new Lo),Bo}function Vo(t,e=null,n=null,r){return new Go(t,n,e||jo(),r)}class Go{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&pn(e,n=>this.processProvider(n,t,e)),pn([t],t=>this.processInjectorType(t,[],i)),this.records.set(Ro,Ho(void 0,this));const o=this.records.get(Mo);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=wn,n=k.Default){this.assertNotDestroyed();const r=An(this);try{if(!(n&k.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof ln)&&E(t);e=n&&this.injectableDefInScope(n)?Ho(Zo(t),qo):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&k.Self?jo():this.parent).get(t,e=n&k.Optional&&e===wn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(l(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[En]&&i.unshift(e[En]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Cn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{An(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=T(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=T(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{pn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];pn(r,t=>this.processProvider(t,n,r||G))}}this.injectorDefTypes.add(o);const a=yt(o)||(()=>new o);this.records.set(o,Ho(a,qo));const u=r.providers;if(null!=u&&!s){const e=t;pn(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Wo(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return Yo(t)?Ho(void 0,t.useValue):Ho(zo(t),qo)}(t);if(Wo(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=Ho(void 0,qo,!0),e.factory=()=>kn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===qo&&(e.value=Uo,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=p(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function Zo(t){const e=E(t),n=null!==e?e.factory:yt(t);if(null!==n)return n;if(t instanceof ln)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=yn(e,"?");throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[A]||t[I]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function zo(t,e,n){let r;if(Wo(t)){const e=p(t);return yt(e)||Zo(e)}if(Yo(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...kn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>In(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return yt(e)||Zo(e);r=()=>new e(...kn(t.deps))}var i;return r}function Ho(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Yo(t){return null!==t&&"object"==typeof t&&Sn in t}function Wo(t){return"function"==typeof t}const $o=function(t,e,n){return function(t,e=null,n=null,r){const i=Vo(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let Qo=(()=>{class t{static create(t,e){return Array.isArray(t)?$o(t,e,""):$o(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=wn,t.NULL=new Lo,t.\u0275prov=w({token:t,providedIn:"any",factory:()=>In(Ro)}),t.__NG_ELEMENT_ID__=-1,t})();function Ko(t,e){Ee(xr(t)[1],Ht())}function Jo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(mt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=Xo(t.inputs),e.declaredInputs=Xo(t.declaredInputs),e.outputs=Xo(t.outputs);const n=i.hostBindings;n&&ns(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&ts(t,o),s&&es(t,s),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),mt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===Jo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ne(i.hostAttrs,n=Ne(n,i.hostAttrs))}}(r)}function Xo(t){return t===V?{}:t===G?[]:t}function ts(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function es(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function ns(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let rs=null;function is(){if(!rs){const t=j.Symbol;if(t&&t.iterator)rs=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(rs=n)}}}return rs}class os{constructor(t){this.wrapped=t}static wrap(t){return new os(t)}static unwrap(t){return os.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof os}}function ss(t){return!!as(t)&&(Array.isArray(t)||!(t instanceof Map)&&is()in t)}function as(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function us(t,e,n){return t[e]=n}function cs(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function ls(t,e,n,r){const i=cs(t,e,n);return cs(t,e+1,r)||i}function hs(t,e,n,r,i,o){const s=ls(t,e,n,r);return ls(t,e+2,i,o)||s}function ds(t,e,n,r){const i=Gt();return cs(i,ne(),e)&&(Zt(),function(t,e,n,r,i,o){const s=Ft(t,e);go(e[11],s,o,t.value,n,r,i)}(be(),i,t,e,n,r)),ds}function fs(t,e,n,r){return cs(t,ne(),n)?e+y(n)+r:Ni}function ps(t,e,n,r,i,o,s,a){const u=Gt(),c=Zt(),l=t+ct,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=zi(e,t,4,s||null,qt(c,a));so(e,n,l,qt(c,u)),Ee(e,l);const h=l.tViews=no(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];$t(h,!1);const d=u[11].createComment("");di(c,u,d,h),Ir(d,u),Co(u,u[l]=vo(d,u,d,h)),gt(h)&&Xi(c,u,h),null!=s&&to(u,h,a)}function gs(t){return Nt(jt.lFrame.contextLView,ct+t)}function ms(t,e=k.Default){const n=Gt();return null===n?In(t,e):$e(Ht(),n,p(t),e)}function ys(t,e,n){const r=Gt();return cs(r,ne(),e)&&oo(Zt(),be(),r,t,e,r[11],n,!1),ys}function vs(t,e,n,r,i){const o=i?"class":"style";Fo(t,n,e.inputs[o],o,r)}function _s(t,e,n,r){const i=Gt(),o=Zt(),s=ct+t,a=i[11],u=i[s]=Qr(a,e,jt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=zi(e,t,2,i,qt(a,o));return so(e,n,u,qt(a,s)),null!==u.attrs&&No(u,u.attrs,!1),null!==u.mergedAttrs&&No(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];$t(c,!0);const l=c.mergedAttrs;null!==l&&Oe(a,u,l);const h=c.classes;null!==h&&wi(a,u,h);const d=c.styles;null!==d&&bi(a,u,d),64!=(64&c.flags)&&di(o,i,u,c),0===jt.lFrame.elementDepthCount&&Ir(u,i),jt.lFrame.elementDepthCount++,gt(c)&&(Xi(o,i,c),Ji(o,c,i)),null!==r&&to(i,c)}function bs(){let t=Ht();Qt()?Kt():(t=t.parent,$t(t,!1));const e=t;jt.lFrame.elementDepthCount--;const n=Zt();n.firstCreatePass&&(Ee(n,t),ft(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&vs(n,e,Gt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&vs(n,e,Gt(),e.stylesWithoutHost,!1)}function ws(t,e,n,r){_s(t,e,n,r),bs()}function Cs(t,e,n){const r=Gt(),i=Zt(),o=t+ct,s=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=qt(o,r),a=zi(e,t,8,"ng-container",s);return null!==s&&No(a,s,!0),so(e,n,a,qt(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,n):i.data[o];$t(s,!0);const a=r[o]=r[11].createComment("");di(i,r,a,s),Ir(a,r),gt(s)&&(Xi(i,r,s),Ji(i,s,r)),null!=n&&to(r,s)}function Es(){let t=Ht();const e=Zt();Qt()?Kt():(t=t.parent,$t(t,!1)),e.firstCreatePass&&(Ee(e,t),ft(t)&&e.queries.elementEnd(t))}function Ss(){return Gt()}function Ts(t){return!!t&&"function"==typeof t.then}function As(t){return!!t&&"function"==typeof t.subscribe}const Ds=As;function Is(t,e,n,r){const i=Gt(),o=Zt(),s=Ht();return ks(o,i,i[11],s,t,e,!!n,r),Is}function xs(t,e){const n=Ht(),r=Gt(),i=Zt();return ks(i,r,ko(ae(i.data),n,r),n,t,e,!1),xs}function ks(t,e,n,r,i,o,s,a){const u=gt(r),c=t.firstCreatePass&&xo(t),l=Io(e);let h=!0;if(3&r.type||a){const d=Ft(r,e),f=a?a(d):d,p=l.length,g=a?t=>a(kt(t[r.index])):r.index;if(It(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Fs(r,e,0,o,!1);const t=n.listen(f,i,o);l.push(o,t),c&&c.push(i,g,p,p+1)}}else o=Fs(r,e,0,o,!0),f.addEventListener(i,o,s),l.push(o),c&&c.push(i,g,p,s)}else o=Fs(r,e,0,o,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}function Os(t,e,n,r){try{return!1!==n(r)}catch(i){return Oo(t,i),!1}}function Fs(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?Rt(t.index,e):e;0==(32&e[2])&&Eo(s);let a=Os(e,0,r,o),u=n.__ngNextListenerFn__;for(;u;)a=Os(e,0,u,o)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Ps(t=1){return function(t){return(jt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,jt.lFrame.contextLView))[8]}(t)}function Ns(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?ki(t,o,!0):Oi(r,o))return i}else n=i}return n}function Rs(t){const e=Gt()[16][6];if(!e.projection){const n=e.projection=yn(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?Ns(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function Ls(t,e=0,n){const r=Gt(),i=Zt(),o=zi(i,ct+t,16,null,n||null);null===o.projection&&(o.projection=e),Kt(),64!=(64&o.flags)&&function(t,e,n){_i(e[11],0,e,n,ei(t,n,e),ai(n.parent||e[6],n,e))}(i,r,o)}function Ms(t,e,n){return qs(t,"",e,"",n),Ms}function qs(t,e,n,r,i){const o=Gt(),s=fs(o,e,n,r);return s!==Ni&&oo(Zt(),be(),o,t,s,o[11],i,!1),qs}function Us(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?qi(o):Bi(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Bs(t[a],e)&&(u=!0,t[a+1]=r?Vi(n):Ui(n)),a=r?qi(n):Bi(n)}u&&(t[n+1]=r?Ui(o):Vi(o))}function Bs(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&bn(t,e)>=0}const js={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Vs(t){return t.substring(js.key,js.keyEnd)}function Gs(t,e){const n=js.textEnd;return n===e?-1:(e=js.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,js.key=e,n),Zs(t,e,n))}function Zs(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function zs(t,e,n){return $s(t,e,n,!1),zs}function Hs(t,e){return $s(t,e,null,!0),Hs}function Ys(t){Qs(vn,Ws,t,!0)}function Ws(t,e){for(let n=function(t){return function(t){js.key=0,js.keyEnd=0,js.value=0,js.valueEnd=0,js.textEnd=t.length}(t),Gs(t,Zs(t,0,js.textEnd))}(e);n>=0;n=Gs(e,n))vn(t,Vs(e),!0)}function $s(t,e,n,r){const i=Gt(),o=Zt(),s=re(2);o.firstUpdatePass&&Js(o,t,s,r),e!==Ni&&cs(i,s,e)&&ea(o,o.data[ve()],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=l(zn(t)))),t}(e,n),r,s)}function Qs(t,e,n,r){const i=Zt(),o=re(2);i.firstUpdatePass&&Js(i,null,o,r);const s=Gt();if(n!==Ni&&cs(s,o,n)){const a=i.data[ve()];if(ia(a,r)&&!Ks(i,o)){let t=r?a.classesWithoutHost:a.stylesWithoutHost;null!==t&&(n=h(t,n||"")),vs(i,a,s,n,r)}else!function(t,e,n,r,i,o,s,a){i===Ni&&(i=G);let u=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==l||null!==h;){const d=u<i.length?i[u+1]:void 0,f=c<o.length?o[c+1]:void 0;let p,g=null;l===h?(u+=2,c+=2,d!==f&&(g=h,p=f)):null===h||null!==l&&l<h?(u+=2,g=l):(c+=2,g=h,p=f),null!==g&&ea(t,e,n,r,g,p,s,a),l=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return G;const r=[],i=zn(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,o)}}function Ks(t,e){return e>=t.expandoStartIndex}function Js(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[ve()],s=Ks(t,n);ia(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=ae(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=ta(n=Xs(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Xs(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Bi(r))return t[qi(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=Xs(null,t,e,n[1],r),n=ta(n,e.attrs,r),function(t,e,n,r){t[qi(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=ta(r,t[o].hostAttrs,n);return ta(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=qi(s),u=Bi(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||bn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=qi(t[a+1]);t[r+1]=Mi(e,a),0!==e&&(t[e+1]=ji(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=Mi(a,0),0!==a&&(t[a+1]=ji(t[a+1],r)),a=r;else t[r+1]=Mi(u,0),0===a?a=r:t[u+1]=ji(t[u+1],r),u=r;l&&(t[r+1]=Ui(t[r+1])),Us(t,c,r,!0),Us(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&bn(o,e)>=0&&(n[r+1]=Vi(n[r+1]))}(e,c,t,r,o),s=Mi(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function Xs(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=ta(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function ta(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),vn(t,s,!!n||e[++o]))}return void 0===t?null:t}function ea(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];ra(1==(1&c)?na(u,e,n,i,Bi(c),s):void 0)||(ra(o)||2==(2&c)&&(o=na(u,null,n,i,a,s)),function(t,e,n,r,i){const o=It(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:Ur.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=Ur.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,Ot(ve(),n),i,o))}function na(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===Ni&&(l=c?G:void 0);let h=c?_n(l,r):u===r?l:void 0;if(o&&!ra(h)&&(h=_n(e,r)),ra(h)&&(a=h,s))return a;const d=t[i+1];i=s?qi(d):Bi(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=_n(t,r))}return a}function ra(t){return void 0!==t}function ia(t,e){return 0!=(t.flags&(e?16:32))}function oa(t,e=""){const n=Gt(),r=Zt(),i=t+ct,o=r.firstCreatePass?zi(r,i,1,e,null):r.data[i],s=n[i]=Yr(n[11],e);di(r,n,s,o),$t(o,!1)}function sa(t){return aa("",t,""),sa}function aa(t,e,n){const r=Gt(),i=fs(r,t,e,n);return i!==Ni&&Po(r,ve(),i),aa}function ua(t,e,n,r,i){const o=Gt(),s=function(t,e,n,r,i,o){const s=ls(t,ee(),n,i);return re(2),s?e+y(n)+r+y(i)+o:Ni}(o,t,e,n,r,i);return s!==Ni&&Po(o,ve(),s),ua}function ca(t,e,n){Qs(vn,Ws,fs(Gt(),t,e,n),!0)}function la(t,e,n,r,i,o,s,a,u){Qs(vn,Ws,function(t,e,n,r,i,o,s,a,u,c){const l=hs(t,ee(),n,i,s,u);return re(4),l?e+y(n)+r+y(i)+o+y(s)+a+y(u)+c:Ni}(Gt(),t,e,n,r,i,o,s,a,u),!0)}function ha(t,e,n){const r=Gt();return cs(r,ne(),e)&&oo(Zt(),be(),r,t,e,r[11],n,!0),ha}function da(t,e,n){const r=Gt();if(cs(r,ne(),e)){const i=Zt(),o=be();oo(i,o,r,t,e,ko(ae(i.data),o,r),n,!0)}return da}const fa=void 0;var pa=["en",[["a","p"],["AM","PM"],fa],[["AM","PM"],fa,fa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],fa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],fa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",fa,"{1} 'at' {0}",fa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ga={};function ma(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=va(e);if(n)return n;const r=e.split("-")[0];if(n=va(r),n)return n;if("en"===r)return pa;throw new Error(`Missing locale data for the locale "${t}".`)}function ya(t){return ma(t)[_a.PluralCase]}function va(t){return t in ga||(ga[t]=j.ng&&j.ng.common&&j.ng.common.locales&&j.ng.common.locales[t]),ga[t]}var _a=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const ba=["zero","one","two","few","many"],wa="en-US",Ca={marker:"element"},Ea={marker:"ICU"};var Sa=function(t){return t[t.SHIFT=2]="SHIFT",t[t.APPEND_EAGERLY=1]="APPEND_EAGERLY",t[t.COMMENT=2]="COMMENT",t}({});let Ta=wa;function Aa(t){var e;null==(e=t)&&b("Expected localeId to be defined",e,null,"!="),"string"==typeof t&&(Ta=t.toLowerCase().replace(/_/g,"-"))}function Da(t,e,n){const r=e.insertBeforeIndex,i=Array.isArray(r)?r[0]:r;return null===i?ui(t,0,n):kt(n[i])}function Ia(t,e,n,r,i){const o=e.insertBeforeIndex;if(Array.isArray(o)){let s=r,a=null;if(3&e.type||(a=s,s=i),null!==s&&0==(2&e.flags))for(let e=1;e<o.length;e++)ri(t,s,n[o[e]],a,!1)}}function xa(t,e){if(t.push(e),t.length>1)for(let n=t.length-2;n>=0;n--){const r=t[n];ka(r)||Oa(r,e)&&null===Fa(r)&&Pa(r,e.index)}}function ka(t){return!(64&t.type)}function Oa(t,e){return ka(e)||t.index>e.index}function Fa(t){const e=t.insertBeforeIndex;return Array.isArray(e)?e[0]:e}function Pa(t,e){const n=t.insertBeforeIndex;Array.isArray(n)?n[0]=e:(hi(Da,Ia),t.insertBeforeIndex=e)}function Na(t,e){const n=t.data[e];return null===n||"string"==typeof n?null:n.hasOwnProperty("currentCaseLViewIndex")?n:n.value}function Ra(t,e,n){const r=Hi(t,n,64,null,null);return xa(e,r),r}function La(t,e){const n=e[t.currentCaseLViewIndex];return null===n?n:n<0?~n:n}let Ma=0,qa=0;function Ua(t,e,n,r){const i=n[11];let o,s=null;for(let a=0;a<e.length;a++){const u=e[a];if("string"==typeof u){const t=e[++a];null===n[t]&&(n[t]=Yr(i,u))}else if("number"==typeof u)switch(1&u){case 0:const c=u>>>17;let l,h;if(null===s&&(s=c,o=si(i,r)),c===s?(l=r,h=o):(l=null,h=kt(n[c])),null!==h){const e=(131070&u)>>>1;ri(i,h,n[e],l,!1);const r=Na(t,e);if(null!==r&&"object"==typeof r){const e=La(r,n);null!==e&&Ua(t,r.create[e],n,n[r.anchorIdx])}}break;case 1:const d=e[++a],f=e[++a];go(i,Ot(u>>>1,n),null,null,d,f,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${u}"`)}else switch(u){case Ea:const t=e[++a],r=e[++a];null===n[r]&&Ir(n[r]=$r(i,t),n);break;case Ca:const o=e[++a],s=e[++a];null===n[s]&&Ir(n[s]=Qr(i,o,null),n)}}}function Ba(t,e,n,r,i){for(let o=0;o<n.length;o++){const s=n[o],a=n[++o];if(s&i){let i="";for(let s=o+1;s<=o+a;s++){const o=n[s];if("string"==typeof o)i+=o;else if("number"==typeof o)if(o<0)i+=y(e[r-o]);else{const a=o>>>2;switch(3&o){case 1:const o=n[++s],u=n[++s],c=t.data[a];"string"==typeof c?go(e[11],e[a],null,c,o,i,u):oo(t,c,e,o,i,e[11],u,!1);break;case 0:const l=e[a];null!==l&&Wr(e[11],l,i);break;case 2:Va(t,Na(t,a),e,i);break;case 3:ja(t,Na(t,a),r,e)}}}}else{const i=n[o+1];if(i>0&&3==(3&i)){const n=Na(t,i>>>2);e[n.currentCaseLViewIndex]<0&&ja(t,n,r,e)}}o+=a}}function ja(t,e,n,r){let i=r[e.currentCaseLViewIndex];if(null!==i){let o=Ma;i<0&&(i=r[e.currentCaseLViewIndex]=~i,o=-1),Ba(t,r,e.update[i],n,o)}}function Va(t,e,n,r){const i=function(t,e){let n=t.cases.indexOf(e);if(-1===n)switch(t.type){case 1:{const r=function(t,e){const n=ya(e)(parseInt(t,10)),r=ba[n];return void 0!==r?r:"other"}(e,Ta);n=t.cases.indexOf(r),-1===n&&"other"!==r&&(n=t.cases.indexOf("other"));break}case 0:n=t.cases.indexOf("other")}return-1===n?null:n}(e,r);if(La(e,n)!==i&&(Ga(t,e,n),n[e.currentCaseLViewIndex]=null===i?null:~i,null!==i)){const r=n[e.anchorIdx];r&&Ua(t,e.create[i],n,r)}}function Ga(t,e,n){let r=La(e,n);if(null!==r){const i=e.remove[r];for(let e=0;e<i.length;e++){const r=i[e];if(r>0){const t=Ot(r,n);null!==t&&mi(n[11],t)}else Ga(t,Na(t,~r),n)}}}const Za=/\ufffd(\d+):?\d*\ufffd/gi,za=/\ufffd(\d+)\ufffd/,Ha=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Ya=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,Wa=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,$a=/\uE500/g;function Qa(t,e,n,r,i,o,s){const a=Yi(t,r,1,null);let u=a<<Sa.SHIFT,c=Wt();e===c&&(c=null),null===c&&(u|=Sa.APPEND_EAGERLY),s&&(u|=Sa.COMMENT,void 0===Br&&(Br=function(){const t=[];let e,n,r=-1;function i(t,e){r=0;const i=La(t,e);n=null!==i?t.remove[i]:G}function o(){if(r<n.length){const s=n[r++];return s>0?e[s]:(t.push(r,n),i(e[1].data[~s],e),o())}return 0===t.length?null:(n=t.pop(),r=t.pop(),o())}return function(n,r){for(e=r;t.length;)t.pop();return i(n.value,r),o}}())),i.push(u,null===o?"":o);const l=Hi(t,a,s?32:1,null===o?"":o,null);xa(n,l);const h=l.index;return $t(l,!1),null!==c&&e!==c&&function(t,e){let n=t.insertBeforeIndex;var r;null===n?(hi(Da,Ia),n=t.insertBeforeIndex=[null,e]):("Expecting array here",(r=Array.isArray(n))!=!0&&b("Expecting array here",r,true,"=="),n.push(e))}(c,h),l}function Ka(t,e,n,r,i,o,s){const a=s.match(Za),u=Qa(t,e,n,o,r,a?null:s,!1);a&&Ja(i,s,u.index,null,0,null)}function Ja(t,e,n,r,i,o){const s=t.length,a=s+1;t.push(null,null);const u=s+2,c=e.split(Za);let l=0;for(let h=0;h<c.length;h++){const e=c[h];if(1&h){const n=i+parseInt(e,10);t.push(-1-n),l|=Xa(n)}else""!==e&&t.push(e)}return t.push(n<<2|(r?1:0)),r&&t.push(r,o),t[s]=l,t[a]=t.length-u,l}function Xa(t){return 1<<Math.min(t,31)}function tu(t){let e,n,r="",i=0,o=!1;for(;null!==(e=Ya.exec(t));)o?e[0]===`\ufffd/*${n}\ufffd`&&(i=e.index,o=!1):(r+=t.substring(i,e.index+e[0].length),n=e[1],o=!0);return r+=t.substr(i),r}function eu(t,e,n,r,i,o){let s=0;const a={type:i.type,currentCaseLViewIndex:Yi(t,e,1,null),anchorIdx:o,cases:[],create:[],remove:[],update:[]};!function(t,e,n){t.push(Xa(e.mainBinding),2,-1-e.mainBinding,n<<2|2)}(n,i,o),function(t,e,n){const r=t.data[e];null===r?t.data[e]=n:r.value=n}(t,o,a);const u=i.values;for(let c=0;c<u.length;c++){const o=u[c],l=[];for(let t=0;t<o.length;t++){const e=o[t];if("string"!=typeof e){const n=l.push(e)-1;o[t]=`\x3c!--\ufffd${n}\ufffd--\x3e`}}s=iu(t,a,e,n,r,i.cases[c],o.join(""),l)|s}s&&function(t,e,n){t.push(e,1,n<<2|3)}(n,s,o)}function nu(t){const e=[],n=[];let r=1,i=0;const o=ru(t=t.replace(Ha,function(t,e,n){return r="select"===n?0:1,i=parseInt(e.substr(1),10),""}));for(let s=0;s<o.length;){let t=o[s++].trim();1===r&&(t=t.replace(/\s*(?:=)?(\w+)\s*/,"$1")),t.length&&e.push(t);const i=ru(o[s++]);e.length>n.length&&n.push(i)}return{type:r,mainBinding:i,cases:e,values:n}}function ru(t){if(!t)return[];let e=0;const n=[],r=[],i=/[{}]/g;let o;for(i.lastIndex=0;o=i.exec(t);){const i=o.index;if("}"==o[0]){if(n.pop(),0==n.length){const n=t.substring(e,i);Ha.test(n)?r.push(nu(n)):r.push(n),e=i+1}}else{if(0==n.length){const n=t.substring(e,i);r.push(n),e=i+1}n.push("{")}}const s=t.substring(e);return r.push(s),r}function iu(t,e,n,r,i,o,s,a){const u=[],c=[],l=[];e.cases.push(o),e.create.push(u),e.remove.push(c),e.update.push(l);const h=Xn(Dt()).getInertBodyElement(s),d=Er(h)||h;return d?ou(t,e,n,r,u,c,l,d,i,a,0):0}function ou(t,e,n,r,i,o,s,a,u,c,l){let h=0,d=a.firstChild;for(;d;){const a=Yi(t,n,1,null);switch(d.nodeType){case Node.ELEMENT_NODE:const f=d,p=f.tagName.toLowerCase();if(dr.hasOwnProperty(p)){uu(i,Ca,p,u,a),t.data[a]=p;const g=f.attributes;for(let t=0;t<g.length;t++){const e=g.item(t),n=e.name.toLowerCase();e.value.match(Za)?gr.hasOwnProperty(n)&&Ja(s,e.value,a,e.name,0,fr[n]?ir:pr[n]?or:null):cu(i,a,e)}h=ou(t,e,n,r,i,o,s,d,a,c,l+1)|h,su(o,a,l)}break;case Node.TEXT_NODE:const g=d.textContent||"",m=g.match(Za);uu(i,null,m?"":g,u,a),su(o,a,l),m&&(h=Ja(s,g,a,null,0,null)|h);break;case Node.COMMENT_NODE:const y=za.exec(d.textContent||"");if(y){const e=c[parseInt(y[1],10)];uu(i,Ea,"",u,a),eu(t,n,r,u,e,a),au(o,a,l)}}d=d.nextSibling}return h}function su(t,e,n){0===n&&t.push(e)}function au(t,e,n){0===n&&(t.push(~e),t.push(e))}function uu(t,e,n,r,i){null!==e&&t.push(e),t.push(n,i,0|r<<17|i<<1)}function cu(t,e,n){t.push(e<<1|1,n.name,n.value)}function lu(t,e,n){(function(t,e,n=-1){const r=Zt(),i=Gt(),o=ct+t,s=qt(r.consts,e),a=Wt();r.firstCreatePass&&function(t,e,n,r,i,o){const s=Wt(),a=[],u=[],c=[[]],l=(h=i=function(t,e){if(function(t){return-1===t}(e))return tu(t);{const n=t.indexOf(`:${e}\ufffd`)+2+e.toString().length,r=t.search(new RegExp(`\ufffd\\/\\*\\d+:${e}\ufffd`));return tu(t.substring(n,r))}}(i,o),h.replace($a," ")).split(Wa);var h;for(let d=0;d<l.length;d++){let r=l[d];if(0==(1&d)){const o=ru(r);for(let r=0;r<o.length;r++){let l=o[r];if(0==(1&r)){const e=l;""!==e&&Ka(t,s,c[0],a,u,n,e)}else{const r=l;if("object"!=typeof r)throw new Error(`Unable to parse ICU expression in "${i}" message.`);eu(t,n,u,e,r,Qa(t,s,c[0],n,a,"",!0).index)}}}else{const e=47===r.charCodeAt(0),n=(r.charCodeAt(e?1:0),ct+Number.parseInt(r.substring(e?2:1)));if(e)c.shift(),$t(Wt(),!1);else{const e=Ra(t,c[0],n);c.unshift([]),$t(e,!0)}}}t.data[r]={create:a,update:u}}(r,null===a?0:a.index,i,o,s,n);const u=r.data[o],c=ni(r,a===i[6]?null:a,i);!function(t,e,n,r){const i=t[11];for(let o=0;o<e.length;o++){const s=e[o++],a=e[o],u=(s&Sa.COMMENT)===Sa.COMMENT,c=(s&Sa.APPEND_EAGERLY)===Sa.APPEND_EAGERLY,l=s>>>Sa.SHIFT;let h=t[l];null===h&&(h=t[l]=u?i.createComment(a):Yr(i,a)),c&&null!==n&&ri(i,n,h,r,!1)}}(i,u.create,c,a&&8&a.type?i[a.index]:null),ie(!0)})(t,e,n),ie(!1)}function hu(t){return cs(Gt(),ne(),t)&&(Ma|=1<<Math.min(qa,31)),qa++,hu}function du(t){!function(t,e,n){if(qa>0){const r=t.data[n];Ba(t,e,Array.isArray(r)?r:r.update,ee()-qa-1,Ma)}Ma=0,qa=0}(Zt(),Gt(),t+ct)}function fu(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let o=0;o<t.length;o++)fu(t[o],e,n,r,i);else{const o=Zt(),s=Gt();let a=Wo(t)?t:p(t.provide),u=zo(t);const c=Ht(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(Wo(t)||!t.multi){const r=new ke(u,i,ms),f=mu(a,e,i?l:l+d,h);-1===f?(He(Ve(c,s),o,a),pu(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=mu(a,e,l+d,h),p=mu(a,e,l,l+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){He(Ve(c,s),o,a);const l=function(t,e,n,r,i){const o=new ke(t,n,ms);return o.multi=[],o.index=e,o.componentProviders=0,gu(o,i,r&&!n),o}(i?vu:yu,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),pu(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else pu(o,t,f>-1?f:p,gu(n[i?p:f],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function pu(t,e,n,r){const i=Wo(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function gu(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function mu(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function yu(t,e,n,r){return _u(this.multi,[])}function vu(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=tn(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),_u(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],_u(i,o);return o}function _u(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function bu(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Zt();if(r.firstCreatePass){const i=mt(t);fu(n,r.data,r.blueprint,i,!0),fu(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class wu{}class Cu{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Eu=(()=>{class t{}return t.NULL=new Cu,t})();function Su(...t){}function Tu(t,e){return new Du(Ft(t,e))}const Au=function(){return Tu(Ht(),Gt())};let Du=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Au,t})();function Iu(t){return t instanceof Du?t.nativeElement:t}class xu{}let ku=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ou(),t})();const Ou=function(){const t=Gt(),e=Rt(Ht().index,t);return function(t){return t[11]}(ht(e)?e:t)};let Fu=(()=>{class t{}return t.\u0275prov=w({token:t,providedIn:"root",factory:()=>null}),t})();class Pu{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Nu=new Pu("12.0.5");class Ru{constructor(){}supports(t){return ss(t)}create(t){return new Mu(t)}}const Lu=(t,e)=>e;class Mu{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Lu}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<ju(n,r,i)?e:n,s=ju(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!ss(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[is()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new qu(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Bu),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Bu),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class qu{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Uu{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Bu{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Uu,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ju(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Vu{constructor(){}supports(t){return t instanceof Map||as(t)}create(){return new Gu}}class Gu{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||as(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Zu(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Zu{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function zu(){return new Hu([new Ru])}let Hu=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||zu()),deps:[[t,new Nn,new Pn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=w({token:t,providedIn:"root",factory:zu}),t})();function Yu(){return new Wu([new Vu])}let Wu=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Yu()),deps:[[t,new Nn,new Pn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=w({token:t,providedIn:"root",factory:Yu}),t})();function $u(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(kt(o)),dt(o))for(let t=lt;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&$u(e[1],e,n,r)}const s=n.type;if(8&s)$u(t,e,n.child,r);else if(32&s){const t=jr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=pi(e,n);if(Array.isArray(t))r.push(...t);else{const n=Vr(e[16]);$u(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Qu{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return $u(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(dt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Jr(t,n),mn(e,n))}this._attachedToViewContainer=!1}Xr(this._lView[1],this._lView)}onDestroy(t){ro(this._lView[1],this._lView,null,t)}markForCheck(){Eo(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){So(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Xt(!0);try{So(t,e,n)}finally{Xt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,vi(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Ku extends Qu{constructor(t){super(t),this._view=t}detectChanges(){To(this._view)}checkNoChanges(){!function(t){Xt(!0);try{To(t)}finally{Xt(!1)}}(this._view)}get context(){return null}}const Ju=function(t){return function(t,e,n){if(pt(t)&&!n){const n=Rt(t.index,e);return new Qu(n,n)}return 47&t.type?new Qu(e[16],e):null}(Ht(),Gt(),16==(16&t))};let Xu=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ju,t})();const tc=[new Vu],ec=new Hu([new Ru]),nc=new Wu(tc),rc=function(){return ac(Ht(),Gt())};let ic=(()=>{class t{}return t.__NG_ELEMENT_ID__=rc,t})();const oc=ic,sc=class extends oc{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Zi(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Wi(e,n,t),new Qu(n)}};function ac(t,e){return 4&t.type?new sc(e,t,Tu(t,e)):null}class uc{}class cc{}const lc=function(){return mc(Ht(),Gt())};let hc=(()=>{class t{}return t.__NG_ELEMENT_ID__=lc,t})();const dc=hc,fc=class extends dc{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Tu(this._hostTNode,this._hostLView)}get injector(){return new rn(this._hostTNode,this._hostLView)}get parentInjector(){const t=ze(this._hostTNode,this._hostLView);if(Le(t)){const e=qe(t,this._hostLView),n=Me(t);return new rn(e[1].data[n+8],e)}return new rn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=pc(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-lt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(uc,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(dt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new fc(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=lt+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-lt?(e[4]=n[i],gn(n,lt+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=gi(i,o),a=n[11],u=si(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,vi(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),gn(gc(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=pc(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Jr(this._lContainer,e);n&&(mn(gc(this._lContainer),e),Xr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Jr(this._lContainer,e);return n&&null!=mn(gc(this._lContainer),e)?new Qu(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function pc(t){return t[8]}function gc(t){return t[8]||(t[8]=[])}function mc(t,e){let n;const r=e[t.index];if(dt(r))n=r;else{let i;if(8&t.type)i=kt(r);else{const n=e[11];i=n.createComment("");const r=Ft(t,e);ri(n,si(n,r),i,function(t,e){return It(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=vo(r,e,i,t),Co(e,n)}return new fc(n,t,e)}const yc={};class vc extends Eu{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=at(t);return new wc(e,this.ngModule)}}function _c(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const bc=new ln("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Lr});class wc extends wu{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Pi).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return _c(this.componentDef.inputs)}get outputs(){return _c(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,yc,i);return o!==yc||r===yc?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(xu,xt),s=i.get(Fu,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(It(t))return t.selectRootElement(e,n===L.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Qr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?St:"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Lr,clean:Do,playerHandler:null,flags:0},d=no(0,null,null,1,0,null,null,null,null,null),f=Zi(null,d,h,l,null,null,o,a,s,i);let p,g;de(f);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=zi(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(No(a,u,!0),null!==t&&(Oe(i,t,u),null!==a.classes&&wi(i,t,a.classes),null!==a.styles&&bi(i,t,a.styles)));const c=r.createRenderer(t,e),l=Zi(n,eo(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(He(Ve(a,n),s,e.type),co(s,a),ho(a,n.length,1)),Co(n,l),n[20]=l}(c,this.componentDef,f,o,a);if(c)if(n)Oe(a,c,["ng-version",Nu.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Ii(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Oe(a,c,t),e&&e.length>0&&wi(a,c,e.join(" "))}if(g=Pt(d,ct),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Ht();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),fo(t,r,e,Yi(t,e,1,null),n));const i=tn(e,t,r.directiveStart,r);Ir(i,e);const o=Ft(r,e);return o&&Ir(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Ht();e.contentQueries(1,s,t.directiveStart)}const a=Ht();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(_e(a.index),ao(n[1],a,0,a.directiveStart,a.directiveEnd,e),uo(e,s)),s}(t,this.componentDef,f,h,[Ko]),Wi(d,f,null)}finally{ye()}return new Cc(this.componentType,p,Tu(g,f),f,g)}}class Cc extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Ku(r),this.componentType=t}get injector(){return new rn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Ec=new Map;class Sc extends uc{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new vc(this);const n=ut(t),r=t[W]||null;r&&Aa(r),this._bootstrapComponents=qr(n.bootstrap),this._r3Injector=Vo(t,e,[{provide:uc,useValue:this},{provide:Eu,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Qo.THROW_IF_NOT_FOUND,n=k.Default){return t===Qo||t===uc||t===Ro?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Tc extends cc{constructor(t){super(),this.moduleType=t,null!==ut(t)&&function(t){const e=new Set;!function t(n){const r=ut(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,Ec.get(i),n),Ec.set(i,n));const o=qr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Sc(this.moduleType,t)}}function Ac(t,e,n,r){return kc(Gt(),te(),t,e,n,r)}function Dc(t,e,n,r,i){return Oc(Gt(),te(),t,e,n,r,i)}function Ic(t,e,n,r,i,o){return function(t,e,n,r,i,o,s,a){const u=e+n;return function(t,e,n,r,i){const o=ls(t,e,n,r);return cs(t,e+2,i)||o}(t,u,i,o,s)?us(t,u+3,a?r.call(a,i,o,s):r(i,o,s)):xc(t,u+3)}(Gt(),te(),t,e,n,r,i,o)}function xc(t,e){const n=t[e];return n===Ni?void 0:n}function kc(t,e,n,r,i,o){const s=e+n;return cs(t,s,i)?us(t,s+1,o?r.call(o,i):r(i)):xc(t,s+1)}function Oc(t,e,n,r,i,o,s){const a=e+n;return ls(t,a,i,o)?us(t,a+2,s?r.call(s,i,o):r(i,o)):xc(t,a+2)}function Fc(t,e){const n=Zt();let r;const i=t+ct;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new m("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=yt(r.type)),s=F(ms);try{const t=Be(!1),e=o();return Be(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Gt(),i,e),e}finally{F(s)}}function Pc(t,e,n){const r=t+ct,i=Gt(),o=Nt(i,r);return Mc(i,Lc(i,r)?kc(i,te(),e,o.transform,n,o):o.transform(n))}function Nc(t,e,n,r){const i=t+ct,o=Gt(),s=Nt(o,i);return Mc(o,Lc(o,i)?Oc(o,te(),e,s.transform,n,r,s):s.transform(n,r))}function Rc(t,e,n,r,i,o){const s=t+ct,a=Gt(),u=Nt(a,s);return Mc(a,Lc(a,s)?function(t,e,n,r,i,o,s,a,u){const c=e+n;return hs(t,c,i,o,s,a)?us(t,c+4,u?r.call(u,i,o,s,a):r(i,o,s,a)):xc(t,c+4)}(a,te(),e,u.transform,n,r,i,o,u):u.transform(n,r,i,o))}function Lc(t,e){return t[1].data[e].pure}function Mc(t,e){return os.isWrapped(e)&&(e=os.unwrap(e),t[ee()]=Ni),e}function qc(t){return e=>{setTimeout(t,void 0,e)}}const Uc=class extends r.xQ{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,o,s;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(o=e.error)||void 0===o?void 0:o.bind(e),c=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(u=qc(u),a&&(a=qc(a)),c&&(c=qc(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.w&&t.add(l),l}};function Bc(){return this._results[is()]()}class jc{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=is(),n=jc.prototype;n[e]||(n[e]=Bc)}get changes(){return this._changes||(this._changes=new Uc)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=fn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Vc{constructor(t){this.queryList=t,this.matches=null}clone(){return new Vc(this.queryList)}setDirty(){this.queryList.setDirty()}}class Gc{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Gc(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==rl(t,e).matches&&this.queries[e].setDirty()}}class Zc{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class zc{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new zc(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Hc{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Hc(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Yc(e,i)),this.matchTNodeWithReadOption(t,e,Xe(e,t,i,!1,!1))}else n===ic?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Xe(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Du||r===hc||r===ic&&4&e.type)this.addMatch(e.index,-2);else{const n=Xe(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Yc(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Wc(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Tu(t,e):4&t.type?ac(t,e):null}(e,t):-2===n?function(t,e,n){return n===Du?Tu(e,t):n===ic?ac(e,t):n===hc?mc(e,t):void 0}(t,e,r):tn(t,t[1],n,e)}function $c(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Wc(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Qc(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=$c(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=lt;t<s.length;t++){const e=s[t];e[17]===e[3]&&Qc(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];Qc(n[1],n,i,r)}}}}}return r}function Kc(t){const e=Gt(),n=Zt(),r=ue();ce(r+1);const i=rl(n,r);if(t.dirty&&Lt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?Qc(n,e,r,[]):$c(n,e,i,r);t.reset(o,Iu),t.notifyOnChanges()}return!0}return!1}function Jc(t,e,n){const r=Zt();r.firstCreatePass&&(nl(r,new Zc(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),el(r,Gt(),e)}function Xc(t,e,n,r){const i=Zt();if(i.firstCreatePass){const o=Ht();nl(i,new Zc(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}el(i,Gt(),n)}function tl(){return t=Gt(),e=ue(),t[19].queries[e].queryList;var t,e}function el(t,e,n){const r=new jc(4==(4&n));ro(t,e,r,r.destroy),null===e[19]&&(e[19]=new Gc),e[19].queries.push(new Vc(r))}function nl(t,e,n){null===t.queries&&(t.queries=new zc),t.queries.track(new Hc(e,n))}function rl(t,e){return t.queries.getByIndex(e)}function il(t,e){return ac(t,e)}const ol=new ln("Application Initializer");let sl=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Su,this.reject=Su,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(Ts(e))t.push(e);else if(Ds(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(In(ol,8))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const al=new ln("AppId"),ul={provide:al,useFactory:function(){return`${cl()}${cl()}${cl()}`},deps:[]};function cl(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ll=new ln("Platform Initializer"),hl=new ln("Platform ID"),dl=new ln("appBootstrapListener");let fl=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const pl=new ln("LocaleId"),gl=new ln("DefaultCurrencyCode");class ml{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const yl=function(t){return new Tc(t)},vl=yl,_l=function(t){return Promise.resolve(yl(t))},bl=function(t){const e=yl(t),n=qr(ut(t).declarations).reduce((t,e)=>{const n=at(e);return n&&t.push(new wc(n)),t},[]);return new ml(e,n)},wl=bl,Cl=function(t){return Promise.resolve(bl(t))};let El=(()=>{class t{constructor(){this.compileModuleSync=vl,this.compileModuleAsync=_l,this.compileModuleAndAllComponentsSync=wl,this.compileModuleAndAllComponentsAsync=Cl}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const Sl=(()=>Promise.resolve(0))();function Tl(t){"undefined"==typeof Zone?Sl.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Al{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Uc(!1),this.onMicrotaskEmpty=new Uc(!1),this.onStable=new Uc(!1),this.onError=new Uc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=j.requestAnimationFrame,e=j.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(j,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,xl(t),t.isCheckStableRunning=!0,Il(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),xl(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return kl(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),Ol(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return kl(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Ol(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,xl(t),Il(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Al.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Al.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Dl,Su,Su);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Dl={};function Il(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function xl(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function kl(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Ol(t){t._nesting--,Il(t)}class Fl{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Uc,this.onMicrotaskEmpty=new Uc,this.onStable=new Uc,this.onError=new Uc}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Pl=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Al.assertNotInAngularZone(),Tl(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Tl(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(In(Al))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})(),Nl=(()=>{class t{constructor(){this._applications=new Map,ql.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return ql.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();class Rl{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Ll(t){ql=t}let Ml,ql=new Rl,Ul=!0,Bl=!1;function jl(){return Bl=!0,Ul}function Vl(){if(Bl)throw new Error("Cannot enable prod mode after platform setup.");Ul=!1}const Gl=new ln("AllowMultipleToken");class Zl{constructor(t,e){this.name=t,this.token=e}}function zl(t,e,n=[]){const r=`Platform: ${e}`,i=new ln(r);return(e=[])=>{let o=Hl();if(!o||o.injector.get(Gl,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Mo,useValue:"platform"});!function(t){if(Ml&&!Ml.destroyed&&!Ml.injector.get(Gl,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ml=t.get(Yl);const e=t.get(ll,null);e&&e.forEach(t=>t())}(Qo.create({providers:t,name:r}))}return function(t){const e=Hl();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Hl(){return Ml&&!Ml.destroyed?Ml:null}let Yl=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Fl:("zone.js"===t?void 0:t)||new Al({enableLongStackTrace:jl(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:Al,useValue:n}];return n.run(()=>{const e=Qo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(Pr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Ql(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Ts(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(sl);return t.runInitializers(),t.donePromise.then(()=>(Aa(i.injector.get(pl,wa)||wa),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Wl({},e);return function(t,e,n){const r=new Tc(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get($l);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(In(Qo))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function Wl(t,e){return Array.isArray(e)?e.reduce(Wl,t):Object.assign(Object.assign({},t),e)}let $l=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new o.y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new o.y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Al.assertNotInAngularZone(),Tl(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Al.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=(0,s.T)(u,c.pipe((0,a.B)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof wu?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(uc),i=n.create(Qo.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(Pl,null),a=s&&i.injector.get(Nl);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Ql(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Ql(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(dl,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(In(Al),In(Qo),In(Pr),In(Eu),In(sl))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function Ql(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Kl{}class Jl{}const Xl={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let th=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Xl}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n(8255)(e).then(t=>t[r]).then(t=>eh(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>eh(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(In(El),In(Jl,8))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function eh(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const nh=function(t){return null},rh=zl(null,"core",[{provide:hl,useValue:"unknown"},{provide:Yl,deps:[Qo]},{provide:Nl,deps:[]},{provide:fl,deps:[]}]),ih=[{provide:$l,useClass:$l,deps:[Al,Qo,Pr,Eu,sl]},{provide:bc,deps:[Al],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:sl,useClass:sl,deps:[[new Pn,ol]]},{provide:El,useClass:El,deps:[]},ul,{provide:Hu,useFactory:function(){return ec},deps:[]},{provide:Wu,useFactory:function(){return nc},deps:[]},{provide:pl,useFactory:function(t){return Aa(t=t||"undefined"!=typeof $localize&&$localize.locale||wa),t},deps:[[new Fn(pl),new Pn,new Nn]]},{provide:gl,useValue:"USD"}];let oh=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(In($l))},t.\u0275mod=nt({type:t}),t.\u0275inj=C({providers:ih}),t})()},2346:(t,e,n)=>{"use strict";n.d(e,{hO:()=>D,xv:()=>_,Dh:()=>v,Ot:()=>b,HU:()=>f,GT:()=>y,sI:()=>T,on:()=>C,ss:()=>p,pX:()=>m,yq:()=>E});var r=n(8489),i=n(8569),o=n(4019),s=n(3482),a=n(45),u=n(5366),c=n(1858);function l(){}t=n.hmd(t);class h{constructor(t,e=r.N){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe((0,o.b)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.z))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe((0,s.R)(t.outsideAngular),(0,a.QV)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.OlP("angularfire2.app.options"),_=new u.OlP("angularfire2.app.nameOrConfig");class b{}const w=new u.GfV("6.1.5");function C(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.Z.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.Z.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&S("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const E=()=>{S("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},S=(t,...e)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[t](...e)};function T(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&S("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const A={provide:b,useFactory:C,deps:[v,u.R0b,[new u.FiY,_]]};let D=(()=>{class t{constructor(t){c.Z.registerVersion("angularfire",w.full,t.toString()),c.Z.registerVersion("angular",u.q4F.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:_,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(u.Lbi))},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({providers:[A]}),t})()},1062:(t,e,n)=>{"use strict";n.d(e,{Z:()=>w});var r,i,o=n(4762),s=n(250),a=n(5119),u=n(308),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.LL("app","Firebase",c),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Yd("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,s.p$)(t),this.container=new a.H0(e.name),this._addComponent(new a.wA("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=d),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=d),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=d);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if((0,s.r3)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.wA(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.7.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!(0,s.r3)(e,t=t||d))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&(0,s.ZB)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=(0,o.pi)((0,o.pi)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,s.ZB)(e,t)},createSubscribe:s.ne,ErrorFactory:s.LL,deepExtend:s.ZB}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if((0,s.jU)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var _=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,s.UG)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),_.apply(void 0,t)};var b=m;!function(t,e){t.INTERNAL.registerComponent(new a.wA("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.28",void 0),t.registerVersion("fire-js","")}(b);const w=b},5119:(t,e,n)=>{"use strict";n.d(e,{wA:()=>o,H0:()=>u,zt:()=>a});var r=n(4762),i=n(250),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=(0,r.CR)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,function(){var t;return(0,r.Jh)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),(0,r.CR)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,o=void 0===i?{}:i,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:s,options:o});try{for(var u=(0,r.XA)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=(0,r.CR)(c.value,2),h=l[1];s===this.normalizeInstanceIdentifier(l[0])&&h.resolve(a)}}catch(d){e={error:d}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,o=this.onInitCallbacks.get(e);if(o)try{for(var s=(0,r.XA)(o),a=s.next();!a.done;a=s.next()){var u=a.value;try{u(t,e)}catch(c){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=s),this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},2107:(t,e,n)=>{"use strict";var r=n(1062),i=n(5119),o=n(250),s=n(4762),a=n(308);t=n.hmd(t);var u="";function c(t){u=t}var l,h=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,o.Pz)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,o.cI)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),d=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return(0,o.r3)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),f=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new h(e)}}catch(n){}return new d},p=f("localStorage"),g=f("sessionStorage"),m=new a.Yd("@firebase/database"),y=(l=1,function(){return l++}),v=function(t){var e=(0,o.dS)(t),n=new o.gQ;n.update(e);var r=n.digest();return o.US.encodeByteArray(r)},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=_.apply(null,i):n+="object"==typeof i?(0,o.Pz)(i):i,n+=" "}return n},b=null,w=!0,C=function(t,e){(0,o.hu)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(m.logLevel=a.in.VERBOSE,b=m.log.bind(m),e&&g.set("logging_enabled",!0)):"function"==typeof t?b=t:(b=null,g.remove("logging_enabled"))},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===w&&(w=!1,null===b&&!0===g.get("logging_enabled")&&C(!0)),b){var n=_.apply(null,t);b(n)}},S=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];E.apply(void 0,(0,s.ev)([t],(0,s.CR)(e)))}},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+_.apply(void 0,(0,s.ev)([],(0,s.CR)(t)));m.error(n)},A=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+_.apply(void 0,(0,s.ev)([],(0,s.CR)(t)));throw m.error(n),new Error(n)},D=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+_.apply(void 0,(0,s.ev)([],(0,s.CR)(t)));m.warn(n)},I=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},x="[MIN_NAME]",k="[MAX_NAME]",O=function(t,e){if(t===e)return 0;if(t===x||e===k)return-1;if(e===x||t===k)return 1;var n=U(t),r=U(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},F=function(t,e){return t===e?0:t<e?-1:1},P=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+(0,o.Pz)(e))},N=function(t){if("object"!=typeof t||null===t)return(0,o.Pz)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=(0,o.Pz)(e[i]),r+=":",r+=N(t[e[i]]);return r+"}"},R=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function L(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var M=function(t){var e,n,r,i,s;(0,o.hu)(!I(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},q=new RegExp("^-?(0*)\\d{1,10}$"),U=function(t){if(q.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},B=function(t){try{t()}catch(e){setTimeout(function(){throw D("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},j=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},V=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(function(t){return n.appCheck=t})}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise(function(n,r){setTimeout(function(){e.appCheck?e.getToken(t).then(n,r):n(null)},0)})},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(function(e){return e.addTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){D('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),G=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(function(t){return r.auth_=t})}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(E("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):new Promise(function(n,r){setTimeout(function(){e.auth_?e.getToken(t).then(n,r):n(null)},0)})},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)})},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';D(t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),Z=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),z=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,H="websocket",Y="long_polling",W=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=p.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&p.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function $(t,e,n){var r;if((0,o.hu)("string"==typeof e,"typeof type must == string"),(0,o.hu)("object"==typeof n,"typeof params must == object"),e===H)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==Y)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return L(n,function(t,e){i.push(t+"="+e)}),r+i.join("&")}var Q=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),(0,o.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return(0,o.p$)(this.counters_)},t}(),K={},J={};function X(t){var e=t.toString();return K[e]||(K[e]=new Q),K[e]}var tt=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&B(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),et="start",nt="close",rt=function(){function t(t,e,n,r,i,o,s){var a=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=S(t),this.stats_=X(e),this.urlFn=function(t){return a.appCheckToken&&(t.ac=a.appCheckToken),$(e,Y,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new tt(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if((0,o.Yr)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new it(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=(0,s.CR)(t,5),i=r[0],o=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===et)n.id=o,n.password=a;else{if(i!==nt)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=(0,s.CR)(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&z.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!((0,o.Yr)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=(0,o.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=(0,o.h$)(e),r=R(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!(0,o.Yr)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=(0,o.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),it=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,o.Yr)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=y(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){E("frame writing exception"),u.stack&&E(u.stack),E(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||E("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;(0,o.Yr)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){E("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),ot=null;"undefined"!=typeof MozWebSocket?ot=MozWebSocket:"undefined"!=typeof WebSocket&&(ot=WebSocket);var st=function(){function t(e,n,r,i,o,s,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=S(this.connId),this.stats_=X(n),this.connURL=t.connectionURL_(n,s,a,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var i={v:"5"};return!(0,o.Yr)()&&"undefined"!=typeof location&&location.hostname&&z.test(location.hostname)&&(i.r="f"),e&&(i.s=e),n&&(i.ls=n),r&&(i.ac=r),$(t,H,i)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,p.set("previous_websocket_failure",!0);try{if((0,o.Yr)()){var r={headers:{"User-Agent":"Firebase/5/"+u+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(r.headers.Authorization=this.authToken),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new ot(this.connURL,[],r)}else this.mySock=new ot(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(c){this.log_("Error instantiating WebSocket.");var a=c.message||c.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==ot&&!t.forceDisallow_},t.previouslyFailed=function(){return p.isInMemoryStorage||!0===p.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){p.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=(0,o.cI)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if((0,o.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=(0,o.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=R(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),at=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[rt,st]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=st&&st.isAvailable(),o=i&&!st.previouslyFailed();if(e.webSocketOnly&&(i||D("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[st];else{var a=this.transports_=[];try{for(var u=(0,s.XA)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),ut=function(){function t(t,e,n,r,i,o,s,a,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=S("c:"+this.id+":"),this.transportManager_=new at(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=j(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=P("t",t),n=P("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=P("t",t),n=P("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=P("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?T("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):T("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&D("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),j(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):j(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(p.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),ct=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),lt=function(){function t(t){this.allowedEvents_=t,this.listeners_={},(0,o.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=(0,s.ev)([],(0,s.CR)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){(0,o.hu)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),ht=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,o.uI)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return(0,s.ZT)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,o.hu)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(lt),dt=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function ft(){return new dt("")}function pt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function gt(t){return t.pieces_.length-t.pieceNum_}function mt(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new dt(t.pieces_,e)}function yt(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function vt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function _t(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new dt(e,0)}function bt(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof dt)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new dt(n,0)}function wt(t){return t.pieceNum_>=t.pieces_.length}function Ct(t,e){var n=pt(t),r=pt(e);if(null===n)return e;if(n===r)return Ct(mt(t),mt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Et(t,e){for(var n=vt(t,0),r=vt(e,0),i=0;i<n.length&&i<r.length;i++){var o=O(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function St(t,e){if(gt(t)!==gt(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Tt(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(gt(t)>gt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var At=function(){return function(t,e){this.errorPrefix_=e,this.parts_=vt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=(0,o.ug)(this.parts_[n]);Dt(this)}}();function Dt(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+It(t))}function It(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var xt,kt,Ot=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return(0,s.ZT)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,o.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(lt),Ft=1e3,Pt=function(t){function e(n,r,i,s,a,u,c,l){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=i,h.onConnectStatus_=s,h.onServerInfoUpdate_=a,h.authTokenProvider_=u,h.appCheckTokenProvider_=c,h.authOverride_=l,h.id=e.nextPersistentConnectionId_++,h.log_=S("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=Ft,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!(0,o.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Ot.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&ht.getInstance().on("online",h.onOnline_,h),h}return(0,s.ZT)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_((0,o.Pz)(i)),(0,o.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new o.BH,r={p:t._path.toString(),q:t._queryObject},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var i=t._queryIdentifier,s=t._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),(0,o.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,o.hu)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&(0,o.r3)(t,"w")){var n=(0,o.DV)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',i=e._path.toString();D("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||(0,o.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=(0,o.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)})},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,o.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+(0,o.Pz)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):T("Unrecognized action received from server: "+(0,o.Pz)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;(0,o.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ft,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Ft,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ft),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return(0,s.mG)(this,void 0,void 0,function(){var t,n,r,i,a,u,c,l,h,d,f,p,g,m=this;return(0,s.Jh)(this,function(y){switch(y.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,a=this.lastSessionId,u=!1,c=null,this.realtime_={close:l=function(){c?c.close():(u=!0,r())},sendRequest:function(t){(0,o.hu)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,y.label=1;case 1:return y.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)])];case 2:return d=s.CR.apply(void 0,[y.sent(),2]),f=d[0],p=d[1],u?E("getToken() completed but was canceled"):(E("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=p&&p.token,c=new ut(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,function(t){D(t+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")},a)),[3,4];case 3:return g=y.sent(),this.log_("Failed to get token: "+g),u||(this.repoInfo_.nodeAdmin&&D(g),l()),[3,4];case 4:return[2]}})})},e.prototype.interrupt=function(t){E("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){E("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,o.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Ft,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return N(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new dt(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){E("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){E("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=(0,s.XA)(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var u=(n=void 0,(0,s.XA)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";(0,o.Yr)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+u.replace(/\./g,"-")]=1,(0,o.uI)()?t["framework.cordova"]=1:(0,o.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=ht.getInstance().currentlyOnline();return(0,o.xb)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(ct),Nt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Rt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Nt(x,t),r=new Nt(x,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Nt.MIN},t}(),Lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return xt},set:function(t){xt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return O(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw(0,o.g5)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Nt.MIN},e.prototype.maxPost=function(){return new Nt(k,xt)},e.prototype.makePost=function(t,e){return(0,o.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Nt(t,xt)},e.prototype.toString=function(){return".key"},e}(Rt),Mt=new Lt,qt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Ut=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:jt.EMPTY_NODE,this.right=null!=o?o:jt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return jt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return jt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Bt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ut(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),jt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ut.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ut.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new qt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new qt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new qt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new qt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Bt,t}();function Vt(t,e){return O(t.name,e.name)}function Gt(t,e){return O(t,e)}var Zt,zt,Ht,Yt,Wt,$t=function(t){return"number"==typeof t?"number:"+M(t):"string:"+t},Qt=function(t){if(t.isLeafNode()){var e=t.val();(0,o.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,o.r3)(e,".sv"),"Priority must be a string or number.")}else(0,o.hu)(t===kt||t.isEmpty(),"priority of unexpected type.");(0,o.hu)(t===kt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Kt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,(0,o.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Qt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Zt},set:function(t){Zt=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return wt(e)?this:".priority"===pt(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=pt(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,o.hu)(".priority"!==r||1===gt(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(mt(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+$t(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?M(this.value_):this.value_,this.lazyHash_=v(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:((0,o.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return(0,o.hu)(i>=0,"Unknown leaf type: "+n),(0,o.hu)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Jt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?O(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Nt.MIN},e.prototype.maxPost=function(){return new Nt(k,new Kt("[PRIORITY-POST]",Ht))},e.prototype.makePost=function(t,e){var n=zt(t);return new Nt(e,new Kt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Rt)),Xt=Math.log(2),te=function(){function t(t){this.count=parseInt(Math.log(t+1)/Xt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),ee=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Ut(s,o.node,Ut.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Ut(s,o.node,Ut.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Ut(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Ut.BLACK):(a(h,Ut.BLACK),a(h,Ut.RED))}return o}(new te(t.length));return new jt(r||e,o)},ne={},re=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return(0,o.hu)(ne&&Jt,"ChildrenNode.ts has not been loaded"),Yt=Yt||new t({".priority":ne},{".priority":Jt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=(0,o.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof jt?e:null},t.prototype.hasIndex=function(t){return(0,o.r3)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){(0,o.hu)(e!==Mt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,u=n.getIterator(Nt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),i.push(c),c=u.getNext();r=a?ee(i,e.getCompare()):ne;var l=e.toString(),h=(0,s.pi)({},this.indexSet_);h[l]=e;var d=(0,s.pi)({},this.indexes_);return d[l]=r,new t(d,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t((0,o.UI)(this.indexes_,function(t,i){var s=(0,o.DV)(r.indexSet_,i);if((0,o.hu)(s,"Missing index implementation for "+i),t===ne){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Nt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),ee(a,s.getCompare())}return ne}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Nt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t((0,o.UI)(this.indexes_,function(t){if(t===ne)return t;var r=n.get(e.name);return r?t.remove(new Nt(e.name,r)):t}),this.indexSet_)},t}(),ie=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Qt(this.priorityNode_),this.children_.isEmpty()&&(0,o.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Wt||(Wt=new t(new jt(Gt),null,re.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Wt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Wt:e},t.prototype.getChild=function(t){var e=pt(t);return null===e?this:this.getImmediateChild(e).getChild(mt(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if((0,o.hu)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Nt(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?Wt:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=pt(t);if(null===n)return e;(0,o.hu)(".priority"!==pt(t)||1===gt(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(mt(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Jt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+$t(this.getPriority().val())+":"),this.forEachChild(Jt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":v(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Nt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Nt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Nt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Nt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Nt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===oe?-1:0},t.prototype.withIndex=function(e){if(e===Mt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Mt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Jt),r=e.getIterator(Jt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Mt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),oe=new(function(t){function e(){return t.call(this,new jt(Gt),ie.EMPTY_NODE,re.Default)||this}return(0,s.ZT)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return ie.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(ie));function se(t,e){if(void 0===e&&(e=null),null===t)return ie.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),(0,o.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Kt(t,se(e));if(t instanceof Array){var n=ie.EMPTY_NODE;return L(t,function(e,r){if((0,o.r3)(t,e)&&"."!==e.substring(0,1)){var i=se(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(se(e))}var r=[],i=!1;if(L(t,function(t,e){if("."!==t.substring(0,1)){var n=se(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Nt(t,n)))}}),0===r.length)return ie.EMPTY_NODE;var s=ee(r,Vt,function(t){return t.name},Gt);if(i){var a=ee(r,Jt.getCompare());return new ie(s,se(e),new re({".priority":a},{".priority":Jt}))}return new ie(s,se(e),re.Default)}Object.defineProperties(Nt,{MIN:{value:new Nt(x,ie.EMPTY_NODE)},MAX:{value:new Nt(k,oe)}}),Lt.__EMPTY_NODE=ie.EMPTY_NODE,Kt.__childrenNodeConstructor=ie,kt=oe,Ht=oe,zt=se;var ae,ue,ce=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,(0,o.hu)(!wt(e)&&".priority"!==pt(e),"Can't create PathIndex with empty path or .priority key"),n}return(0,s.ZT)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?O(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=se(t),r=ie.EMPTY_NODE.updateChild(this.indexPath_,n);return new Nt(e,r)},e.prototype.maxPost=function(){var t=ie.EMPTY_NODE.updateChild(this.indexPath_,oe);return new Nt(k,t)},e.prototype.toString=function(){return vt(this.indexPath_,0).join("/")},e}(Rt),le=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?O(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Nt.MIN},e.prototype.maxPost=function(){return Nt.MAX},e.prototype.makePost=function(t,e){var n=se(t);return new Nt(e,n)},e.prototype.toString=function(){return".value"},e}(Rt)),he="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",de=(ae=0,ue=[],function(t){var e,n=t===ae;ae=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=he.charAt(t%64),t=Math.floor(t/64);(0,o.hu)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===ue[e];e--)ue[e]=0;ue[e]++}else for(e=0;e<12;e++)ue[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=he.charAt(ue[e]);return(0,o.hu)(20===i.length,"nextPushId: Length should be 20."),i}),fe=function(t){if("2147483647"===t)return"-";var e=U(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return k;var o=he.charAt(he.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},pe=function(t){if("-2147483648"===t)return x;var e=U(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=he.charAt(he.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function ge(t){return{type:"value",snapshotNode:t}}function me(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ye(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ve(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var _e=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){(0,o.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(ye(e,a)):(0,o.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(me(e,n)):s.trackChildChange(ve(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Jt,function(t,r){e.hasChild(t)||n.trackChildChange(ye(t,r))}),e.isLeafNode()||e.forEachChild(Jt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(ve(e,r,i))}else n.trackChildChange(me(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?ie.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),be=function(){function t(e){this.indexedFilter_=new _e(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Nt(e,n))||(n=ie.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ie.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(ie.EMPTY_NODE);var i=this;return e.forEachChild(Jt,function(t,e){i.matches(new Nt(t,e))||(r=r.updateImmediateChild(t,ie.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),we=function(){function t(t){this.rangedFilter_=new be(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Nt(e,n))||(n=ie.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=ie.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=ie.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(ie.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,ie.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;(0,o.hu)(u.numChildren()===this.limit_,"");var c=new Nt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var d=u.getImmediateChild(e),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===e||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(ve(e,n,d)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(ye(e,d));var g=u.updateImmediateChild(e,ie.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(me(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(ye(l.name,l.node)),i.trackChildChange(me(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,ie.EMPTY_NODE)):t},t}(),Ce=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Jt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return(0,o.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return(0,o.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:x},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return(0,o.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return(0,o.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:k},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return(0,o.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Jt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function Ee(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Se(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Te(t,e){var n=t.copy();return n.index_=e,n}function Ae(t){var e,n={};return t.isDefault()||(t.index_===Jt?e="$priority":t.index_===le?e="$value":t.index_===Mt?e="$key":((0,o.hu)(t.index_ instanceof ce,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=(0,o.Pz)(e),t.startSet_&&(n.startAt=(0,o.Pz)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+(0,o.Pz)(t.indexStartName_))),t.endSet_&&(n.endAt=(0,o.Pz)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+(0,o.Pz)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function De(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Jt&&(e.i=t.index_.toString()),e}var Ie=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=S("p:rest:"),o.listens_={},o}return(0,s.ZT)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:((0,o.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=Ae(t._queryParams);this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),(0,o.DV)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Ae(t._queryParams),r=t._path.toString(),i=new o.BH;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(i){var a=(0,s.CR)(i,2),u=a[0],c=a[1];u&&u.accessToken&&(e.auth=u.accessToken),c&&c.token&&(e.ac=c.token);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+(0,o.xO)(e);r.log_("Sending REST request for "+l);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);var t=null;if(h.status>=200&&h.status<300){try{t=(0,o.cI)(h.responseText)}catch(e){D("Failed to parse JSON response for "+l+": "+h.responseText)}n(null,t)}else 401!==h.status&&404!==h.status&&D("Got unsuccessful REST response for "+l+" Status: "+h.status),n(h.status);n=null}},h.open("GET",l,!0),h.send()})},e}(ct),xe=function(){function t(){this.rootNode_=ie.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function ke(){return{value:null,children:new Map}}function Oe(t,e,n){if(wt(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=pt(e);t.children.has(r)||t.children.set(r,ke()),Oe(t.children.get(r),e=mt(e),n)}}function Fe(t,e){if(wt(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Jt,function(e,n){Oe(t,new dt(e),n)}),Fe(t,e)}if(t.children.size>0){var r=pt(e);return e=mt(e),t.children.has(r)&&Fe(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function Pe(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(function(t,n){e(n,t)})}(t,function(t,r){Pe(r,new dt(e.toString()+"/"+t),n)})}var Ne=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=(0,s.pi)({},t);return this.last_&&L(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Re=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Ne(t);var n=1e4+2e4*Math.random();j(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;L(e,function(e,i){i>0&&(0,o.r3)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),j(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Le=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function Me(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var qe,Ue=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Le.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(wt(this.path)){if(null!=this.affectedTree.value)return(0,o.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new dt(e));return new t(ft(),n,this.revert)}return(0,o.hu)(pt(this.path)===e,"operationForChild called for unrelated child."),new t(mt(this.path),this.affectedTree,this.revert)},t}(),Be=function(){function t(t,e){this.source=t,this.path=e,this.type=Le.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return wt(this.path)?new t(this.source,ft()):new t(this.source,mt(this.path))},t}(),je=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Le.OVERWRITE}return t.prototype.operationForChild=function(e){return wt(this.path)?new t(this.source,ft(),this.snap.getImmediateChild(e)):new t(this.source,mt(this.path),this.snap)},t}(),Ve=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Le.MERGE}return t.prototype.operationForChild=function(e){if(wt(this.path)){var n=this.children.subtree(new dt(e));return n.isEmpty()?null:n.value?new je(this.source,ft(),n.value):new t(this.source,ft(),n)}return(0,o.hu)(pt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,mt(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Ge=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(wt(t))return this.isFullyInitialized()&&!this.filtered_;var e=pt(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Ze=function(){return function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}();function ze(t,e,n,r,i,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw(0,o.g5)("Should only compare child_ events.");var r=new Nt(e.childName,e.snapshotNode),i=new Nt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);i.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}function He(t,e){return{eventCache:t,serverCache:e}}function Ye(t,e,n,r){return He(new Ge(e,n,r),t.serverCache)}function We(t,e,n,r){return He(t.eventCache,new Ge(e,n,r))}function $e(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Qe(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Ke=function(){function t(t,e){void 0===e&&(qe||(qe=new jt(F)),e=qe),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return L(e,function(t,e){n=n.set(new dt(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:ft(),value:this.value};if(wt(t))return null;var n=pt(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(mt(t),e);return null!=i?{path:bt(new dt(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(wt(e))return this;var n=pt(e),r=this.children.get(n);return null!==r?r.subtree(mt(e)):new t(null)},t.prototype.set=function(e,n){if(wt(e))return new t(n,this.children);var r=pt(e),i=(this.children.get(r)||new t(null)).set(mt(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(wt(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=pt(e),r=this.children.get(n);if(r){var i=r.remove(mt(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(wt(t))return this.value;var e=pt(t),n=this.children.get(e);return n?n.get(mt(t)):null},t.prototype.setTree=function(e,n){if(wt(e))return n;var r,i=pt(e),o=(this.children.get(i)||new t(null)).setTree(mt(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(ft(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(bt(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,ft(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(wt(t))return null;var i=pt(t),o=this.children.get(i);return o?o.findOnPath_(mt(t),bt(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,ft(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(wt(e))return this;this.value&&r(n,this.value);var i=pt(e),o=this.children.get(i);return o?o.foreachOnPath_(mt(e),bt(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(ft(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(bt(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),Je=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Ke(null))},t}();function Xe(t,e,n){if(wt(e))return new Je(new Ke(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=Ct(i,e);return o=o.updateChild(s,n),new Je(t.writeTree_.set(i,o))}var a=new Ke(n),u=t.writeTree_.setTree(e,a);return new Je(u)}function tn(t,e,n){var r=t;return L(n,function(t,n){r=Xe(r,bt(e,t),n)}),r}function en(t,e){if(wt(e))return Je.empty();var n=t.writeTree_.setTree(e,new Ke(null));return new Je(n)}function nn(t,e){return null!=rn(t,e)}function rn(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Ct(n.path,e)):null}function on(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Jt,function(t,n){e.push(new Nt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new Nt(t,n.value))}),e}function sn(t,e){if(wt(e))return t;var n=rn(t,e);return new Je(null!=n?new Ke(n):t.writeTree_.subtree(e))}function an(t){return t.writeTree_.isEmpty()}function un(t,e){return cn(ft(),t.writeTree_,e)}function cn(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?((0,o.hu)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=cn(bt(t,e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(bt(t,".priority"),r)),n}function ln(t,e){return wn(e,t)}function hn(t,e){if(t.snap)return Tt(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Tt(bt(t.path,n),e))return!0;return!1}function dn(t){return t.visible}function fn(t,e,n){for(var r=Je.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)Tt(n,a)?r=Xe(r,u=Ct(n,a),s.snap):Tt(a,n)&&(u=Ct(a,n),r=Xe(r,ft(),s.snap.getChild(u)));else{if(!s.children)throw(0,o.g5)("WriteRecord should have .snap or .children");if(Tt(n,a))r=tn(r,u=Ct(n,a),s.children);else if(Tt(a,n))if(wt(u=Ct(a,n)))r=tn(r,ft(),s.children);else{var c=(0,o.DV)(s.children,pt(u));if(c){var l=c.getChild(mt(u));r=Xe(r,ft(),l)}}}}}return r}function pn(t,e,n,r,i){if(r||i){var o=sn(t.visibleWrites,e);return!i&&an(o)?n:i||null!=n||nn(o,ft())?un(fn(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Tt(t.path,e)||Tt(e,t.path))},e),n||ie.EMPTY_NODE):null}var s=rn(t.visibleWrites,e);if(null!=s)return s;var a=sn(t.visibleWrites,e);return an(a)?n:null!=n||nn(a,ft())?un(a,n||ie.EMPTY_NODE):null}function gn(t,e,n,r){return pn(t.writeTree,t.treePath,e,n,r)}function mn(t,e){return function(t,e,n){var r=ie.EMPTY_NODE,i=rn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Jt,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=sn(t.visibleWrites,e);return n.forEachChild(Jt,function(t,e){var n=un(sn(o,new dt(t)),e);r=r.updateImmediateChild(t,n)}),on(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return on(sn(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function yn(t,e,n,r){return function(t,e,n,r,i){(0,o.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");var s=bt(e,n);if(nn(t.visibleWrites,s))return null;var a=sn(t.visibleWrites,s);return an(a)?i.getChild(n):un(a,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function vn(t,e){return function(t,e){return rn(t.visibleWrites,e)}(t.writeTree,bt(t.treePath,e))}function _n(t,e,n){return function(t,e,n,r){var i=bt(e,n),o=rn(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?un(sn(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function bn(t,e){return wn(bt(t.treePath,e),t.writeTree)}function wn(t,e){return{treePath:t,writeTree:e}}var Cn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;(0,o.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,o.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,ve(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,ye(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,me(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw(0,o.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,ve(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),En=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Sn=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Ge(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _n(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Qe(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=sn(t.visibleWrites,e),c=rn(u,ft());if(null!=c)a=c;else{if(null==n)return[];a=un(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),d=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),f=d.getNext();f&&l.length<1;)0!==h(f,r)&&l.push(f),f=d.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function Tn(t,e,n,r,i,s){var a=e.eventCache;if(null!=vn(r,n))return e;var u=void 0,c=void 0;if(wt(n))if((0,o.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=Qe(e),h=mn(r,l instanceof ie?l:ie.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{var d=gn(r,Qe(e));u=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{var f=pt(n);if(".priority"===f){(0,o.hu)(1===gt(n),"Can't have a priority with additional path components");var p=a.getNode(),g=yn(r,n,p,c=e.serverCache.getNode());u=null!=g?t.filter.updatePriority(p,g):a.getNode()}else{var m=mt(n),y=void 0;if(a.isCompleteForChild(f)){c=e.serverCache.getNode();var v=yn(r,n,a.getNode(),c);y=null!=v?a.getNode().getImmediateChild(f).updateChild(m,v):a.getNode().getImmediateChild(f)}else y=_n(r,f,e.serverCache);u=null!=y?t.filter.updateChild(a.getNode(),f,y,m,i,s):a.getNode()}}return Ye(e,u,a.isFullyInitialized()||wt(n),t.filter.filtersNodes())}function An(t,e,n,r,i,o,s,a){var u,c=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if(wt(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var d=pt(n);if(!c.isCompleteForPath(n)&&gt(n)>1)return e;var f=mt(n),p=c.getNode().getImmediateChild(d).updateChild(f,r);u=".priority"===d?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),d,p,f,En,null)}var g=We(e,u,c.isFullyInitialized()||wt(n),l.filtersNodes());return Tn(t,g,n,i,new Sn(i,g,o),a)}function Dn(t,e,n,r,i,o,s){var a,u,c=e.eventCache,l=new Sn(i,e,o);if(wt(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=Ye(e,u,!0,t.filter.filtersNodes());else{var h=pt(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=Ye(e,u,c.isFullyInitialized(),c.isFiltered());else{var d=mt(n),f=c.getNode().getImmediateChild(h),p=void 0;if(wt(d))p=r;else{var g=l.getCompleteChild(h);p=null!=g?".priority"===yt(d)&&g.getChild(_t(d)).isEmpty()?g:g.updateChild(d,r):ie.EMPTY_NODE}a=f.equals(p)?e:Ye(e,t.filter.updateChild(c.getNode(),h,p,d,l,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function In(t,e){return t.eventCache.isCompleteForChild(e)}function xn(t,e,n){return n.foreach(function(t,n){e=e.updateChild(t,n)}),e}function kn(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=wt(n)?r:new Ke(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var u=xn(0,e.serverCache.getNode().getImmediateChild(n),r);c=An(t,c,new dt(n),u,i,o,s,a)}}),u.children.inorderTraversal(function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=xn(0,e.serverCache.getNode().getImmediateChild(n),r);c=An(t,c,new dt(n),h,i,o,s,a)}}),c}var On,Fn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new _e(r.getIndex()),o=(n=r).loadsAllData()?new _e(n.getIndex()):n.hasLimit()?new we(n):new be(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(ie.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(ie.EMPTY_NODE,a.getNode(),null),l=new Ge(u,s.isFullyInitialized(),i.filtersNodes()),h=new Ge(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=He(h,l),this.eventGenerator_=new Ze(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Pn(t,e){var n=Qe(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!wt(e)&&!n.getImmediateChild(pt(e)).isEmpty())?n.getChild(e):null}function Nn(t){return 0===t.eventRegistrations_.length}function Rn(t,e,n){var r=[];if(n){(0,o.hu)(null==e,"A cancel should cancel all event registrations.");var i=t.query._path;t.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)})}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var u=t.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(u)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Ln(t,e,n,r){e.type===Le.MERGE&&null!==e.source.queryId&&((0,o.hu)(Qe(t.viewCache_),"We should always have a full cache before handling merges"),(0,o.hu)($e(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,s,a=t.viewCache_,u=function(t,e,n,r,i){var s,a,u=new Cn;if(n.type===Le.OVERWRITE){var c=n;c.source.fromUser?s=Dn(t,e,c.path,c.snap,r,i,u):((0,o.hu)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!wt(c.path),s=An(t,e,c.path,c.snap,r,i,a,u))}else if(n.type===Le.MERGE){var l=n;l.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach(function(r,u){var c=bt(n,r);In(e,pt(c))&&(a=Dn(t,a,c,u,i,o,s))}),r.foreach(function(r,u){var c=bt(n,r);In(e,pt(c))||(a=Dn(t,a,c,u,i,o,s))}),a}(t,e,l.path,l.children,r,i,u):((0,o.hu)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=kn(t,e,l.path,l.children,r,i,a,u))}else if(n.type===Le.ACK_USER_WRITE){var h=n;s=h.revert?function(t,e,n,r,i,s){var a;if(null!=vn(r,n))return e;var u=new Sn(r,e,i),c=e.eventCache.getNode(),l=void 0;if(wt(n)||".priority"===pt(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=gn(r,Qe(e));else{var d=e.serverCache.getNode();(0,o.hu)(d instanceof ie,"serverChildren would be complete if leaf node"),h=mn(r,d)}l=t.filter.updateFullNode(c,h=h,s)}else{var f=pt(n),p=_n(r,f,e.serverCache);null==p&&e.serverCache.isCompleteForChild(f)&&(p=c.getImmediateChild(f)),(l=null!=p?t.filter.updateChild(c,f,p,mt(n),u,s):e.eventCache.getNode().hasChild(f)?t.filter.updateChild(c,f,ie.EMPTY_NODE,mt(n),u,s):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=gn(r,Qe(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,a,s))}return a=e.serverCache.isFullyInitialized()||null!=vn(r,ft()),Ye(e,l,a,t.filter.filtersNodes())}(t,e,h.path,r,i,u):function(t,e,n,r,i,o,s){if(null!=vn(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(wt(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return An(t,e,n,u.getNode().getChild(n),i,o,a,s);if(wt(n)){var c=new Ke(null);return u.getNode().forEachChild(Mt,function(t,e){c=c.set(new dt(t),e)}),kn(t,e,n,c,i,o,a,s)}return e}var l=new Ke(null);return r.foreach(function(t,e){var r=bt(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))}),kn(t,e,n,l,i,o,a,s)}(t,e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==Le.LISTEN_COMPLETE)throw(0,o.g5)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache;return Tn(t,We(e,o.getNode(),o.isFullyInitialized()||wt(n),o.isFiltered()),n,r,En,i)}(t,e,n.path,r,u)}var d=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=$e(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(ge($e(e)))}}(e,s,d),{viewCache:s,changes:d}}(t.processor_,a,e,n,r);return i=t.processor_,(0,o.hu)((s=u.viewCache).eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,o.hu)(s.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),(0,o.hu)(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,Mn(t,u.changes,u.viewCache.eventCache.getNode(),null)}function Mn(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),ze(t,i,"child_removed",e,r,n),ze(t,i,"child_added",e,r,n),ze(t,i,"child_moved",o,r,n),ze(t,i,"child_changed",e,r,n),ze(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var qn,Un=function(){return function(){this.views=new Map}}();function Bn(t,e,n,r){var i,a,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return(0,o.hu)(null!=c,"SyncTree gave us an op for an invalid query."),Ln(c,e,n,r)}var l=[];try{for(var h=(0,s.XA)(t.views.values()),d=h.next();!d.done;d=h.next())l=l.concat(Ln(c=d.value,e,n,r))}catch(f){i={error:f}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}return l}function jn(t,e,n,r,i){var o=t.views.get(e._queryIdentifier);if(!o){var s=gn(n,i?r:null),a=!1;s?a=!0:r instanceof ie?(s=mn(n,r),a=!1):(s=ie.EMPTY_NODE,a=!1);var u=He(new Ge(s,a,!1),new Ge(r,i,!1));return new Fn(e,u)}return o}function Vn(t){var e,n,r=[];try{for(var i=(0,s.XA)(t.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Gn(t,e){var n,r,i=null;try{for(var o=(0,s.XA)(t.views.values()),a=o.next();!a.done;a=o.next())i=i||Pn(a.value,e)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function Zn(t,e){return e._queryParams.loadsAllData()?Yn(t):t.views.get(e._queryIdentifier)}function zn(t,e){return null!=Zn(t,e)}function Hn(t){return null!=Yn(t)}function Yn(t){var e,n;try{for(var r=(0,s.XA)(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Wn=1,$n=function(){return function(t){this.listenProvider_=t,this.syncPointTree_=new Ke(null),this.pendingWriteTree_={visibleWrites:Je.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function Qn(t,e,n,r,i){return function(t,e,n,r,i){(0,o.hu)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Xe(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?nr(t,new je({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Kn(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex(function(t){return t.writeId===e});(0,o.hu)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,s=!1,a=t.allWrites.length-1;i&&a>=0;){var u=t.allWrites[a];u.visible&&(a>=n&&hn(u,r.path)?i=!1:Tt(r.path,u.path)&&(s=!0)),a--}return!!i&&(s?(function(t){t.visibleWrites=fn(t.allWrites,dn,ft()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=en(t.visibleWrites,r.path):L(r.children,function(e){t.visibleWrites=en(t.visibleWrites,bt(r.path,e))}),!0))}(t.pendingWriteTree_,e)){var i=new Ke(null);return null!=r.snap?i=i.set(ft(),!0):L(r.children,function(t){i=i.set(new dt(t),!0)}),nr(t,new Ue(r.path,i,n))}return[]}function Jn(t,e,n){return nr(t,new je({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Xn(t,e,n,r){var i=e._path,a=t.syncPointTree_.get(i),u=[];if(a&&("default"===e._queryIdentifier||zn(a,e))){var c=function(t,e,n,r){var i,a,u=e._queryIdentifier,c=[],l=[],h=Hn(t);if("default"===u)try{for(var d=(0,s.XA)(t.views.entries()),f=d.next();!f.done;f=d.next()){var p,g=(0,s.CR)(f.value,2),m=g[0];l=l.concat(Rn(p=g[1],n,r)),Nn(p)&&(t.views.delete(m),p.query._queryParams.loadsAllData()||c.push(p.query))}}catch(y){i={error:y}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}else(p=t.views.get(u))&&(l=l.concat(Rn(p,n,r)),Nn(p)&&(t.views.delete(u),p.query._queryParams.loadsAllData()||c.push(p.query)));return h&&!Hn(t)&&c.push(new((0,o.hu)(On,"Reference.ts has not been loaded"),On)(e._repo,e._path)),{removed:c,events:l}}(a,e,n,r);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i));var l=c.removed;u=c.events;var h=-1!==l.findIndex(function(t){return t._queryParams.loadsAllData()}),d=t.syncPointTree_.findOnPath(i,function(t,e){return Hn(e)});if(h&&!d){var f=t.syncPointTree_.subtree(i);if(!f.isEmpty())for(var p=function(t){return t.fold(function(t,e,n){if(e&&Hn(e))return[Yn(e)];var r=[];return e&&(r=Vn(e)),L(n,function(t,e){r=r.concat(e)}),r})}(f),g=0;g<p.length;++g){var m=p[g],y=m.query,v=or(t,m);t.listenProvider_.startListening(hr(y),sr(t,y),v.hashFn,v.onComplete)}}!d&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(hr(e),null):l.forEach(function(e){var n=t.queryToTagMap.get(ar(e));t.listenProvider_.stopListening(hr(e),n)})),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=ar(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function tr(t,e,n){var r=e._path,i=null,s=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){var n=Ct(t,r);i=i||Gn(e,n),s=s||Hn(e)});var a,u=t.syncPointTree_.get(r);u?(s=s||Hn(u),i=i||Gn(u,ft())):(u=new Un,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=ie.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=Gn(e,ft());n&&(i=i.updateImmediateChild(t,n))}));var c=zn(u,e);if(!c&&!e._queryParams.loadsAllData()){var l=ar(e);(0,o.hu)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Wn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var d=function(t,e,n,r,i,o){var s=jn(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Jt,function(t,e){r.push(me(t,e))}),n.isFullyInitialized()&&r.push(ge(n.getNode())),Mn(t,r,n.getNode(),e)}(s,n)}(u,e,n,ln(t.pendingWriteTree_,r),i,a);if(!c&&!s){var f=Zn(u,e);d=d.concat(function(t,e,n){var r=e._path,i=sr(t,e),s=or(t,n),a=t.listenProvider_.startListening(hr(e),i,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(i)(0,o.hu)(!Hn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!wt(t)&&e&&Hn(e))return[Yn(e).query];var r=[];return e&&(r=r.concat(Vn(e).map(function(t){return t.query}))),L(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(hr(h),sr(t,h))}return a}(t,e,f))}return d}function er(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,function(t,n){var r=Gn(n,Ct(t,e));if(r)return r});return pn(r,e,i,n,!0)}function nr(t,e){return rr(e,t.syncPointTree_,null,ln(t.pendingWriteTree_,ft()))}function rr(t,e,n,r){if(wt(t.path))return ir(t,e,n,r);var i=e.get(ft());null==n&&null!=i&&(n=Gn(i,ft()));var o=[],s=pt(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=bn(r,s);o=o.concat(rr(a,u,c,l))}return i&&(o=o.concat(Bn(i,t,r,n))),o}function ir(t,e,n,r){var i=e.get(ft());null==n&&null!=i&&(n=Gn(i,ft()));var o=[];return e.children.inorderTraversal(function(e,i){var s=n?n.getImmediateChild(e):null,a=bn(r,e),u=t.operationForChild(e);u&&(o=o.concat(ir(u,i,s,a)))}),i&&(o=o.concat(Bn(i,t,r,n))),o}function or(t,e){var n=e.query,r=sr(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||ie.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=ur(t,n);if(r){var i=cr(r),o=i.path,s=i.queryId,a=Ct(o,e);return lr(t,o,new Be(Me(s),a))}return[]}(t,n._path,r):function(t,e){return nr(t,new Be({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Xn(t,n,null,i)}}}function sr(t,e){var n=ar(e);return t.queryToTagMap.get(n)}function ar(t){return t._path.toString()+"$"+t._queryIdentifier}function ur(t,e){return t.tagToQueryMap.get(e)}function cr(t){var e=t.indexOf("$");return(0,o.hu)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new dt(t.substr(0,e))}}function lr(t,e,n){var r=t.syncPointTree_.get(e);return(0,o.hu)(r,"Missing sync point for query tag that we're tracking"),Bn(r,n,ln(t.pendingWriteTree_,e),null)}function hr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new((0,o.hu)(qn,"Reference.ts has not been loaded"),qn)(t._repo,t._path):t}var dr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),fr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=bt(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return er(this.syncTree_,this.path_)},t}(),pr=function(t,e,n){return t&&"object"==typeof t?((0,o.hu)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?gr(t[".sv"],e,n):"object"==typeof t[".sv"]?mr(t[".sv"],e):void(0,o.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},gr=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:(0,o.hu)(!1,"Unexpected server value: "+t)}},mr=function(t,e,n){t.hasOwnProperty("increment")||(0,o.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&(0,o.hu)(!1,"Unexpected increment value: "+r);var i=e.node();if((0,o.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},yr=function(t,e,n,r){return _r(e,new fr(n,t),r)},vr=function(t,e,n){return _r(t,new dr(e),n)};function _r(t,e,n){var r,i=t.getPriority().val(),o=pr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=pr(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Kt(a,se(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Kt(o))),u.forEachChild(Jt,function(t,i){var o=_r(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var br=function(){return function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}}();function wr(t,e){for(var n=e instanceof dt?e:new dt(e),r=t,i=pt(n);null!==i;){var s=(0,o.DV)(r.node.children,i)||{children:{},childCount:0};r=new br(i,r,s),i=pt(n=mt(n))}return r}function Cr(t){return t.node.value}function Er(t,e){t.node.value=e,Ir(t)}function Sr(t){return t.node.childCount>0}function Tr(t,e){L(t.node.children,function(n,r){e(new br(n,t,r))})}function Ar(t,e,n,r){n&&!r&&e(t),Tr(t,function(t){Ar(t,e,!0,r)}),n&&r&&e(t)}function Dr(t){return new dt(null===t.parent?t.name:Dr(t.parent)+"/"+t.name)}function Ir(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===Cr(t)&&!Sr(t)}(n),i=(0,o.r3)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Ir(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,Ir(t))}(t.parent,t.name,t)}var xr=/[\[\].#$\/\u0000-\u001F\u007F]/,kr=/[\[\].#$\u0000-\u001F\u007F]/,Or=10485760,Fr=function(t){return"string"==typeof t&&0!==t.length&&!xr.test(t)},Pr=function(t){return"string"==typeof t&&0!==t.length&&!kr.test(t)},Nr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!I(t)||t&&"object"==typeof t&&(0,o.r3)(t,".sv")},Rr=function(t,e,n,r){r&&void 0===e||Lr((0,o.gK)(t,"value"),e,n)},Lr=function(t,e,n){var r=n instanceof dt?new At(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+It(r));if("function"==typeof e)throw new Error(t+"contains a function "+It(r)+" with contents = "+e.toString());if(I(e))throw new Error(t+"contains "+e.toString()+" "+It(r));if("string"==typeof e&&e.length>Or/3&&(0,o.ug)(e)>Or)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+It(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(L(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!Fr(e)))throw new Error(t+" contains an invalid key ("+e+") "+It(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,u;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=(0,o.ug)(e),Dt(t)}(r,e),Lr(t,n,r),u=(a=r).parts_.pop(),a.byteLength_-=(0,o.ug)(u),a.parts_.length>0&&(a.byteLength_-=1)}),i&&s)throw new Error(t+' contains ".value" child '+It(r)+" in addition to actual children.")}},Mr=function(t,e,n,r){if(!r||void 0!==e){var i=(0,o.gK)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var s=[];L(e,function(t,e){var r=new dt(t);if(Lr(i,e,bt(n,r)),".priority"===yt(r)&&!Nr(e))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=vt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Fr(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Et);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&Tt(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(i,s)}},qr=function(t,e,n){if(!n||void 0!==e){if(I(e))throw new Error((0,o.gK)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Nr(e))throw new Error((0,o.gK)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ur=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,o.gK)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Br=function(t,e,n,r){if(!(r&&void 0===n||Fr(n)))throw new Error((0,o.gK)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},jr=function(t,e,n,r){if(!(r&&void 0===n||Pr(n)))throw new Error((0,o.gK)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Vr=function(t,e){if(".info"===pt(e))throw new Error(t+" failed = Can't modify data under /.info/")},Gr=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Fr(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Pr(t)}(n))throw new Error((0,o.gK)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Zr=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error((0,o.gK)(t,e)+"must be a boolean.")},zr=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function Hr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||St(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Yr(t,e,n){Hr(t,n),$r(t,function(t){return St(t,e)})}function Wr(t,e,n){Hr(t,n),$r(t,function(t){return Tt(t,e)||Tt(e,t)})}function $r(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Qr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Qr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();b&&E("event: "+n.toString()),B(r)}}}var Kr="repo_interrupt",Jr=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new zr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ke(),this.transactionQueueTree_=new br,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Xr(t){var e=t.infoData_.getNode(new dt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function ti(t){return(e=(e={timestamp:Xr(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function ei(t,e,n,r,i){t.dataUpdateCount++;var s=new dt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(i)if(r){var u=(0,o.UI)(n,function(t){return se(t)});a=function(t,e,n,r){var i=ur(t,r);if(i){var o=cr(i),s=o.path,a=o.queryId,u=Ct(s,e),c=Ke.fromObject(n);return lr(t,s,new Ve(Me(a),u,c))}return[]}(t.serverSyncTree_,s,u,i)}else{var c=se(n);a=function(t,e,n,r){var i=ur(t,r);if(null!=i){var o=cr(i),s=o.path,a=o.queryId,u=Ct(s,e);return lr(t,s,new je(Me(a),u,n))}return[]}(t.serverSyncTree_,s,c,i)}else if(r){var l=(0,o.UI)(n,function(t){return se(t)});a=function(t,e,n){var r=Ke.fromObject(n);return nr(t,new Ve({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{var h=se(n);a=Jn(t.serverSyncTree_,s,h)}var d=s;a.length>0&&(d=pi(t,s)),Wr(t.eventQueue_,d,a)}function ni(t,e){ri(t,"connected",e),!1===e&&function(t){li(t,"onDisconnectEvents");var e=ti(t),n=ke();Pe(t.onDisconnect_,ft(),function(r,i){var o=yr(r,i,t.serverSyncTree_,e);Oe(n,r,o)});var r=[];Pe(n,ft(),function(e,n){r=r.concat(Jn(t.serverSyncTree_,e,n));var i=_i(t,e);pi(t,i)}),t.onDisconnect_=ke(),Wr(t.eventQueue_,ft(),r)}(t)}function ri(t,e,n){var r=new dt("/.info/"+e),i=se(n);t.infoData_.updateSnapshot(r,i);var o=Jn(t.infoSyncTree_,r,i);Wr(t.eventQueue_,r,o)}function ii(t){return t.nextWriteId_++}function oi(t,e,n,r,i){li(t,"set",{path:e.toString(),value:n,priority:r});var o=ti(t),s=se(n,r),a=er(t.serverSyncTree_,e),u=vr(s,a,o),c=ii(t),l=Qn(t.serverSyncTree_,e,u,c,!0);Hr(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),function(n,r){var o="ok"===n;o||D("set at "+e+" failed: "+n);var s=Kn(t.serverSyncTree_,c,!o);Wr(t.eventQueue_,e,s),hi(0,i,n,r)});var h=_i(t,e);pi(t,h),Wr(t.eventQueue_,h,[])}function si(t,e,n){t.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&Fe(t.onDisconnect_,e),hi(0,n,r,i)})}function ai(t,e,n,r){var i=se(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),function(n,o){"ok"===n&&Oe(t.onDisconnect_,e,i),hi(0,r,n,o)})}function ui(t,e,n){var r;r=".info"===pt(e._path)?Xn(t.infoSyncTree_,e,n):Xn(t.serverSyncTree_,e,n),Yr(t.eventQueue_,e._path,r)}function ci(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Kr)}function li(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),E.apply(void 0,(0,s.ev)([r],(0,s.CR)(e)))}function hi(t,e,n,r){e&&B(function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}})}function di(t,e,n){return er(t.serverSyncTree_,e,n)||ie.EMPTY_NODE}function fi(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||vi(t,e),Cr(e)){var n=mi(t,e);(0,o.hu)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(t,e,n){for(var r=n.map(function(t){return t.currentWriteId}),i=di(t,e,r),s=i,a=i.hash(),u=0;u<n.length;u++){var c=n[u];(0,o.hu)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=Ct(e,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),d=e;t.server_.put(d.toString(),h,function(r){li(t,"transaction put response",{path:d.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(e){n[e].status=2,i=i.concat(Kn(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push(function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)}),n[e].unwatcher()},a=0;a<n.length;a++)s(a);for(vi(t,wr(t.transactionQueueTree_,e)),fi(t,t.transactionQueueTree_),Wr(t.eventQueue_,e,i),a=0;a<o.length;a++)B(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)n[a].status=3===n[a].status?4:0;else for(D("transaction at "+d.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;pi(t,e)}},a)}(t,Dr(e),n)}else Sr(e)&&Tr(e,function(e){fi(t,e)})}function pi(t,e){var n=gi(t,e),r=Dr(n);return function(t,e,n){if(0!==e.length){for(var r=[],i=[],s=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),a=function(a){var u,c=e[a],l=Ct(n,c.path),h=!1;if((0,o.hu)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,i=i.concat(Kn(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",i=i.concat(Kn(t.serverSyncTree_,c.currentWriteId,!0));else{var d=di(t,c.path,s);c.currentInputSnapshot=d;var f=e[a].update(d.val());if(void 0!==f){Lr("transaction failed: Data returned ",f,c.path);var p=se(f);"object"==typeof f&&null!=f&&(0,o.r3)(f,".priority")||(p=p.updatePriority(d.getPriority()));var g=c.currentWriteId,m=ti(t),y=vr(p,d,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=y,c.currentWriteId=ii(t),s.splice(s.indexOf(g),1),i=(i=i.concat(Qn(t.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally))).concat(Kn(t.serverSyncTree_,g,!0))}else h=!0,u="nodata",i=i.concat(Kn(t.serverSyncTree_,c.currentWriteId,!0))}Wr(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===u?function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)}:function(){return e[a].onComplete(new Error(u),!1,null)}))},u=0;u<e.length;u++)a(u);for(vi(t,t.transactionQueueTree_),u=0;u<r.length;u++)B(r[u]);fi(t,t.transactionQueueTree_)}}(t,mi(t,n),r),r}function gi(t,e){var n,r=t.transactionQueueTree_;for(n=pt(e);null!==n&&void 0===Cr(r);)r=wr(r,n),n=pt(e=mt(e));return r}function mi(t,e){var n=[];return yi(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function yi(t,e,n){var r=Cr(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Tr(e,function(e){yi(t,e,n)})}function vi(t,e){var n=Cr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Er(e,n.length>0?n:void 0)}Tr(e,function(e){vi(t,e)})}function _i(t,e){var n=Dr(gi(t,e)),r=wr(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,function(e){bi(t,e)}),bi(t,r),Ar(r,function(e){bi(t,e)}),n}function bi(t,e){var n=Cr(e);if(n){for(var r=[],i=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?((0,o.hu)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):((0,o.hu)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(Kn(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?Er(e,void 0):n.length=s+1,Wr(t.eventQueue_,Dr(e),i),a=0;a<r.length;a++)B(r[a])}}var wi=function(t,e){var n=Ci(t),r=n.namespace;return"firebase.com"===n.domain&&A(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||A("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&D("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new W(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new dt(n.pathString)}},Ci=function(t){var e="",n="",r="",i="",o="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,d)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=(0,s.XA)(t.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):D("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,d)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:o}},Ei=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,o.Pz)(this.snapshot.exportVal())},t}(),Si=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Ti=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return(0,o.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),Ai=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new o.BH;return si(this._repo,this._path,t.wrapCallback(function(){})),t.promise},t.prototype.remove=function(){Vr("OnDisconnect.remove",this._path);var t=new o.BH;return ai(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},t.prototype.set=function(t){Vr("OnDisconnect.set",this._path),Rr("OnDisconnect.set",t,this._path,!1);var e=new o.BH;return ai(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t.prototype.setWithPriority=function(t,e){Vr("OnDisconnect.setWithPriority",this._path),Rr("OnDisconnect.setWithPriority",t,this._path,!1),qr("OnDisconnect.setWithPriority",e,!1);var n=new o.BH;return function(t,e,n,r,i){var o=se(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),function(n,r){"ok"===n&&Oe(t.onDisconnect_,e,o),hi(0,i,n,r)})}(this._repo,this._path,t,e,n.wrapCallback(function(){})),n.promise},t.prototype.update=function(t){Vr("OnDisconnect.update",this._path),Mr("OnDisconnect.update",t,this._path,!1);var e=new o.BH;return function(t,e,n,r){if((0,o.xb)(n))return E("onDisconnect().update() called with empty data.  Don't do anything."),void hi(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,function(i,o){"ok"===i&&L(n,function(n,r){var i=se(r);Oe(t.onDisconnect_,bt(e,n),i)}),hi(0,r,i,o)})}(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t}(),Di=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return wt(this._path)?null:yt(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Oi(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=De(this._queryParams),e=N(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return De(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=(0,o.m9)(e))instanceof t))return!1;var n=this._repo===e._repo,r=St(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function Ii(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function xi(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Mt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==x)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==k)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Jt){if(null!=e&&!Nr(e)||null!=n&&!Nr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,o.hu)(t.getIndex()instanceof ce||t.getIndex()===le,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ki(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Oi=function(t){function e(e,n){return t.call(this,e,n,new Ce,!1)||this}return(0,s.ZT)(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=_t(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(Di),Fi=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new dt(e),r=Ri(this.ref,e);return new t(this._node.getChild(n),r,Jt)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(r,i){return e(new t(i,Ri(n.ref,r),Jt))})},t.prototype.hasChild=function(t){var e=new dt(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Pi(t,e){return(t=(0,o.m9)(t))._checkNotDeleted("ref"),void 0!==e?Ri(t._root,e):t._root}function Ni(t,e){(t=(0,o.m9)(t))._checkNotDeleted("refFromURL");var n=wi(e,t._repo.repoInfo_.nodeAdmin);Gr("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||A("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Pi(t,n.path.toString())}function Ri(t,e){var n;return null===pt((t=(0,o.m9)(t))._path)?((n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),jr("child","path",n,!1)):jr("child","path",e,!1),new Oi(t._repo,bt(t._path,e))}function Li(t,e){t=(0,o.m9)(t),Vr("push",t._path),Rr("push",e,t._path,!0);var n,r=Xr(t._repo),i=de(r),s=Ri(t,i),a=Ri(t,i);return n=null!=e?qi(a,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),s}function Mi(t){return Vr("remove",t._path),qi(t,null)}function qi(t,e){t=(0,o.m9)(t),Vr("set",t._path),Rr("set",e,t._path,!1);var n=new o.BH;return oi(t._repo,t._path,e,null,n.wrapCallback(function(){})),n.promise}function Ui(t,e){t=(0,o.m9)(t),Vr("setPriority",t._path),qr("setPriority",e,!1);var n=new o.BH;return oi(t._repo,bt(t._path,".priority"),e,null,n.wrapCallback(function(){})),n.promise}function Bi(t,e,n){if(Vr("setWithPriority",t._path),Rr("setWithPriority",e,t._path,!1),qr("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new o.BH;return oi(t._repo,t._path,e,n,r.wrapCallback(function(){})),r.promise}function ji(t,e){Mr("update",e,t._path,!1);var n=new o.BH;return function(t,e,n,r){li(t,"update",{path:e.toString(),value:n});var i=!0,s=ti(t),a={};if(L(n,function(n,r){i=!1,a[n]=yr(bt(e,n),se(r),t.serverSyncTree_,s)}),i)E("update() called with empty data.  Don't do anything."),hi(0,r,"ok",void 0);else{var u=ii(t),c=function(t,e,n,r){!function(t,e,n,r){(0,o.hu)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=tn(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=Ke.fromObject(n);return nr(t,new Ve({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,e,a,u);Hr(t.eventQueue_,c),t.server_.merge(e.toString(),n,function(n,i){var o="ok"===n;o||D("update at "+e+" failed: "+n);var s=Kn(t.serverSyncTree_,u,!o),a=s.length>0?pi(t,e):e;Wr(t.eventQueue_,a,s),hi(0,r,n,i)}),L(n,function(n){var r=_i(t,bt(e,n));pi(t,r)}),Wr(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback(function(){})),n.promise}var Vi=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new Ei("value",this,new Fi(t.snapshotNode,new Oi(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Si(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Gi=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return this.eventType===("children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Si(this,t,e):null},t.prototype.createEvent=function(t,e){(0,o.hu)(null!=t.childName,"Child events should have a childName.");var n=Ri(new Oi(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new Ei(t.type,this,new Fi(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function Zi(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var s=n,a=function(e,n){ui(t._repo,t,c),s(e,n)};a.userCallback=n.userCallback,a.context=n.context,n=a}var u=new Ti(n,o||void 0),c="value"===e?new Vi(u):new Gi(e,u);return function(t,e,n){var r;r=".info"===pt(e._path)?tr(t.infoSyncTree_,e,n):tr(t.serverSyncTree_,e,n),Yr(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return ui(t._repo,t,c)}}function zi(t,e,n,r){return Zi(t,"value",e,n,r)}function Hi(t,e,n,r){return Zi(t,"child_added",e,n,r)}function Yi(t,e,n,r){return Zi(t,"child_changed",e,n,r)}function Wi(t,e,n,r){return Zi(t,"child_moved",e,n,r)}function $i(t,e,n,r){return Zi(t,"child_removed",e,n,r)}function Qi(t,e,n){var r=null,i=n?new Ti(n):null;"value"===e?r=new Vi(i):e&&(r=new Gi(e,i)),ui(t._repo,t,r)}var Ki=function(){return function(){}}(),Ji=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.ZT)(e,t),e.prototype._apply=function(t){Rr("endAt",this._value,t._path,!0);var e=Se(t._queryParams,this._value,this._key);if(ki(e),xi(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Di(t._repo,t._path,e,t._orderByCalled)},e}(Ki);function Xi(t,e){return Br("endAt","key",e,!0),new Ji(t,e)}var to=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.ZT)(e,t),e.prototype._apply=function(t){Rr("endBefore",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Mt?("string"==typeof n&&(n=pe(n)),i=Se(e,n,r)):i=Se(e,n,null==r?x:pe(r)),i.endBeforeSet_=!0,i);if(ki(o),xi(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Di(t._repo,t._path,o,t._orderByCalled)},e}(Ki);function eo(t,e){return Br("endBefore","key",e,!0),new to(t,e)}var no=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.ZT)(e,t),e.prototype._apply=function(t){Rr("startAt",this._value,t._path,!0);var e=Ee(t._queryParams,this._value,this._key);if(ki(e),xi(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Di(t._repo,t._path,e,t._orderByCalled)},e}(Ki);function ro(t,e){return void 0===t&&(t=null),Br("startAt","key",e,!0),new no(t,e)}var io=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.ZT)(e,t),e.prototype._apply=function(t){Rr("startAfter",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Mt?("string"==typeof n&&(n=fe(n)),i=Ee(e,n,r)):i=Ee(e,n,null==r?k:fe(r)),i.startAfterSet_=!0,i);if(ki(o),xi(o),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Di(t._repo,t._path,o,t._orderByCalled)},e}(Ki);function oo(t,e){return Br("startAfter","key",e,!0),new io(t,e)}var so=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return(0,s.ZT)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Di(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="l",n),t._orderByCalled);var e,n},e}(Ki);function ao(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new so(t)}var uo=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return(0,s.ZT)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Di(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="r",n),t._orderByCalled);var e,n},e}(Ki);function co(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new uo(t)}var lo=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return(0,s.ZT)(e,t),e.prototype._apply=function(t){Ii(t,"orderByChild");var e=new dt(this._path);if(wt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new ce(e),r=Te(t._queryParams,n);return xi(r),new Di(t._repo,t._path,r,!0)},e}(Ki);function ho(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return jr("orderByChild","path",t,!1),new lo(t)}var fo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype._apply=function(t){Ii(t,"orderByKey");var e=Te(t._queryParams,Mt);return xi(e),new Di(t._repo,t._path,e,!0)},e}(Ki);function po(){return new fo}var go=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype._apply=function(t){Ii(t,"orderByPriority");var e=Te(t._queryParams,Jt);return xi(e),new Di(t._repo,t._path,e,!0)},e}(Ki);function mo(){return new go}var yo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype._apply=function(t){Ii(t,"orderByValue");var e=Te(t._queryParams,le);return xi(e),new Di(t._repo,t._path,e,!0)},e}(Ki);function vo(){return new yo}var _o=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.ZT)(e,t),e.prototype._apply=function(t){if(Rr("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Ji(this._value,this._key)._apply(new no(this._value,this._key)._apply(t))},e}(Ki);function bo(t,e){return Br("equalTo","key",e,!0),new _o(t,e)}function wo(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=(0,o.m9)(t);try{for(var u=(0,s.XA)(r),c=u.next();!c.done;c=u.next()){var l=c.value;a=l._apply(a)}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a}!function(t){(0,o.hu)(!On,"__referenceConstructor has already been defined"),On=t}(Oi),function(t){(0,o.hu)(!qn,"__referenceConstructor has already been defined"),qn=t}(Oi);var Co={},Eo=!1;function So(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||A("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),E("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var s,a=wi(o,i),u=a.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(s=!0,u=(a=wi(o="http://"+c+"?ns="+u.namespace,i)).repoInfo):s=!a.repoInfo.secure;var l=i&&s?new Z(Z.OWNER):new G(t.name,t.options,e);Gr("Invalid Firebase Database URL",a),wt(a.path)||A("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n,r){var i=Co[e.name];i||(Co[e.name]=i={});var o=i[t.toURLString()];return o&&A("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Jr(t,Eo,n,r),i[t.toURLString()]=o,o}(u,t,l,new V(t.name,n));return new To(h,t)}var To=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(function(t,e,n){if(t.stats_=X(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Ie(t.repoInfo_,function(e,n,r,i){ei(t,e,n,r,i)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(function(){return ni(t,!0)},0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,o.Pz)(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Pt(t.repoInfo_,e,function(e,n,r,i){ei(t,e,n,r,i)},function(e){ni(t,e)},function(e){!function(t,e){L(e,function(e,n){ri(t,e,n)})}(t,e)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,i;t.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),t.appCheckProvider_.addTokenChangeListener(function(e){t.server_.refreshAppCheckToken(e.token)}),t.statsReporter_=(r=function(){return new Re(t.stats_,t.server_)},i=t.repoInfo_.toString(),J[i]||(J[i]=r()),J[i]),t.infoData_=new xe,t.infoSyncTree_=new $n({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=Jn(t.infoSyncTree_,e._path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),ri(t,"connected",!1),t.serverSyncTree_=new $n({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);Wr(t.eventQueue_,e._path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Oi(this._repo,ft())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return this._checkNotDeleted("delete"),t=this._repo,(n=Co[e=this.app.name])&&n[t.key]===t||A("Database "+e+"("+t.repoInfo_+") has already been deleted."),ci(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&A("Cannot call "+t+" on a deleted database.")},t}();function Ao(t){(t=(0,o.m9)(t))._checkNotDeleted("goOffline"),ci(t._repo)}function Do(t){var e;(t=(0,o.m9)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume(Kr)}var Io={".sv":"timestamp"},xo=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function ko(t,e,n){var r;if(t=(0,o.m9)(t),Vr("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,s=new o.BH,a=zi(t,function(){});return function(e,n,r,i,a,u){li(e,"transaction on "+n);var c={path:n,update:r,onComplete:function(e,n,r){var i=null;e?s.reject(e):(i=new Fi(r,new Oi(t._repo,t._path),Jt),s.resolve(new xo(n,i)))},status:null,order:y(),applyLocally:u,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=di(e,n,void 0);c.currentInputSnapshot=l;var h=c.update(l.val());if(void 0===h)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Lr("transaction failed: Data returned ",h,c.path),c.status=0;var d=wr(e.transactionQueueTree_,n),f=Cr(d)||[];f.push(c),Er(d,f);var p=void 0;"object"==typeof h&&null!==h&&(0,o.r3)(h,".priority")?(p=(0,o.DV)(h,".priority"),(0,o.hu)(Nr(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(er(e.serverSyncTree_,n)||ie.EMPTY_NODE).getPriority().val();var g=ti(e),m=se(h,p),v=vr(m,l,g);c.currentOutputSnapshotRaw=m,c.currentOutputSnapshotResolved=v,c.currentWriteId=ii(e);var _=Qn(e.serverSyncTree_,n,v,c.currentWriteId,c.applyLocally);Wr(e.eventQueue_,n,_),fi(e,e.transactionQueueTree_)}}(t._repo,t._path,e,0,a,i),s.promise}var Oo=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){(0,o.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,o.Wj)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.remove=function(t){(0,o.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,o.Wj)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.set=function(t,e){(0,o.Dv)("OnDisconnect.set",1,2,arguments.length),(0,o.Wj)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},t.prototype.setWithPriority=function(t,e,n){(0,o.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,o.Wj)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},t.prototype.update=function(t,e){if((0,o.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,D("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,o.Wj)("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},t}(),Fo=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return(0,o.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Po=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return(0,o.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return(0,o.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return(0,o.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return(0,o.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return(0,o.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),jr("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return(0,o.Dv)("DataSnapshot.hasChild",1,1,arguments.length),jr("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return(0,o.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return(0,o.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,o.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(function(r){return e(new t(n._database,r))})},t.prototype.hasChildren=function(){return(0,o.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return(0,o.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return(0,o.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ro(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),No=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,i){var s,a=this;(0,o.Dv)("Query.on",2,4,arguments.length),(0,o.Wj)("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,i),c=function(t,e){n.call(u.context,new Po(a.database,t),e)};c.userCallback=n,c.context=u.context;var l=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return zi(this._delegate,c,l),n;case"child_added":return Hi(this._delegate,c,l),n;case"child_removed":return $i(this._delegate,c,l),n;case"child_changed":return Yi(this._delegate,c,l),n;case"child_moved":return Wi(this._delegate,c,l),n;default:throw new Error((0,o.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if((0,o.Dv)("Query.off",0,3,arguments.length),Ur("Query.off",t,!0),(0,o.Wj)("Query.off","callback",e,!0),(0,o.lb)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,Qi(this._delegate,t,r)}else Qi(this._delegate,t)},t.prototype.get=function(){var t=this;return function(t){return function(t,e){var n=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){var i=Ct(t,n);r=r||Gn(e,i)});var i=t.syncPointTree_.get(n);i?r=r||Gn(i,ft()):(i=new Un,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new Ge(r,!0,!1):null;return $e(jn(i,e,ln(t.pendingWriteTree_,e._path),o?s.getNode():ie.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then(function(n){var r=se(n).withIndex(e._queryParams.getIndex()),i=Jn(t.serverSyncTree_,e._path,r);return Yr(t.eventQueue_,e._path,i),Promise.resolve(r)},function(n){return li(t,"get for query "+(0,o.Pz)(e)+" failed: "+n),Promise.reject(new Error(n))})}((t=(0,o.m9)(t))._repo,t).then(function(e){return new Fi(e,new Oi(t._repo,t._path),t._queryParams.getIndex())})}(this._delegate).then(function(e){return new Po(t.database,e)})},t.prototype.once=function(e,n,r,i){var s=this;(0,o.Dv)("Query.once",1,4,arguments.length),(0,o.Wj)("Query.once","callback",n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=new o.BH,c=function(t,e){var r=new Po(s.database,t);n&&n.call(a.context,r,e),u.resolve(r)};c.userCallback=n,c.context=a.context;var l=function(t){a.cancel&&a.cancel.call(a.context,t),u.reject(t)};switch(e){case"value":zi(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":Hi(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":$i(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":Yi(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":Wi(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error((0,o.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return(0,o.Dv)("Query.limitToFirst",1,1,arguments.length),new t(this.database,wo(this._delegate,ao(e)))},t.prototype.limitToLast=function(e){return(0,o.Dv)("Query.limitToLast",1,1,arguments.length),new t(this.database,wo(this._delegate,co(e)))},t.prototype.orderByChild=function(e){return(0,o.Dv)("Query.orderByChild",1,1,arguments.length),new t(this.database,wo(this._delegate,ho(e)))},t.prototype.orderByKey=function(){return(0,o.Dv)("Query.orderByKey",0,0,arguments.length),new t(this.database,wo(this._delegate,po()))},t.prototype.orderByPriority=function(){return(0,o.Dv)("Query.orderByPriority",0,0,arguments.length),new t(this.database,wo(this._delegate,mo()))},t.prototype.orderByValue=function(){return(0,o.Dv)("Query.orderByValue",0,0,arguments.length),new t(this.database,wo(this._delegate,vo()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),(0,o.Dv)("Query.startAt",0,2,arguments.length),new t(this.database,wo(this._delegate,ro(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),(0,o.Dv)("Query.startAfter",0,2,arguments.length),new t(this.database,wo(this._delegate,oo(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),(0,o.Dv)("Query.endAt",0,2,arguments.length),new t(this.database,wo(this._delegate,Xi(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),(0,o.Dv)("Query.endBefore",0,2,arguments.length),new t(this.database,wo(this._delegate,eo(e,n)))},t.prototype.equalTo=function(e,n){return(0,o.Dv)("Query.equalTo",1,2,arguments.length),new t(this.database,wo(this._delegate,bo(e,n)))},t.prototype.toString=function(){return(0,o.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return(0,o.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if((0,o.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,(0,o.Wj)(t,"cancel",r.cancel,!0),r.context=n,(0,o.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,o.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new Ro(this.database,new Oi(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),Ro=function(t){function e(e,n){var r=t.call(this,e,new Di(n._repo,n._path,new Ce,!1))||this;return r.database=e,r._delegate=n,r}return(0,s.ZT)(e,t),e.prototype.getKey=function(){return(0,o.Dv)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return(0,o.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,Ri(this._delegate,t))},e.prototype.getParent=function(){(0,o.Dv)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return(0,o.Dv)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){(0,o.Dv)("Reference.set",1,2,arguments.length),(0,o.Wj)("Reference.set","onComplete",e,!0);var n=qi(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.update=function(t,e){if((0,o.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,D("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Vr("Reference.update",this._delegate._path),(0,o.Wj)("Reference.update","onComplete",e,!0);var i=ji(this._delegate,t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},e.prototype.setWithPriority=function(t,e,n){(0,o.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,o.Wj)("Reference.setWithPriority","onComplete",n,!0);var r=Bi(this._delegate,t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},e.prototype.remove=function(t){(0,o.Dv)("Reference.remove",0,1,arguments.length),(0,o.Wj)("Reference.remove","onComplete",t,!0);var e=Mi(this._delegate);return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},e.prototype.transaction=function(t,e,n){var r=this;(0,o.Dv)("Reference.transaction",1,3,arguments.length),(0,o.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,o.Wj)("Reference.transaction","onComplete",e,!0),Zr("Reference.transaction","applyLocally",n,!0);var i=ko(this._delegate,t,{applyLocally:n}).then(function(t){return new Fo(t.committed,new Po(r.database,t.snapshot))});return e&&i.then(function(t){return e(null,t.committed,t.snapshot)},function(t){return e(t,!1,null)}),i},e.prototype.setPriority=function(t,e){(0,o.Dv)("Reference.setPriority",1,2,arguments.length),(0,o.Wj)("Reference.setPriority","onComplete",e,!0);var n=Ui(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.push=function(t,n){var r=this;(0,o.Dv)("Reference.push",0,2,arguments.length),(0,o.Wj)("Reference.push","onComplete",n,!0);var i=Li(this._delegate,t),s=i.then(function(t){return new e(r.database,t)});n&&s.then(function(){return n(null)},function(t){return n(t)});var a=new e(this.database,i);return a.then=s.then.bind(s),a.catch=s.catch.bind(s,void 0),a},e.prototype.onDisconnect=function(){return Vr("Reference.onDisconnect",this._delegate._path),new Oo(new Ai(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(No),Lo=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={}),(t=(0,o.m9)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&A("Cannot call useEmulator() after instance has already been initialized.");var i=t._repoInternal,s=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&A('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Z(Z.OWNER);else if(r.mockUserToken){var a=(0,o.Sg)(r.mockUserToken,t.app.options.projectId);s=new Z(a)}!function(t,e,n,r){t.repoInfo_=new W(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(i,e,n,s)}(this._delegate,t,e,n)},t.prototype.ref=function(t){if((0,o.Dv)("database.ref",0,1,arguments.length),t instanceof Ro){var e=Ni(this._delegate,t.toString());return new Ro(this,e)}return e=Pi(this._delegate,t),new Ro(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";(0,o.Dv)(e,1,1,arguments.length);var n=Ni(this._delegate,t);return new Ro(this,n)},t.prototype.goOffline=function(){return(0,o.Dv)("database.goOffline",0,0,arguments.length),Ao(this._delegate)},t.prototype.goOnline=function(){return(0,o.Dv)("database.goOnline",0,0,arguments.length),Do(this._delegate)},t.ServerValue={TIMESTAMP:Io,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}(),Mo=Object.freeze({__proto__:null,forceLongPolling:function(){st.forceDisallow(),rt.forceAllow()},forceWebSockets:function(){rt.forceDisallow()},isWebSocketsAvailable:function(){return st.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new Ne(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce(function(t,e){return Math.max(e.length,t)},0);L(n,function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)})}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;c(t.version);var u=new i.zt("auth-internal",new i.H0("database-standalone"));return u.setComponent(new i.wA("auth-internal",function(){return r},"PRIVATE")),{instance:new Lo(So(e,u,void 0,n,a),e),namespace:o}}}),qo=Pt;Pt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Pt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Uo=Object.freeze({__proto__:null,DataConnection:qo,RealTimeConnection:ut,hijackHash:function(t){var e=Pt.prototype.put;return Pt.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Pt.prototype.put=e}},ConnectionTarget:W,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){Eo=t}(t)}}),Bo=Lo.ServerValue;!function(e){c(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new i.wA("database",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Lo(So(r,i,o,n),r)},"PUBLIC").setServiceProps({Reference:Ro,Query:No,Database:Lo,DataSnapshot:Po,enableLogging:C,INTERNAL:Mo,ServerValue:Bo,TEST_ACCESS:Uo}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.10.7"),(0,o.Yr)()&&(t.exports=n)}(r.Z)},308:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,{in:()=>s,Yd:()=>h,Ub:()=>d,Am:()=>f});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function d(t){o.forEach(function(e){e.setLogLevel(t)})}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},250:(t,e,n)=>{"use strict";n.d(e,{BH:()=>d,LL:()=>I,ZR:()=>D,gQ:()=>j,zI:()=>A,hu:()=>i,g5:()=>o,US:()=>a,h$:()=>u,$s:()=>K,r3:()=>L,Sg:()=>f,ne:()=>V,p$:()=>l,ZB:()=>h,gK:()=>H,m9:()=>J,z$:()=>p,GJ:()=>R,jU:()=>y,ru:()=>v,d:()=>b,xb:()=>q,w1:()=>w,hl:()=>S,uI:()=>g,UG:()=>m,Yr:()=>E,b$:()=>_,Mn:()=>C,w9:()=>N,cI:()=>O,UI:()=>U,xO:()=>B,DV:()=>M,ug:()=>Q,dS:()=>$,Pz:()=>F,Dv:()=>z,Wj:()=>Y,lb:()=>W,eu:()=>T});var r=n(4762),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function f(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[a.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),a.encodeString(JSON.stringify(s),!1),""].join(".")}function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function g(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())}function m(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function v(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function _(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return p().indexOf("Electron/")>=0}function w(){var t=p();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function C(){return p().indexOf("MSAppHost/")>=0}function E(){return!1}function S(){return"indexedDB"in self&&null!=indexedDB}function T(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}})}function A(){return!(!navigator||!navigator.cookieEnabled)}var D=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,I.prototype.create),o}return(0,r.ZT)(e,t),e}(Error),I=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?x(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new D(i,a,r);return u},t}();function x(t,e){return t.replace(k,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var k=/\{\$([^}]+)}/g;function O(t){return JSON.parse(t)}function F(t){return JSON.stringify(t)}var P=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=O(c(o[0])||""),n=O(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},N=function(t){var e=P(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},R=function(t){var e=P(t).claims;return"object"==typeof e&&!0===e.admin};function L(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function M(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function q(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function U(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function B(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var j=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function V(t,e){var n=new G(t,e);return n.subscribe.bind(n)}var G=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=Z),void 0===r.error&&(r.error=Z),void 0===r.complete&&(r.complete=Z);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function Z(){}var z=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function H(t,e){return t+" failed: "+e+" argument "}function Y(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(H(t,e)+"must be a valid function.")}function W(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(H(t,e)+"must be a valid context object.")}var $=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},Q=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function K(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function J(t){return t&&t._delegate?t._delegate:t}},1858:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r.Z});var r=n(1062),i="8.7.1";r.Z.registerVersion("firebase",i,"app"),r.Z.SDK_VERSION=i},3103:(t,e,n)=>{"use strict";n.d(e,{P:()=>s});var r=n(653),i=n(878),o=n(1225);let s=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return(0,i.of)(this.value);case"E":return(0,o._)(this.error);case"C":return(0,r.c)()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})()},8318:(t,e,n)=>{"use strict";n.d(e,{y:()=>c});var r=n(6673),i=n(5331),o=n(7498),s=n(6197),a=n(3392),u=n(1484);let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.L)return t;if(t[i.b])return t[i.b]()}return t||e||n?new r.L(t,e,n):new r.L(o.c)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.v.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.L?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.L](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.y:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.v.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},7498:(t,e,n)=>{"use strict";n.d(e,{c:()=>o});var r=n(1484),i=n(4294);const o={closed:!0,next(t){},error(t){if(r.v.useDeprecatedSynchronousErrorHandling)throw t;(0,i.z)(t)},complete(){}}},5959:(t,e,n)=>{"use strict";n.d(e,{Yc:()=>c,xQ:()=>l});var r=n(8318),i=n(6673),o=n(7570),s=n(3895),a=n(9291),u=n(5331);class c extends i.L{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.N;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.N;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.N;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.N;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.N;return this.hasError?(t.error(this.thrownError),o.w.EMPTY):this.isStopped?(t.complete(),o.w.EMPTY):(this.observers.push(t),new a.W(this,t))}asObservable(){const t=new r.y;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.w.EMPTY}}},9291:(t,e,n)=>{"use strict";n.d(e,{W:()=>i});var r=n(7570);class i extends r.w{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},6673:(t,e,n)=>{"use strict";n.d(e,{L:()=>c});var r=n(5024),i=n(7498),o=n(7570),s=n(5331),a=n(1484),u=n(4294);class c extends o.w{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!t){this.destination=i.c;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.b](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;(0,r.m)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.c&&(a=Object.create(e),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):(0,u.z)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;(0,u.z)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(t,e,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},7570:(t,e,n)=>{"use strict";n.d(e,{w:()=>a});var r=n(8470),i=n(2056),o=n(5024);const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if((0,o.m)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if((0,r.k)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if((0,i.K)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},1484:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},6882:(t,e,n)=>{"use strict";n.d(e,{IY:()=>s,Ds:()=>a,ft:()=>u});var r=n(6673),i=n(8318),o=n(6015);class s extends r.L{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.y)return t.subscribe(e);let n;try{n=(0,o.s)(t)(e)}catch(r){e.error(r)}return n}},2875:(t,e,n)=>{"use strict";n.d(e,{c:()=>a,N:()=>u});var r=n(5959),i=n(8318),o=n(7570),s=n(1564);class a extends i.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.w,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.w.EMPTY)),t}refCount(){return(0,s.x)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.Yc{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},653:(t,e,n)=>{"use strict";n.d(e,{E:()=>i,c:()=>o});var r=n(8318);const i=new r.y(t=>t.complete());function o(t){return t?function(t){return new r.y(e=>t.schedule(()=>e.complete()))}(t):i}},9764:(t,e,n)=>{"use strict";n.d(e,{D:()=>h});var r=n(8318),i=n(6015),o=n(7570),s=n(6197),a=n(2570),u=n(5686),c=n(5168),l=n(9653);function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.L]}(t))return function(t,e){return new r.y(n=>{const r=new o.w;return r.add(e.schedule(()=>{const i=t[s.L]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if((0,c.t)(t))return function(t,e){return new r.y(n=>{const r=new o.w;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if((0,l.z)(t))return(0,a.r)(t,e);if(function(t){return t&&"function"==typeof t[u.hZ]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new o.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.hZ](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.y?t:new r.y((0,i.s)(t))}},9342:(t,e,n)=>{"use strict";n.d(e,{n:()=>s});var r=n(8318),i=n(625),o=n(2570);function s(t,e){return e?(0,o.r)(t,e):new r.y((0,i.V)(t))}},1906:(t,e,n)=>{"use strict";n.d(e,{T:()=>a});var r=n(8318),i=n(6163),o=n(7471),s=n(9342);function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return(0,i.K)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.y?t[0]:(0,o.J)(e)((0,s.n)(t,n))}},878:(t,e,n)=>{"use strict";n.d(e,{of:()=>s});var r=n(6163),i=n(9342),o=n(2570);function s(...t){let e=t[t.length-1];return(0,r.K)(e)?(t.pop(),(0,o.r)(t,e)):(0,i.n)(t)}},1225:(t,e,n)=>{"use strict";n.d(e,{_:()=>i});var r=n(8318);function i(t,e){return new r.y(e?n=>e.schedule(o,0,{error:t,subscriber:n}):e=>e.error(t))}function o({error:t,subscriber:e}){e.error(t)}},9996:(t,e,n)=>{"use strict";n.d(e,{U:()=>i});var r=n(6673);function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.L{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},7471:(t,e,n)=>{"use strict";n.d(e,{J:()=>o});var r=n(3982),i=n(3392);function o(t=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,t)}},3982:(t,e,n)=>{"use strict";n.d(e,{zg:()=>s});var r=n(9996),i=n(9764),o=n(6882);function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>(0,i.D)(t(n,o)).pipe((0,r.U)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.Ds{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.IY(this),n=this.destination;n.add(e);const r=(0,o.ft)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},45:(t,e,n)=>{"use strict";n.d(e,{QV:()=>o,ht:()=>a});var r=n(6673),i=n(3103);function o(t,e=0){return function(n){return n.lift(new s(t,e))}}class s{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new a(t,this.scheduler,this.delay))}}class a extends r.L{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(a.dispatch,this.delay,new u(t,this.destination)))}_next(t){this.scheduleMessage(i.P.createNext(t))}_error(t){this.scheduleMessage(i.P.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(i.P.createComplete()),this.unsubscribe()}}class u{constructor(t,e){this.notification=t,this.destination=e}}},1564:(t,e,n)=>{"use strict";n.d(e,{x:()=>i});var r=n(6673);function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.L{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},1055:(t,e,n)=>{"use strict";n.d(e,{B:()=>a});var r=n(2875),i=n(1564),o=n(5959);function s(){return new o.xQ}function a(){return t=>{return(0,i.x)()((e=s,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,r.N);return i.source=t,i.subjectFactory=n,i})(t));var e}}},3482:(t,e,n)=>{"use strict";n.d(e,{R:()=>a});var r=n(8318),i=n(2709),o=n(2293);class s extends r.y{constructor(t,e=0,n=i.e){super(),this.source=t,this.delayTime=e,this.scheduler=n,(!(0,o.k)(e)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=i.e)}static create(t,e=0,n=i.e){return new s(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(s.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function a(t,e=0){return function(n){return n.lift(new u(t,e))}}class u{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new s(e,this.delay,this.scheduler).subscribe(t)}}},4019:(t,e,n)=>{"use strict";n.d(e,{b:()=>s});var r=n(6673),i=n(6054),o=n(5024);function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.L{constructor(t,e,n,r){super(t),this._tapNext=i.Z,this._tapError=i.Z,this._tapComplete=i.Z,this._tapError=n||i.Z,this._tapComplete=r||i.Z,(0,o.m)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i.Z,this._tapError=e.error||i.Z,this._tapComplete=e.complete||i.Z)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},2570:(t,e,n)=>{"use strict";n.d(e,{r:()=>o});var r=n(8318),i=n(7570);function o(t,e){return new r.y(n=>{const r=new i.w;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},8277:(t,e,n)=>{"use strict";n.d(e,{o:()=>o});var r=n(7570);class i extends r.w{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},1098:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},2709:(t,e,n)=>{"use strict";n.d(e,{e:()=>f,E:()=>d});let r=1;const i=(()=>Promise.resolve())(),o={};function s(t){return t in o&&(delete o[t],!0)}const a={setImmediate(t){const e=r++;return o[e]=!0,i.then(()=>s(e)&&t()),e},clearImmediate(t){s(t)}};var u=n(8277);class c extends u.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=a.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(a.clearImmediate(e),t.scheduled=void 0)}}var l=n(1098);class h extends l.v{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new h(c),f=d},8569:(t,e,n)=>{"use strict";n.d(e,{z:()=>i,P:()=>o});var r=n(8277);const i=new(n(1098).v)(r.o),o=i},8489:(t,e,n)=>{"use strict";n.d(e,{c:()=>u,N:()=>a});var r=n(8277);class i extends r.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n(1098);class s extends o.v{}const a=new s(i),u=a},5686:(t,e,n)=>{"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,{hZ:()=>i});const i=r()},6197:(t,e,n)=>{"use strict";n.d(e,{L:()=>r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},5331:(t,e,n)=>{"use strict";n.d(e,{b:()=>r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},3895:(t,e,n)=>{"use strict";n.d(e,{N:()=>r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},4294:(t,e,n)=>{"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,{z:()=>r})},3392:(t,e,n)=>{"use strict";function r(t){return t}n.d(e,{y:()=>r})},8470:(t,e,n)=>{"use strict";n.d(e,{k:()=>r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},9653:(t,e,n)=>{"use strict";n.d(e,{z:()=>r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},5024:(t,e,n)=>{"use strict";function r(t){return"function"==typeof t}n.d(e,{m:()=>r})},2293:(t,e,n)=>{"use strict";n.d(e,{k:()=>i});var r=n(8470);function i(t){return!(0,r.k)(t)&&t-parseFloat(t)+1>=0}},2056:(t,e,n)=>{"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,{K:()=>r})},5168:(t,e,n)=>{"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,{t:()=>r})},6163:(t,e,n)=>{"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,{K:()=>r})},6054:(t,e,n)=>{"use strict";function r(){}n.d(e,{Z:()=>r})},6015:(t,e,n)=>{"use strict";n.d(e,{s:()=>l});var r=n(625),i=n(4294),o=n(5686),s=n(6197),a=n(9653),u=n(5168),c=n(2056);const l=t=>{if(t&&"function"==typeof t[s.L])return l=t,t=>{const e=l[s.L]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if((0,a.z)(t))return(0,r.V)(t);if((0,u.t)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.z),t);if(t&&"function"==typeof t[o.hZ])return e=t,t=>{const n=e[o.hZ]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=(0,c.K)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},625:(t,e,n)=>{"use strict";n.d(e,{V:()=>r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},3139:(t,e,n)=>{"use strict";var r=n(5366);let i=null;function o(){return i}const s=new r.OlP("DocumentToken");let a=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return(0,r.LFG)(l)}const c=new r.OlP("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){const e=o().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=o().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=(0,r.Yz7)({factory:d,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function d(){return new l((0,r.LFG)(s))}function f(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=(0,r.LFG)(s).location;return new _((0,r.LFG)(a),e&&e.origin||"")}const v=new r.OlP("appBaseHref");let _=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return f(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),b=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=f(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{constructor(t,e){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(E(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,E(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformStrategy).historyGo)||void 0===n||n.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(m),r.LFG(a))},t.normalizeQueryParams=g,t.joinWithSlash=f,t.stripTrailingSlash=p,t.\u0275prov=(0,r.Yz7)({factory:C,token:t,providedIn:"root"}),t})();function C(){return new w((0,r.LFG)(m),(0,r.LFG)(a))}function E(t){return t.replace(/\/index.html$/,"")}const S={ADP:[void 0,void 0,0],AFN:[void 0,void 0,0],ALL:[void 0,void 0,0],AMD:[void 0,void 0,2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:[void 0,"\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["CFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var T=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}({}),A=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),D=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}({}),I=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}({}),x=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}({}),k=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({});function O(t,e){return M((0,r.cg1)(t)[r.wAp.DateFormat],e)}function F(t,e){return M((0,r.cg1)(t)[r.wAp.TimeFormat],e)}function P(t,e){return M((0,r.cg1)(t)[r.wAp.DateTimeFormat],e)}function N(t,e){const n=(0,r.cg1)(t),i=n[r.wAp.NumberSymbols][e];if(void 0===i){if(e===k.CurrencyDecimal)return n[r.wAp.NumberSymbols][k.Decimal];if(e===k.CurrencyGroup)return n[r.wAp.NumberSymbols][k.Group]}return i}const R=r.kL8;function L(t){if(!t[r.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[r.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function M(t,e){for(let n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function q(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const U=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,B={},j=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var V=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}({}),G=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}({}),Z=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}({});function z(t,e,n,r){let i=function(t){if(ot(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[e,n=1,r=1]=t.split("-").map(t=>+t);return H(e,n-1,r)}const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);let n;if(n=t.match(U))return function(t){const e=new Date(0);let n=0,r=0;const i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),c=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return o.call(e,s,a,u,c),e}(n)}const e=new Date(t);if(!ot(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=Y(n,e)||e;let o,s=[];for(;e;){if(o=j.exec(e),!o){s.push(e);break}{s=s.concat(o.slice(1));const t=s.pop();if(!t)break;e=t}}let a=i.getTimezoneOffset();r&&(a=it(r,a),i=function(t,e,n){const r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(it(e,r)-r))}(i,r));let u="";return s.forEach(t=>{const e=function(t){if(rt[t])return rt[t];let e;switch(t){case"G":case"GG":case"GGG":e=J(Z.Eras,I.Abbreviated);break;case"GGGG":e=J(Z.Eras,I.Wide);break;case"GGGGG":e=J(Z.Eras,I.Narrow);break;case"y":e=K(G.FullYear,1,0,!1,!0);break;case"yy":e=K(G.FullYear,2,0,!0,!0);break;case"yyy":e=K(G.FullYear,3,0,!1,!0);break;case"yyyy":e=K(G.FullYear,4,0,!1,!0);break;case"Y":e=nt(1);break;case"YY":e=nt(2,!0);break;case"YYY":e=nt(3);break;case"YYYY":e=nt(4);break;case"M":case"L":e=K(G.Month,1,1);break;case"MM":case"LL":e=K(G.Month,2,1);break;case"MMM":e=J(Z.Months,I.Abbreviated);break;case"MMMM":e=J(Z.Months,I.Wide);break;case"MMMMM":e=J(Z.Months,I.Narrow);break;case"LLL":e=J(Z.Months,I.Abbreviated,D.Standalone);break;case"LLLL":e=J(Z.Months,I.Wide,D.Standalone);break;case"LLLLL":e=J(Z.Months,I.Narrow,D.Standalone);break;case"w":e=et(1);break;case"ww":e=et(2);break;case"W":e=et(1,!0);break;case"d":e=K(G.Date,1);break;case"dd":e=K(G.Date,2);break;case"c":case"cc":e=K(G.Day,1);break;case"ccc":e=J(Z.Days,I.Abbreviated,D.Standalone);break;case"cccc":e=J(Z.Days,I.Wide,D.Standalone);break;case"ccccc":e=J(Z.Days,I.Narrow,D.Standalone);break;case"cccccc":e=J(Z.Days,I.Short,D.Standalone);break;case"E":case"EE":case"EEE":e=J(Z.Days,I.Abbreviated);break;case"EEEE":e=J(Z.Days,I.Wide);break;case"EEEEE":e=J(Z.Days,I.Narrow);break;case"EEEEEE":e=J(Z.Days,I.Short);break;case"a":case"aa":case"aaa":e=J(Z.DayPeriods,I.Abbreviated);break;case"aaaa":e=J(Z.DayPeriods,I.Wide);break;case"aaaaa":e=J(Z.DayPeriods,I.Narrow);break;case"b":case"bb":case"bbb":e=J(Z.DayPeriods,I.Abbreviated,D.Standalone,!0);break;case"bbbb":e=J(Z.DayPeriods,I.Wide,D.Standalone,!0);break;case"bbbbb":e=J(Z.DayPeriods,I.Narrow,D.Standalone,!0);break;case"B":case"BB":case"BBB":e=J(Z.DayPeriods,I.Abbreviated,D.Format,!0);break;case"BBBB":e=J(Z.DayPeriods,I.Wide,D.Format,!0);break;case"BBBBB":e=J(Z.DayPeriods,I.Narrow,D.Format,!0);break;case"h":e=K(G.Hours,1,-12);break;case"hh":e=K(G.Hours,2,-12);break;case"H":e=K(G.Hours,1);break;case"HH":e=K(G.Hours,2);break;case"m":e=K(G.Minutes,1);break;case"mm":e=K(G.Minutes,2);break;case"s":e=K(G.Seconds,1);break;case"ss":e=K(G.Seconds,2);break;case"S":e=K(G.FractionalSeconds,1);break;case"SS":e=K(G.FractionalSeconds,2);break;case"SSS":e=K(G.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=X(V.Short);break;case"ZZZZZ":e=X(V.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=X(V.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=X(V.Long);break;default:return null}return rt[t]=e,e}(t);u+=e?e(i,n,a):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function H(t,e,n){const r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Y(t,e){const n=function(t){return(0,r.cg1)(t)[r.wAp.LocaleId]}(t);if(B[n]=B[n]||{},B[n][e])return B[n][e];let i="";switch(e){case"shortDate":i=O(t,x.Short);break;case"mediumDate":i=O(t,x.Medium);break;case"longDate":i=O(t,x.Long);break;case"fullDate":i=O(t,x.Full);break;case"shortTime":i=F(t,x.Short);break;case"mediumTime":i=F(t,x.Medium);break;case"longTime":i=F(t,x.Long);break;case"fullTime":i=F(t,x.Full);break;case"short":const e=Y(t,"shortTime"),n=Y(t,"shortDate");i=W(P(t,x.Short),[e,n]);break;case"medium":const r=Y(t,"mediumTime"),o=Y(t,"mediumDate");i=W(P(t,x.Medium),[r,o]);break;case"long":const s=Y(t,"longTime"),a=Y(t,"longDate");i=W(P(t,x.Long),[s,a]);break;case"full":const u=Y(t,"fullTime"),c=Y(t,"fullDate");i=W(P(t,x.Full),[u,c])}return i&&(B[n][e]=i),i}function W(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(t,n){return null!=e&&n in e?e[n]:t})),t}function Q(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.substr(s.length-e)),o+s}function K(t,e,n=0,r=!1,i=!1){return function(o,s){let a=function(t,e){switch(t){case G.FullYear:return e.getFullYear();case G.Month:return e.getMonth();case G.Date:return e.getDate();case G.Hours:return e.getHours();case G.Minutes:return e.getMinutes();case G.Seconds:return e.getSeconds();case G.FractionalSeconds:return e.getMilliseconds();case G.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,o);if((n>0||a>-n)&&(a+=n),t===G.Hours)0===a&&-12===n&&(a=12);else if(t===G.FractionalSeconds)return u=e,Q(a,3).substr(0,u);var u;const c=N(s,k.MinusSign);return Q(a,e,c,r,i)}}function J(t,e,n=D.Format,i=!1){return function(o,s){return function(t,e,n,i,o,s){switch(n){case Z.Months:return function(t,e,n){const i=(0,r.cg1)(t),o=M([i[r.wAp.MonthsFormat],i[r.wAp.MonthsStandalone]],e);return M(o,n)}(e,o,i)[t.getMonth()];case Z.Days:return function(t,e,n){const i=(0,r.cg1)(t),o=M([i[r.wAp.DaysFormat],i[r.wAp.DaysStandalone]],e);return M(o,n)}(e,o,i)[t.getDay()];case Z.DayPeriods:const a=t.getHours(),u=t.getMinutes();if(s){const t=function(t){const e=(0,r.cg1)(t);return L(e),(e[r.wAp.ExtraData][2]||[]).map(t=>"string"==typeof t?q(t):[q(t[0]),q(t[1])])}(e),n=function(t,e,n){const i=(0,r.cg1)(t);L(i);const o=M([i[r.wAp.ExtraData][0],i[r.wAp.ExtraData][1]],e)||[];return M(o,n)||[]}(e,o,i),s=t.findIndex(t=>{if(Array.isArray(t)){const[e,n]=t,r=a>=e.hours&&u>=e.minutes,i=a<n.hours||a===n.hours&&u<n.minutes;if(e.hours<n.hours){if(r&&i)return!0}else if(r||i)return!0}else if(t.hours===a&&t.minutes===u)return!0;return!1});if(-1!==s)return n[s]}return function(t,e,n){const i=(0,r.cg1)(t),o=M([i[r.wAp.DayPeriodsFormat],i[r.wAp.DayPeriodsStandalone]],e);return M(o,n)}(e,o,i)[a<12?0:1];case Z.Eras:return function(t,e){return M((0,r.cg1)(t)[r.wAp.Eras],e)}(e,i)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(o,s,t,e,n,i)}}function X(t){return function(e,n,r){const i=-1*r,o=N(n,k.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case V.Short:return(i>=0?"+":"")+Q(s,2,o)+Q(Math.abs(i%60),2,o);case V.ShortGMT:return"GMT"+(i>=0?"+":"")+Q(s,1,o);case V.Long:return"GMT"+(i>=0?"+":"")+Q(s,2,o)+":"+Q(Math.abs(i%60),2,o);case V.Extended:return 0===r?"Z":(i>=0?"+":"")+Q(s,2,o)+":"+Q(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}function tt(t){return H(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}function et(t,e=!1){return function(n,r){let i;if(e){const t=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,e=n.getDate();i=1+Math.floor((e+t)/7)}else{const t=tt(n),e=function(t){const e=H(t,0,1).getDay();return H(t,0,1+(e<=4?4:11)-e)}(t.getFullYear()),r=t.getTime()-e.getTime();i=1+Math.round(r/6048e5)}return Q(i,t,N(r,k.MinusSign))}}function nt(t,e=!1){return function(n,r){return Q(tt(n).getFullYear(),t,N(r,k.MinusSign),e)}}const rt={};function it(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function ot(t){return t instanceof Date&&!isNaN(t.valueOf())}const st=/^(\d+)?\.((\d+)(-(\d+))?)?$/,at=".",ut="0";function ct(t){const e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}class lt{}let ht=(()=>{class t extends lt{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(R(e||this.locale)(t)){case A.Zero:return"zero";case A.One:return"one";case A.Two:return"two";case A.Few:return"few";case A.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.soG))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class dt{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ft=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(Dk){throw new Error(`Cannot find a differ supporting object '${e}' of type '${t=e,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new dt(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new pt(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new pt(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class pt{constructor(t,e){this.record=t,this.view=e}}let gt=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new mt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){yt("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){yt("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class mt{constructor(){this.$implicit=null,this.ngIf=null}}function yt(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${(0,r.AaK)(e)}'.`)}class vt{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let _t=(()=>{class t{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),t})(),bt=(()=>{class t{constructor(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new vt(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(_t,9))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),t})();function wt(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,r.AaK)(t)}'`)}class Ct{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class Et{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const St=new Et,Tt=new Ct;let At=(()=>{class t{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(e){if((0,r.QGY)(e))return St;if((0,r.F4k)(e))return Tt;throw wt(t,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.sBO,16))},t.\u0275pipe=r.Yjl({name:"async",type:t,pure:!1}),t})();const Dt=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])\S*/g;let It=(()=>{class t{transform(e){if(null==e)return null;if("string"!=typeof e)throw wt(t,e);return e.replace(Dt,t=>t[0].toUpperCase()+t.substr(1).toLowerCase())}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.Yjl({name:"titlecase",type:t,pure:!0}),t})(),xt=(()=>{class t{constructor(t){this.locale=t}transform(e,n="mediumDate",r,i){if(null==e||""===e||e!=e)return null;try{return z(e,n,i||this.locale,r)}catch(o){throw wt(t,o.message)}}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.soG,16))},t.\u0275pipe=r.Yjl({name:"date",type:t,pure:!0}),t})(),kt=(()=>{class t{constructor(t,e="USD"){this._locale=t,this._defaultCurrencyCode=e}transform(e,n=this._defaultCurrencyCode,i="symbol",o,s){if(!function(t){return!(null==t||""===t||t!=t)}(e))return null;s=s||this._locale,"boolean"==typeof i&&(i=i?"symbol":"code");let a=n||this._defaultCurrencyCode;"code"!==i&&(a="symbol"===i||"symbol-narrow"===i?function(t,e,n="en"){const i=function(t){return(0,r.cg1)(t)[r.wAp.Currencies]}(n)[t]||S[t]||[],o=i[1];return"narrow"===e&&"string"==typeof o?o:i[0]||t}(a,"symbol"===i?"wide":"narrow",s):i);try{return function(t,e,n,i,o){const s=function(t,e="-"){const n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(";"),i=r[0],o=r[1],s=-1!==i.indexOf(at)?i.split(at):[i.substring(0,i.lastIndexOf(ut)+1),i.substring(i.lastIndexOf(ut)+1)],a=s[0],u=s[1]||"";n.posPre=a.substr(0,a.indexOf("#"));for(let l=0;l<u.length;l++){const t=u.charAt(l);t===ut?n.minFrac=n.maxFrac=l+1:"#"===t?n.maxFrac=l+1:n.posSuf+=t}const c=a.split(",");if(n.gSize=c[1]?c[1].length:0,n.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,o){const t=i.length-n.posPre.length-n.posSuf.length,e=o.indexOf("#");n.negPre=o.substr(0,e).replace(/'/g,""),n.negSuf=o.substr(e+t).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}(function(t,e){return(0,r.cg1)(t)[r.wAp.NumberFormats][e]}(e,T.Currency),N(e,k.MinusSign));return s.minFrac=function(t){let e;const n=S[t];return n&&(e=n[2]),"number"==typeof e?e:2}(i),s.maxFrac=s.minFrac,function(t,e,n,r,i,o,s=!1){let a="",u=!1;if(isFinite(t)){let c=function(t){let e,n,r,i,o,s=Math.abs(t)+"",a=0;for((n=s.indexOf(at))>-1&&(s=s.replace(at,"")),(r=s.search(/e/i))>0?(n<0&&(n=r),n+=+s.slice(r+1),s=s.substring(0,r)):n<0&&(n=s.length),r=0;s.charAt(r)===ut;r++);if(r===(o=s.length))e=[0],n=1;else{for(o--;s.charAt(o)===ut;)o--;for(n-=r,e=[],i=0;r<=o;r++,i++)e[i]=Number(s.charAt(r))}return n>22&&(e=e.splice(0,21),a=n-1,n=1),{digits:e,exponent:a,integerLen:n}}(t);s&&(c=function(t){if(0===t.digits[0])return t;const e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===e?t.digits.push(0,0):1===e&&t.digits.push(0),t.integerLen+=2),t}(c));let l=e.minInt,h=e.minFrac,d=e.maxFrac;if(o){const t=o.match(st);if(null===t)throw new Error(`${o} is not a valid digit info`);const e=t[1],n=t[3],r=t[5];null!=e&&(l=ct(e)),null!=n&&(h=ct(n)),null!=r?d=ct(r):null!=n&&h>d&&(d=h)}!function(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen;const o=Math.min(Math.max(e,i),n);let s=o+t.integerLen,a=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let t=s;t<r.length;t++)r[t]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let t=1;t<s;t++)r[t]=0}if(a>=5)if(s-1<0){for(let e=0;e>s;e--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let u=0!==o;const c=e+t.integerLen,l=r.reduceRight(function(t,e,n,r){return r[n]=(e+=t)<10?e:e-10,u&&(0===r[n]&&n>=c?r.pop():u=!1),e>=10?1:0},0);l&&(r.unshift(l),t.integerLen++)}(c,h,d);let f=c.digits,p=c.integerLen;const g=c.exponent;let m=[];for(u=f.every(t=>!t);p<l;p++)f.unshift(0);for(;p<0;p++)f.unshift(0);p>0?m=f.splice(p,f.length):(m=f,f=[0]);const y=[];for(f.length>=e.lgSize&&y.unshift(f.splice(-e.lgSize,f.length).join(""));f.length>e.gSize;)y.unshift(f.splice(-e.gSize,f.length).join(""));f.length&&y.unshift(f.join("")),a=y.join(N(n,r)),m.length&&(a+=N(n,i)+m.join("")),g&&(a+=N(n,k.Exponential)+"+"+g)}else a=N(n,k.Infinity);return a=t<0&&!u?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(t,s,e,k.CurrencyGroup,k.CurrencyDecimal,o).replace("\xa4",n).replace("\xa4","").trim()}(function(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(`${t} is not a number`);return t}(e),s,a,n,o)}catch(u){throw wt(t,u.message)}}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.soG,16),r.Y36(r.EJc,16))},t.\u0275pipe=r.Yjl({name:"currency",type:t,pure:!0}),t})(),Ot=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:lt,useClass:ht}]}),t})();function Ft(t){return"browser"===t}function Pt(t){return"server"===t}let Nt=(()=>{class t{}return t.\u0275prov=(0,r.Yz7)({token:t,providedIn:"root",factory:()=>new Rt((0,r.LFG)(s),window)}),t})();class Rt{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Lt(this.window.history)||Lt(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(Dk){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(Dk){return!1}}}function Lt(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class Mt extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new Mt,i||(i=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(Ut=Ut||document.querySelector("base"),Ut?Ut.getAttribute("href"):null);return null==e?null:function(t){qt=qt||document.createElement("a"),qt.setAttribute("href",t);const e=qt.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){Ut=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let qt,Ut=null;const Bt=new r.OlP("TRANSITION_ID"),jt=[{provide:r.ip1,useFactory:function(t,e,n){return()=>{n.get(r.CZH).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[Bt,s,r.zs3],multi:!0}];class Vt{static init(){(0,r.VLi)(new Vt)}addToWindow(t){r.dqk.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(t=>{const e=r.dqk.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let Gt=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const Zt=new r.OlP("EventManagerPlugins");let zt=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Zt),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class Ht{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Yt=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Wt=(()=>{class t extends Yt{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach($t),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach($t))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function $t(t){o().remove(t)}const Qt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Kt=/%COMP%/g;function Jt(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Jt(t,i,n):(i=i.replace(Kt,t),n.push(i))}return n}function Xt(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let te=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new ee(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.ifc.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new ne(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.ifc.ShadowDom:return new re(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Jt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(zt),r.LFG(Wt),r.LFG(r.AFp))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class ee{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Qt[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=Qt[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Qt[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.JOm.DashCase|r.JOm.Important)?t.style.setProperty(e,n,i&r.JOm.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Xt(n)):this.eventManager.addEventListener(t,e,Xt(n))}}class ne extends ee{constructor(t,e,n,r){super(t),this.component=n;const i=Jt(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(Kt,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(Kt,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class re extends ee{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=Jt(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ie=(()=>{class t extends Ht{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const oe=["alt","control","meta","shift"],se={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ae={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ue={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let ce=(()=>{class t extends Ht{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(oe.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ae.hasOwnProperty(e)&&(e=ae[e]))}return se[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),oe.forEach(r=>{r!=n&&(0,ue[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),le=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:function(){return(0,r.LFG)(de)},token:t,providedIn:"root"}),t})();function he(t){return new de(t.get(s))}let de=(()=>{class t extends le{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case r.q3G.NONE:return e;case r.q3G.HTML:return(0,r.qzn)(e,"HTML")?(0,r.z3N)(e):(0,r.EiD)(this._doc,String(e)).toString();case r.q3G.STYLE:return(0,r.qzn)(e,"Style")?(0,r.z3N)(e):e;case r.q3G.SCRIPT:if((0,r.qzn)(e,"Script"))return(0,r.z3N)(e);throw new Error("unsafe value used in a script context");case r.q3G.URL:return(0,r.yhl)(e),(0,r.qzn)(e,"URL")?(0,r.z3N)(e):(0,r.mCW)(String(e));case r.q3G.RESOURCE_URL:if((0,r.qzn)(e,"ResourceURL"))return(0,r.z3N)(e);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,r.JVY)(t)}bypassSecurityTrustStyle(t){return(0,r.L6k)(t)}bypassSecurityTrustScript(t){return(0,r.eBb)(t)}bypassSecurityTrustUrl(t){return(0,r.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,r.pB0)(t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=(0,r.Yz7)({factory:function(){return he((0,r.LFG)(r.gxx))},token:t,providedIn:"root"}),t})();const fe=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){Mt.makeCurrent(),Vt.init()},multi:!0},{provide:s,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]),pe=[[],{provide:r.zSh,useValue:"root"},{provide:r.qLn,useFactory:function(){return new r.qLn},deps:[]},{provide:Zt,useClass:ie,multi:!0,deps:[s,r.R0b,r.Lbi]},{provide:Zt,useClass:ce,multi:!0,deps:[s]},[],{provide:te,useClass:te,deps:[zt,Wt,r.AFp]},{provide:r.FYo,useExisting:te},{provide:Yt,useExisting:Wt},{provide:Wt,useClass:Wt,deps:[s]},{provide:r.dDg,useClass:r.dDg,deps:[r.R0b]},{provide:zt,useClass:zt,deps:[Zt,r.R0b]},{provide:class{},useClass:Gt,deps:[]},[]];let ge=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.AFp,useValue:e.appId},{provide:Bt,useExisting:r.AFp},jt]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(t,12))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:pe,imports:[Ot,r.hGG]}),t})();function me(){return new ye((0,r.LFG)(s))}let ye=(()=>{class t{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=(0,r.Yz7)({factory:me,token:t,providedIn:"root"}),t})();"undefined"!=typeof window&&window;var ve=function(){function t(t,e,n){this.el=t,this.vcr=e,this.renderer=n,this.dtOptions={}}return t.prototype.ngOnInit=function(){var t=this;this.dtTrigger?this.dtTrigger.subscribe(function(){t.displayTable()}):this.displayTable()},t.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},t.prototype.displayTable=function(){var t=this,e=this;this.dtInstance=new Promise(function(n,r){Promise.resolve(t.dtOptions).then(function(r){setTimeout(function(){var i={rowCallback:function(n,i,o){if(r.columns){var s=r.columns;s.filter(function(t){return t.ngPipeInstance&&!t.ngTemplateRef}).forEach(function(t){var e=t.ngPipeInstance,r=s.findIndex(function(e){return e.data==t.data}),i=n.childNodes.item(r),o=$(i).text(),a=e.transform(o);$(i).text(a)}),s.filter(function(t){return t.ngTemplateRef&&!t.ngPipeInstance}).forEach(function(t){var r=t.ngTemplateRef,o=r.ref,a=r.context,u=s.findIndex(function(e){return e.data==t.data}),c=n.childNodes.item(u),l=Object.assign({},a,null==a?void 0:a.userData,{adtData:i}),h=e.vcr.createEmbeddedView(o,l);e.renderer.appendChild(c,h.rootNodes[0])})}t.dtOptions.rowCallback&&t.dtOptions.rowCallback(n,i,o)}};i=Object.assign({},r,i),t.dt=$(t.el.nativeElement).DataTable(i),n(t.dt)})})})},t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.s_b),r.Y36(r.Qsj))},t.\u0275dir=r.lG2({type:t,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}}),t}(),_e=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Ot]]}),t}(),be=n(9764),we=n(8318),Ce=n(8470),Ee=n(9996),Se=n(2056);function Te(...t){if(1===t.length){const e=t[0];if((0,Ce.k)(e))return Ae(e,null);if((0,Se.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Ae(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Ae(t=1===t.length&&(0,Ce.k)(t[0])?t[0]:t,null).pipe((0,Ee.U)(t=>e(...t)))}return Ae(t,null)}function Ae(t,e){return new we.y(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=(0,be.D)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}let De=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}setProperty(t,e){this._renderer.setProperty(this._elementRef.nativeElement,t,e)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t}),t})(),Ie=(()=>{class t extends De{}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();const xe=new r.OlP("NgValueAccessor"),ke={provide:xe,useExisting:(0,r.Gpc)(()=>Fe),multi:!0},Oe=new r.OlP("CompositionEventMode");let Fe=(()=>{class t extends De{constructor(t,e,n){super(t,e),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(Oe,8))},t.\u0275dir=r.lG2({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.NdJ("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r._Bn([ke]),r.qOj]}),t})();function Pe(t){return null==t||0===t.length}function Ne(t){return null!=t&&"number"==typeof t.length}const Re=new r.OlP("NgValidators"),Le=new r.OlP("NgAsyncValidators"),Me=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class qe{static min(t){return Ue(t)}static max(t){return function(t){return e=>{if(Pe(e.value)||Pe(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(t)}static required(t){return Be(t)}static requiredTrue(t){return function(t){return!0===t.value?null:{required:!0}}(t)}static email(t){return function(t){return Pe(t.value)||Me.test(t.value)?null:{email:!0}}(t)}static minLength(t){return function(t){return e=>Pe(e.value)||!Ne(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static maxLength(t){return function(t){return e=>Ne(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static pattern(t){return function(t){if(!t)return je;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(Pe(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return Ye(t)}static composeAsync(t){return $e(t)}}function Ue(t){return e=>{if(Pe(e.value)||Pe(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function Be(t){return Pe(t.value)?{required:!0}:null}function je(t){return null}function Ve(t){return null!=t}function Ge(t){const e=(0,r.QGY)(t)?(0,be.D)(t):t;return(0,r.CqO)(e),e}function Ze(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function ze(t,e){return e.map(e=>e(t))}function He(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function Ye(t){if(!t)return null;const e=t.filter(Ve);return 0==e.length?null:function(t){return Ze(ze(t,e))}}function We(t){return null!=t?Ye(He(t)):null}function $e(t){if(!t)return null;const e=t.filter(Ve);return 0==e.length?null:function(t){return Te(ze(t,e).map(Ge)).pipe((0,Ee.U)(Ze))}}function Qe(t){return null!=t?$e(He(t)):null}function Ke(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}let Je=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=We(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Qe(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t}),t})(),Xe=(()=>{class t extends Je{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();class tn extends Je{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class en{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}let nn=(()=>{class t extends en{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(tn,2))},t.\u0275dir=r.lG2({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.ekj("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.qOj]}),t})(),rn=(()=>{class t extends en{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Xe,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.ekj("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.qOj]}),t})();function on(t,e){an(t,e),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&un(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&un(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function sn(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function an(t,e){const n=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(Ke(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(Ke(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();sn(e._rawValidators,i),sn(e._rawAsyncValidators,i)}function un(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function cn(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ln="VALID",hn="INVALID",dn="PENDING",fn="DISABLED";function pn(t){return(vn(t)?t.validators:t)||null}function gn(t){return Array.isArray(t)?We(t):t||null}function mn(t,e){return(vn(e)?e.asyncValidators:t)||null}function yn(t){return Array.isArray(t)?Qe(t):t||null}function vn(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class _n{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=gn(this._rawValidators),this._composedAsyncValidatorFn=yn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===ln}get invalid(){return this.status===hn}get pending(){return this.status==dn}get disabled(){return this.status===fn}get enabled(){return this.status!==fn}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=gn(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=yn(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=dn,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=fn,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ln,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==ln&&this.status!==dn||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?fn:ln}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=dn,this._hasOwnPendingAsyncValidator=!0;const e=Ge(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof wn?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof Cn&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.vpe,this.statusChanges=new r.vpe}_calculateStatus(){return this._allControlsDisabled()?fn:this.errors?hn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(dn)?dn:this._anyControlsHaveStatus(hn)?hn:ln}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){vn(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class bn extends _n{constructor(t=null,e,n){super(pn(e),mn(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){cn(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){cn(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class wn extends _n{constructor(t,e,n){super(pn(e),mn(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof bn?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Cn extends _n{constructor(t,e,n){super(pn(e),mn(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof bn?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const En={provide:Xe,useExisting:(0,r.Gpc)(()=>Tn)},Sn=(()=>Promise.resolve(null))();let Tn=(()=>{class t extends Xe{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new r.vpe,this.form=new wn({},We(t),Qe(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Sn.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),on(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Sn.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),cn(this._directives,t)})}addFormGroup(t){Sn.then(()=>{const e=this._findContainer(t.path),n=new wn({});(function(t,e){an(t,e)})(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Sn.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){Sn.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,e=this._directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Re,10),r.Y36(Le,10))},t.\u0275dir=r.lG2({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&r.NdJ("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r._Bn([En]),r.qOj]}),t})();const An={provide:tn,useExisting:(0,r.Gpc)(()=>In)},Dn=(()=>Promise.resolve(null))();let In=(()=>{class t extends tn{constructor(t,e,n,i){super(),this.control=new bn,this._registered=!1,this.update=new r.vpe,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===Fe?n=t:Object.getPrototypeOf(t.constructor)===Ie?r=t:i=t}),i||r||n||null}(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){on(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Dn.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;Dn.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Xe,9),r.Y36(Re,10),r.Y36(Le,10),r.Y36(xe,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r._Bn([An]),r.qOj,r.TTD]}),t})(),xn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const kn={provide:xe,useExisting:(0,r.Gpc)(()=>On),multi:!0};let On=(()=>{class t extends Ie{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.NdJ("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r._Bn([kn]),r.qOj]}),t})(),Fn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();const Pn={provide:xe,useExisting:(0,r.Gpc)(()=>Rn),multi:!0};function Nn(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let Rn=(()=>{class t extends Ie{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this.setProperty("selectedIndex",-1);const n=Nn(e,t);this.setProperty("value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.NdJ("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([Pn]),r.qOj]}),t})(),Ln=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(Nn(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(Rn,9))},t.\u0275dir=r.lG2({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const Mn={provide:xe,useExisting:(0,r.Gpc)(()=>Un),multi:!0};function qn(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let Un=(()=>{class t extends Ie{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.NdJ("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([Mn]),r.qOj]}),t})(),Bn=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(qn(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(qn(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(Un,9))},t.\u0275dir=r.lG2({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})(),jn=(()=>{class t{constructor(){this._validator=je}handleChanges(t){if(this.inputName in t){const e=this.normalizeInput(t[this.inputName].currentValue);this._validator=this.createValidator(e),this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t}),t})();const Vn={provide:Re,useExisting:(0,r.Gpc)(()=>Gn),multi:!0};let Gn=(()=>{class t extends jn{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>parseFloat(t),this.createValidator=t=>Ue(t)}ngOnChanges(t){this.handleChanges(t)}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,e){if(2&t){let t;r.uIk("min",null!==(t=e.min)&&void 0!==t?t:null)}},inputs:{min:"min"},features:[r._Bn([Vn]),r.qOj,r.TTD]}),t})();const Zn={provide:Re,useExisting:(0,r.Gpc)(()=>zn),multi:!0};let zn=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?Be(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&r.uIk("required",e.required?"":null)},inputs:{required:"required"},features:[r._Bn([Zn])]}),t})(),Hn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Fn]]}),t})(),Yn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[Hn]}),t})();function Wn(t){return null!=t}function $n(t){try{const e=new Date(t);return!isNaN(e.getTime())}catch(VO){return!1}}function Qn(t){try{if(t._d instanceof Date){const e=t._d,n=+e.getMonth()+1,r=+e.getDate();return`${e.getFullYear()}-${Kn(n)}-${Kn(r)}`}if("object"==typeof t&&null!=t.year&&null!=t.month&&null!=t.day){const e=+t.day;return`${t.year}-${Kn(+t.month)}-${Kn(e)}`}}catch(VO){}return t}function Kn(t){return t<10?`0${t}`:t}const Jn=t=>e=>{if(Wn(qe.required(e)))return null;const n=e.value;return Array.isArray(n)&&n.length>=+t?null:{arrayLength:{minLength:t}}},Xn={provide:Re,useExisting:(0,r.Gpc)(()=>tr),multi:!0};let tr=(()=>{class t{ngOnInit(){this.validator=Jn(this.arrayLength)}ngOnChanges(t){for(const e in t)"arrayLength"===e&&(this.validator=Jn(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","arrayLength","","formControlName",""],["","arrayLength","","formControl",""],["","arrayLength","","ngModel",""]],inputs:{arrayLength:"arrayLength"},features:[r._Bn([Xn]),r.TTD]}),t})();const er={provide:Re,useExisting:(0,r.Gpc)(()=>nr),multi:!0};let nr=(()=>{class t{validate(t){return Wn(qe.required(e=t))||/^(?:[A-Z0-9+\/]{4})*(?:[A-Z0-9+\/]{2}==|[A-Z0-9+\/]{3}=|[A-Z0-9+\/]{4})$/i.test(e.value)?null:{base64:!0};var e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","base64","","formControlName",""],["","base64","","formControl",""],["","base64","","ngModel",""]],features:[r._Bn([er])]}),t})();const rr={provide:Re,useExisting:(0,r.Gpc)(()=>ir),multi:!0};let ir=(()=>{class t{validate(t){return(t=>{if(Wn(qe.required(t)))return null;const e=t.value.replace(/[^0-9]+/g,"");if(!/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11}|(?:9792)\d{12})$/.test(e))return{creditCard:!0};let n,r,i,o=0;for(let s=e.length-1;s>=0;s--)n=e.substring(s,s+1),r=parseInt(n,10),i?(r*=2,o+=r>=10?r%10+1:r):o+=r,i=!i;return Boolean(o%10==0&&e)?null:{creditCard:!0}})(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","creditCard","","formControlName",""],["","creditCard","","formControl",""],["","creditCard","","ngModel",""]],features:[r._Bn([rr])]}),t})();const or={provide:Re,useExisting:(0,r.Gpc)(()=>sr),multi:!0};let sr=(()=>{class t{validate(t){return Wn(qe.required(e=t))||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e.value)?null:{dateISO:!0};var e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","dateISO","","formControlName",""],["","dateISO","","formControl",""],["","dateISO","","ngModel",""]],features:[r._Bn([or])]}),t})();const ar={provide:Re,useExisting:(0,r.Gpc)(()=>ur),multi:!0};let ur=(()=>{class t{validate(t){return(t=>{if(Wn(qe.required(t)))return null;let e=t.value;return e=Qn(e),$n(e)?null:{date:!0}})(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","date","","formControlName",""],["","date","","formControl",""],["","date","","ngModel",""]],features:[r._Bn([ar])]}),t})();const cr={provide:Re,useExisting:(0,r.Gpc)(()=>lr),multi:!0};let lr=(()=>{class t{validate(t){return Wn(qe.required(e=t))||/^\d+$/.test(e.value)?null:{digits:!0};var e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","digits","","formControlName",""],["","digits","","formControl",""],["","digits","","ngModel",""]],features:[r._Bn([cr])]}),t})();const hr={provide:Re,useExisting:(0,r.Gpc)(()=>dr),multi:!0};let dr=(()=>{class t{validate(t){return Wn(qe.required(e=t))||/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.value)?null:{email:!0};var e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","ngvemail","","formControlName",""],["","ngvemail","","formControl",""],["","ngvemail","","ngModel",""]],features:[r._Bn([hr])]}),t})();const fr={provide:Re,useExisting:(0,r.Gpc)(()=>pr),multi:!0};let pr=(()=>{class t{ngOnInit(){this.validator=(t=>{let e=!1;return n=>(e||(e=!0,t.valueChanges.subscribe(()=>{n.updateValueAndValidity()})),t.value===n.value?null:{equalTo:{control:t,value:t.value}})})(this.equalTo)}validate(t){return this.validator(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","equalTo","","formControlName",""],["","equalTo","","formControl",""],["","equalTo","","ngModel",""]],inputs:{equalTo:"equalTo"},features:[r._Bn([fr])]}),t})();const gr=t=>e=>Wn(qe.required(e))||t===e.value?null:{equal:{value:t}},mr={provide:Re,useExisting:(0,r.Gpc)(()=>yr),multi:!0};let yr=(()=>{class t{ngOnInit(){this.validator=gr(this.equal)}ngOnChanges(t){for(const e in t)"equal"===e&&(this.validator=gr(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","equal","","formControlName",""],["","equal","","formControl",""],["","equal","","ngModel",""]],inputs:{equal:"equal"},features:[r._Bn([mr]),r.TTD]}),t})();const vr=t=>e=>Wn(t)?Wn(qe.required(e))||+e.value>=+t?null:{gte:{value:t}}:null,_r={provide:Re,useExisting:(0,r.Gpc)(()=>br),multi:!0};let br=(()=>{class t{ngOnInit(){this.validator=vr(this.gte)}ngOnChanges(t){for(const e in t)"gte"===e&&(this.validator=vr(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","gte","","formControlName",""],["","gte","","formControl",""],["","gte","","ngModel",""]],inputs:{gte:"gte"},features:[r._Bn([_r]),r.TTD]}),t})();const wr=t=>e=>Wn(t)?Wn(qe.required(e))||+e.value>+t?null:{gt:{value:t}}:null,Cr={provide:Re,useExisting:(0,r.Gpc)(()=>Er),multi:!0};let Er=(()=>{class t{ngOnInit(){this.validator=wr(this.gt)}ngOnChanges(t){for(const e in t)"gt"===e&&(this.validator=wr(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","gt","","formControlName",""],["","gt","","formControl",""],["","gt","","ngModel",""]],inputs:{gt:"gt"},features:[r._Bn([Cr]),r.TTD]}),t})();const Sr=t=>e=>Wn(t)?Wn(qe.required(e))?null:t.indexOf(e.value)<0?{includedIn:{value:e.value,reason:t}}:null:null,Tr={provide:Re,useExisting:(0,r.Gpc)(()=>Ar),multi:!0};let Ar=(()=>{class t{ngOnInit(){this.validator=Sr(this.includedIn)}ngOnChanges(t){for(const e in t)"includedIn"===e&&(this.validator=Sr(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","includedIn","","formControlName",""],["","includedIn","","formControl",""],["","includedIn","","ngModel",""]],inputs:{includedIn:"includedIn"},features:[r._Bn([Tr]),r.TTD]}),t})();const Dr={provide:Re,useExisting:(0,r.Gpc)(()=>Ir),multi:!0};let Ir=(()=>{class t{validate(t){return(t=>{if(Wn(qe.required(t)))return null;const e=t.value;try{const t=JSON.parse(e);if(Boolean(t)&&"object"==typeof t)return null}catch(VO){}return{json:!0}})(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","json","","formControlName",""],["","json","","formControl",""],["","json","","ngModel",""]],features:[r._Bn([Dr])]}),t})();const xr=t=>e=>Wn(t)?Wn(qe.required(e))||+e.value<=+t?null:{lte:{value:t}}:null,kr={provide:Re,useExisting:(0,r.Gpc)(()=>Or),multi:!0};let Or=(()=>{class t{ngOnInit(){this.validator=xr(this.lte)}ngOnChanges(t){for(const e in t)"lte"===e&&(this.validator=xr(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","lte","","formControlName",""],["","lte","","formControl",""],["","lte","","ngModel",""]],inputs:{lte:"lte"},features:[r._Bn([kr]),r.TTD]}),t})();const Fr=t=>e=>Wn(t)?Wn(qe.required(e))||+e.value<+t?null:{lt:{value:t}}:null,Pr={provide:Re,useExisting:(0,r.Gpc)(()=>Nr),multi:!0};let Nr=(()=>{class t{ngOnInit(){this.validator=Fr(this.lt)}ngOnChanges(t){for(const e in t)"lt"===e&&(this.validator=Fr(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","lt","","formControlName",""],["","lt","","formControl",""],["","lt","","ngModel",""]],inputs:{lt:"lt"},features:[r._Bn([Pr]),r.TTD]}),t})();const Rr=t=>{let e,n=!1,r=t;const i=t instanceof bn||t instanceof In;return o=>{if(!n&&i&&(n=!0,t.valueChanges.subscribe(()=>{o.updateValueAndValidity()})),i&&(r=t.value),e=Qn(r),!($n(e)||e instanceof Function)){if(null==e)return null;if(i)return{maxDate:{error:"maxDate is invalid"}};throw Error("maxDate value must be or return a formatted date")}if(Wn(qe.required(o)))return null;const s=new Date(Qn(o.value)).getTime();return $n(s)?(e instanceof Function&&(e=e()),s<=new Date(e).getTime()?null:i?{maxDate:{control:t,value:t.value}}:{maxDate:{value:r,control:void 0}}):{value:!0}}},Lr={provide:Re,useExisting:(0,r.Gpc)(()=>Mr),multi:!0};let Mr=(()=>{class t{ngOnInit(){this.validator=Rr(this.maxDate)}ngOnChanges(t){for(const e in t)"maxDate"===e&&(this.validator=Rr(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","maxDate","","formControlName",""],["","maxDate","","formControl",""],["","maxDate","","ngModel",""]],inputs:{maxDate:"maxDate"},features:[r._Bn([Lr]),r.TTD]}),t})();const qr=t=>e=>Wn(t)?Wn(qe.required(e))||+e.value<=+t?null:{max:{value:t}}:null,Ur={provide:Re,useExisting:(0,r.Gpc)(()=>Br),multi:!0};let Br=(()=>{class t{ngOnInit(){this.validator=qr(this.max)}ngOnChanges(t){for(const e in t)"max"===e&&(this.validator=qr(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","max","","formControlName",""],["","max","","formControl",""],["","max","","ngModel",""]],inputs:{max:"max"},features:[r._Bn([Ur]),r.TTD]}),t})();const jr=t=>{let e,n=!1,r=t;const i=t instanceof bn||t instanceof In;return o=>{if(!n&&i&&(n=!0,t.valueChanges.subscribe(()=>{o.updateValueAndValidity()})),i&&(r=t.value),e=Qn(r),!($n(e)||e instanceof Function)){if(null==e)return null;if(i)return{minDate:{error:"minDate is invalid"}};throw Error("minDate value must be or return a formatted date")}if(Wn(qe.required(o)))return null;const s=new Date(Qn(o.value)).getTime();return $n(s)?(e instanceof Function&&(e=e()),s>=new Date(e).getTime()?null:i?{minDate:{control:t,value:t.value}}:{minDate:{value:r,control:void 0}}):{value:!0}}},Vr={provide:Re,useExisting:(0,r.Gpc)(()=>Gr),multi:!0};let Gr=(()=>{class t{ngOnInit(){this.validator=jr(this.minDate)}ngOnChanges(t){for(const e in t)"minDate"===e&&(this.validator=jr(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","minDate","","formControlName",""],["","minDate","","formControl",""],["","minDate","","ngModel",""]],inputs:{minDate:"minDate"},features:[r._Bn([Vr]),r.TTD]}),t})();const Zr=t=>e=>Wn(t)?Wn(qe.required(e))||+e.value>=+t?null:{min:{value:t}}:null,zr={provide:Re,useExisting:(0,r.Gpc)(()=>Hr),multi:!0};let Hr=(()=>{class t{ngOnInit(){this.validator=Zr(this.min)}ngOnChanges(t){for(const e in t)"min"===e&&(this.validator=Zr(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","min","","formControlName",""],["","min","","formControl",""],["","min","","ngModel",""]],inputs:{min:"min"},features:[r._Bn([zr]),r.TTD]}),t})();const Yr={provide:Re,useExisting:(0,r.Gpc)(()=>Wr),multi:!0};let Wr=(()=>{class t{ngOnInit(){this.validator=(t=>{let e=!1;return n=>{e||(e=!0,t.valueChanges.subscribe(()=>{n.updateValueAndValidity()}));const r=n.value;return null==t.value&&null==r||t.value!==r?null:{notEqualTo:{control:t,value:t.value}}}})(this.notEqualTo)}validate(t){return this.validator(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","notEqualTo","","formControlName",""],["","notEqualTo","","formControl",""],["","notEqualTo","","ngModel",""]],inputs:{notEqualTo:"notEqualTo"},features:[r._Bn([Yr])]}),t})();const $r=t=>e=>Wn(qe.required(e))||t!==e.value?null:{notEqual:{value:t}},Qr={provide:Re,useExisting:(0,r.Gpc)(()=>Kr),multi:!0};let Kr=(()=>{class t{ngOnInit(){this.validator=$r(this.notEqual)}ngOnChanges(t){for(const e in t)"notEqual"===e&&(this.validator=$r(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","notEqual","","formControlName",""],["","notEqual","","formControl",""],["","notEqual","","ngModel",""]],inputs:{notEqual:"notEqual"},features:[r._Bn([Qr]),r.TTD]}),t})();const Jr=t=>e=>Wn(t)?Wn(qe.required(e))?null:t.indexOf(e.value)>=0?{notIncludedIn:{value:e.value,reason:t}}:null:null,Xr={provide:Re,useExisting:(0,r.Gpc)(()=>ti),multi:!0};let ti=(()=>{class t{ngOnInit(){this.validator=Jr(this.notIncludedIn)}ngOnChanges(t){for(const e in t)"notIncludedIn"===e&&(this.validator=Jr(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","notIncludedIn","","formControlName",""],["","notIncludedIn","","formControl",""],["","notIncludedIn","","ngModel",""]],inputs:{notIncludedIn:"notIncludedIn"},features:[r._Bn([Xr]),r.TTD]}),t})();const ei=t=>{if(!Wn(t))return t=>null;const e=qe.pattern(t);return n=>Wn(qe.required(n))||e(n)?null:{notMatching:{value:n.value,reason:t}}},ni={provide:Re,useExisting:(0,r.Gpc)(()=>ri),multi:!0};let ri=(()=>{class t{ngOnInit(){this.validator=ei(this.notMatching)}ngOnChanges(t){for(const e in t)"notMatching"===e&&(this.validator=ei(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","notMatching","","formControlName",""],["","notMatching","","formControl",""],["","notMatching","","ngModel",""]],inputs:{notMatching:"notMatching"},features:[r._Bn([ni]),r.TTD]}),t})();const ii={provide:Re,useExisting:(0,r.Gpc)(()=>oi),multi:!0};let oi=(()=>{class t{validate(t){return Wn(qe.required(e=t))||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e.value)?null:{number:!0};var e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","number","","formControlName",""],["","number","","formControl",""],["","number","","ngModel",""]],features:[r._Bn([ii])]}),t})();const si=t=>e=>{if(Wn(qe.required(e)))return null;const n=t.split(","),r=e.value;let i=!0;for(const t of n)if(null==r[t]){i=!1;break}return i?null:{hasProperty:{value:t}}},ai={provide:Re,useExisting:(0,r.Gpc)(()=>ui),multi:!0};let ui=(()=>{class t{ngOnInit(){this.validator=si(this.property)}ngOnChanges(t){for(const e in t)"property"===e&&(this.validator=si(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","property","","formControlName",""],["","property","","formControl",""],["","property","","ngModel",""]],inputs:{property:"property"},features:[r._Bn([ai]),r.TTD]}),t})();const ci=t=>e=>{if(!Wn(t))return null;if(Wn(qe.required(e)))return null;const n=e.value;return n.length>=t[0]&&n.length<=t[1]?null:{rangeLength:{value:t}}},li={provide:Re,useExisting:(0,r.Gpc)(()=>hi),multi:!0};let hi=(()=>{class t{ngOnInit(){this.validator=ci(this.rangeLength)}ngOnChanges(t){for(const e in t)"rangeLength"===e&&(this.validator=ci(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","rangeLength","","formControlName",""],["","rangeLength","","formControl",""],["","rangeLength","","ngModel",""]],inputs:{rangeLength:"rangeLength"},features:[r._Bn([li]),r.TTD]}),t})();const di=t=>e=>{if(!Wn(t))return null;if(Wn(qe.required(e)))return null;const n=+e.value;return n>=t[0]&&n<=t[1]?null:{range:{value:t}}},fi={provide:Re,useExisting:(0,r.Gpc)(()=>pi),multi:!0};let pi=(()=>{class t{ngOnInit(){this.validator=di(this.range)}ngOnChanges(t){for(const e in t)"range"===e&&(this.validator=di(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","range","","formControlName",""],["","range","","formControl",""],["","range","","ngModel",""]],inputs:{range:"range"},features:[r._Bn([fi]),r.TTD]}),t})();const gi={provide:Re,useExisting:(0,r.Gpc)(()=>mi),multi:!0};let mi=(()=>{class t{validate(t){return Wn(qe.required(e=t))||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e.value)?null:{url:!0};var e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","url","","formControlName",""],["","url","","formControl",""],["","url","","ngModel",""]],features:[r._Bn([gi])]}),t})();const yi={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i},vi=t=>e=>{if(Wn(qe.required(e)))return null;const n=e.value;return new RegExp(yi[t]||yi.all).test(n)?null:{uuid:!0}},_i={provide:Re,useExisting:(0,r.Gpc)(()=>bi),multi:!0};let bi=(()=>{class t{ngOnInit(){this.validator=vi(this.uuid)}ngOnChanges(t){for(const e in t)"uuid"===e&&(this.validator=vi(t[e].currentValue),this.onChange&&this.onChange())}validate(t){return this.validator(t)}registerOnValidatorChange(t){this.onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","uuid","","formControlName",""],["","uuid","","formControl",""],["","uuid","","ngModel",""]],inputs:{uuid:"uuid"},features:[r._Bn([_i]),r.TTD]}),t})(),wi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();function Ci(t,e,n,r,i,o,s){try{var a=t[o](s),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(r,i)}function Ei(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function s(t){Ci(o,r,i,s,a,"next",t)}function a(t){Ci(o,r,i,s,a,"throw",t)}s(void 0)})}}var Si=n(1858),Ti=n(6882);function Ai(t,e){return"function"==typeof e?n=>n.pipe(Ai((n,r)=>(0,be.D)(t(n,r)).pipe((0,Ee.U)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Di(t))}class Di{constructor(t){this.project=t}call(t,e){return e.subscribe(new Ii(t,this.project))}}class Ii extends Ti.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new Ti.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,Ti.ft)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}var xi=n(878),ki=n(8569),Oi=n(1906),Fi=n(1055),Pi=n(6673);function Ni(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Ri(t,e,n))}}class Ri{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Li(t,this.accumulator,this.seed,this.hasSeed))}}class Li extends Pi.L{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Mi(t,e){return n=>n.lift(new qi(t,e))}class qi{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Ui(t,this.compare,this.keySelector))}}class Ui extends Pi.L{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}class Bi extends Pi.L{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class ji extends Pi.L{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Vi=n(6015);function Gi(t,e,n,r,i=new ji(t,n,r)){if(!i.closed)return e instanceof we.y?e.subscribe(i):(0,Vi.s)(e)(i)}function Zi(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new zi(t,n))}}class zi{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new Hi(t,this.observables,this.project))}}class Hi extends Bi{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(Gi(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class Yi{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new Wi(t,this.predicate))}}class Wi extends Pi.L{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}var $i=n(2346),Qi=(n(2107),n(5959)),Ki=n(45),Ji=n(8489),Xi=n(7570),to=n(3895),eo=n(9291);class no extends Qi.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new ro(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new to.N;if(this.isStopped||this.hasError?o=Xi.w.EMPTY:(this.observers.push(t),o=new eo.W(this,t)),r&&t.add(t=new Ki.ht(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||Ji.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class ro{constructor(t,e){this.time=t,this.value=e}}function io(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new no(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}const oo=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function so(t,e){return function(n){return n.lift(new ao(t,e))}}class ao{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new uo(t,this.predicate,this.thisArg))}}class uo extends Pi.L{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const co=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var lo=n(653);function ho(t){return e=>0===t?(0,lo.c)():e.lift(new fo(t))}class fo{constructor(t){if(this.total=t,this.total<0)throw new co}call(t,e){return e.subscribe(new po(t,this.total))}}class po extends Pi.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function go(t=null){return e=>e.lift(new mo(t))}class mo{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new yo(t,this.defaultValue))}}class yo extends Pi.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function vo(t=wo){return e=>e.lift(new _o(t))}class _o{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new bo(t,this.errorFactory))}}class bo extends Pi.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(VO){t=VO}this.destination.error(t)}}}function wo(){return new oo}var Co=n(3392);function Eo(t,e){const n=arguments.length>=2;return r=>r.pipe(t?so((e,n)=>t(e,n,r)):Co.y,ho(1),n?go(e):vo(()=>new oo))}function So(t,e){return e?Ai(()=>t,e):Ai(()=>t)}var To=n(3482);const Ao=new r.OlP("angularfire2.auth.use-emulator"),Do=new r.OlP("angularfire2.auth.settings"),Io=new r.OlP("angularfire2.auth.tenant-id"),xo=new r.OlP("angularfire2.auth.langugage-code"),ko=new r.OlP("angularfire2.auth.use-device-language"),Oo=new r.OlP("angularfire.auth.persistence");let Fo=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new $i.HU(i),d=(0,$i.ss)(h),f=new Qi.xQ,p=(0,xi.of)(void 0).pipe((0,Ki.QV)(h.outsideAngular),Ai(()=>i.runOutsideAngular(()=>n.e(420).then(n.bind(n,7420)))),(0,Ee.U)(()=>(0,$i.on)(t,i,e)),(0,Ee.U)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return(0,$i.sI)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());if(e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n)for(const[t,e]of Object.entries(n))r.settings[t]=e;return l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),io({bufferSize:1,refCount:!1}));if(Pt(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,xi.of)(null);else{p.pipe(Eo()).subscribe();const t=p.pipe(Ai(t=>t.getRedirectResult().then(t=>t,()=>null)),d,io({bufferSize:1,refCount:!1})),e=t=>new we.y(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(Ai(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(Ai(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(So(n),(0,To.R)(h.outsideAngular),(0,Ki.QV)(h.insideAngular)),this.user=t.pipe(So(r),(0,To.R)(h.outsideAngular),(0,Ki.QV)(h.insideAngular)),this.idToken=this.user.pipe(Ai(t=>t?(0,be.D)(t.getIdToken()):(0,xi.of)(null))),this.idTokenResult=this.user.pipe(Ai(t=>t?(0,be.D)(t.getIdTokenResult()):(0,xi.of)(null))),this.credential=(0,Oi.T)(t,f,this.authState.pipe(so(t=>!t))).pipe((0,Ee.U)(t=>(null==t?void 0:t.user)?t:null),(0,To.R)(h.outsideAngular),(0,Ki.QV)(h.insideAngular))}return(0,$i.pX)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>f.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG($i.Dh),r.LFG($i.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(Ao,8),r.LFG(Do,8),r.LFG(Io,8),r.LFG(xo,8),r.LFG(ko,8),r.LFG(Oo,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG($i.Dh),r.LFG($i.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(Ao,8),r.LFG(Do,8),r.LFG(Io,8),r.LFG(xo,8),r.LFG(ko,8),r.LFG(Oo,8))},token:t,providedIn:"any"}),t})();function Po(t){return null==t}function No(t){return"function"==typeof t.set}function Ro(t,e){return No(e)?e:t.ref(e)}function Lo(t,e){if("string"==typeof t)return e.stringCase();if(No(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function Mo(t,e,n="on",r=ki.z){return new we.y(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe((0,Ee.U)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),(0,Fi.B)())}function qo(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function Uo(t,e){const{payload:n,prevKey:r,key:i}=e,o=qo(t,i),s=function(t,e){if(Po(e))return 0;{const n=qo(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function Bo(t){return(Po(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function jo(t,e,n){return function(t,e,n){return Mo(t,"value","once",n).pipe(Ai(r=>{const i=[(0,xi.of)(r)];return e.forEach(e=>i.push(Mo(t,e,"on",n))),(0,Oi.T)(...i).pipe(Ni(Uo,[]))}),Mi())}(t,e=Bo(e),n)}function Vo(t,e,n){const r=(e=Bo(e)).map(e=>Mo(t,e,"on",n));return(0,Oi.T)(...r)}function Go(t,e){return function(n,r){return Lo(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function Zo(t,e){return function(){return Mo(t,"value","on",e)}}(0,$i.GT)(Fo,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);const zo=new r.OlP("angularfire2.realtimeDatabaseURL"),Ho=new r.OlP("angularfire2.database.use-emulator");let Yo=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new $i.HU(i),this.keepUnstableUntilFirst=(0,$i.ss)(this.schedulers);const a=o,u=(0,$i.on)(t,i,e);!Si.Z.auth&&s&&(0,$i.yq)(),this.database=(0,$i.sI)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>Ro(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:Go(r,"update"),set:Go(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?Lo(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>jo(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>Vo(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return Mo(t,"value","on",e).pipe((0,Ee.U)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(Zi(e),(0,Ee.U)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new Yi(r))),(0,Ee.U)(t=>t.actions));var r}(t,Vo(t,e).pipe(Ni((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>jo(t,r,n).pipe((0,Ee.U)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){return e=this.schedulers.ngZone.runOutsideAngular(()=>Ro(this.database,t)),n=this,{query:e,snapshotChanges:()=>Zo(e,n.schedulers.outsideAngular)().pipe(n.keepUnstableUntilFirst),update:t=>e.ref.update(t),set:t=>e.ref.set(t),remove:()=>e.ref.remove(),valueChanges:()=>Zo(e,n.schedulers.outsideAngular)().pipe(n.keepUnstableUntilFirst,(0,Ee.U)(t=>t.payload.exists()?t.payload.val():null))};var e,n}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.LFG($i.Dh),r.LFG($i.xv,8),r.LFG(zo,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(Ho,8),r.LFG(Ao,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG($i.Dh),r.LFG($i.xv,8),r.LFG(zo,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(Ho,8),r.LFG(Ao,8))},token:t,providedIn:"any"}),t})(),Wo=(()=>{class t{constructor(t){this.db=t}save(t){this.db.object("/users/"+t.uid).update({name:t.displayName,email:t.email})}get(t){return this.db.object("/users/"+t).valueChanges()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Yo))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class $o extends Qi.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new to.N;return this._value}next(t){super.next(this._value=t)}}var Qo=n(6163),Ko=n(9342);const Jo={};class Xo{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new ts(t,this.resultSelector))}}class ts extends Bi{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Jo),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Gi(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===Jo?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}var es=n(7471);function ns(...t){return(0,es.J)(1)((0,xi.of)(...t))}function rs(t){return new we.y(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?(0,be.D)(n):(0,lo.c)()).subscribe(e)})}var is=n(2875);function os(...t){const e=t[t.length-1];return(0,Qo.K)(e)?(t.pop(),n=>ns(t,n,e)):e=>ns(t,e)}function ss(t){return function(e){const n=new as(t),r=e.lift(n);return n.caught=r}}class as{constructor(t){this.selector=t}call(t,e){return e.subscribe(new us(t,this.selector,this.caught))}}class us extends Ti.Ds{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new Ti.IY(this);this.add(r);const i=(0,Ti.ft)(n,r);i!==r&&this.add(i)}}}var cs=n(3982);function ls(t,e){return(0,cs.zg)(t,e,1)}function hs(t){return function(e){return 0===t?(0,lo.c)():e.lift(new ds(t))}}class ds{constructor(t){if(this.total=t,this.total<0)throw new co}call(t,e){return e.subscribe(new fs(t,this.total))}}class fs extends Pi.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}var ps=n(4019),gs=n(1564);function ms(t){return e=>e.lift(new ys(t))}class ys{constructor(t){this.callback=t}call(t,e){return e.subscribe(new vs(t,this.callback))}}class vs extends Pi.L{constructor(t,e){super(t),this.add(new Xi.w(e))}}class _s{constructor(t,e){this.id=t,this.url=e}}class bs extends _s{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ws extends _s{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Cs extends _s{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Es extends _s{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ss extends _s{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ts extends _s{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class As extends _s{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ds extends _s{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Is extends _s{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xs{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ks{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Os{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fs{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ps{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ns{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rs{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ls="primary";class Ms{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function qs(t){return new Ms(t)}function Us(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Bs(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function js(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Vs(t[i],e[i]))return!1;return!0}function Vs(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Gs(t){return Array.prototype.concat.apply([],t)}function Zs(t){return t.length>0?t[t.length-1]:null}function zs(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Hs(t){return(0,r.CqO)(t)?t:(0,r.QGY)(t)?(0,be.D)(Promise.resolve(t)):(0,xi.of)(t)}const Ys={exact:function t(e,n,r){if(!na(e.segments,n.segments))return!1;if(!Js(e.segments,n.segments,r))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i],r))return!1}return!0},subset:Qs},Ws={exact:function(t,e){return js(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Vs(t[n],e[n]))},ignored:()=>!0};function $s(t,e,n){return Ys[n.paths](t.root,e.root,n.matrixParams)&&Ws[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function Qs(t,e,n){return Ks(t,e,e.segments,n)}function Ks(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!!na(i,n)&&!e.hasChildren()&&!!Js(i,n,r)}if(t.segments.length===n.length){if(!na(t.segments,n))return!1;if(!Js(t.segments,n,r))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Qs(t.children[n],e.children[n],r))return!1}return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!na(t.segments,i)&&!!Js(t.segments,i,r)&&!!t.children.primary&&Ks(t.children.primary,e,o,r)}}function Js(t,e,n){return e.every((e,r)=>Ws[n](t[r].parameters,e.parameters))}class Xs{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qs(this.queryParams)),this._queryParamMap}toString(){return oa.serialize(this)}}class ta{constructor(t,e){this.segments=t,this.children=e,this.parent=null,zs(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return sa(this)}}class ea{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=qs(this.parameters)),this._parameterMap}toString(){return fa(this)}}function na(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class ra{}class ia{parse(t){const e=new va(t);return new Xs(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${aa(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${ca(e)}=${ca(t)}`).join("&"):`${ca(e)}=${ca(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const oa=new ia;function sa(t){return t.segments.map(t=>fa(t)).join("/")}function aa(t,e){if(!t.hasChildren())return sa(t);if(e){const e=t.children.primary?aa(t.children.primary,!1):"",n=[];return zs(t.children,(t,e)=>{e!==Ls&&n.push(`${e}:${aa(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return zs(t.children,(t,r)=>{r===Ls&&(n=n.concat(e(t,r)))}),zs(t.children,(t,r)=>{r!==Ls&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Ls?[aa(t.children.primary,!1)]:[`${n}:${aa(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${sa(t)}/${e[0]}`:`${sa(t)}/(${e.join("//")})`}}function ua(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ca(t){return ua(t).replace(/%3B/gi,";")}function la(t){return ua(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ha(t){return decodeURIComponent(t)}function da(t){return ha(t.replace(/\+/g,"%20"))}function fa(t){return`${la(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${la(t)}=${la(e[t])}`).join("")}`;var e}const pa=/^[^\/()?;=#]+/;function ga(t){const e=t.match(pa);return e?e[0]:""}const ma=/^[^=?&#]+/,ya=/^[^?&#]+/;class va{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ta([],{}):new ta([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new ta(t,e)),n}parseSegment(){const t=ga(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new ea(ha(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=ga(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=ga(this.remaining);t&&(n=t,this.capture(n))}t[ha(e)]=ha(n)}parseQueryParam(t){const e=function(t){const e=t.match(ma);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(ya);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=da(e),i=da(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=ga(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Ls);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new ta([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class _a{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=ba(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=ba(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=wa(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return wa(t,this._root).map(t=>t.value)}}function ba(t,e){if(t===e.value)return e;for(const n of e.children){const e=ba(t,n);if(e)return e}return null}function wa(t,e){if(t===e.value)return[e];for(const n of e.children){const r=wa(t,n);if(r.length)return r.unshift(e),r}return[]}class Ca{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Ea(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Sa extends _a{constructor(t,e){super(t),this.snapshot=e,ka(this,t)}toString(){return this.snapshot.toString()}}function Ta(t,e){const n=function(t,e){const n=new Ia([],{},{},"",{},Ls,e,null,t.root,-1,{});return new xa("",new Ca(n,[]))}(t,e),r=new $o([new ea("",{})]),i=new $o({}),o=new $o({}),s=new $o({}),a=new $o(""),u=new Aa(r,i,s,a,o,Ls,e,n.root);return u.snapshot=n.root,new Sa(new Ca(u,[]),n)}class Aa{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ee.U)(t=>qs(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ee.U)(t=>qs(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Da(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Ia{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qs(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qs(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class xa extends _a{constructor(t,e){super(e),this.url=t,ka(this,e)}toString(){return Oa(this._root)}}function ka(t,e){e.value._routerState=t,e.children.forEach(e=>ka(t,e))}function Oa(t){const e=t.children.length>0?` { ${t.children.map(Oa).join(", ")} } `:"";return`${t.value}${e}`}function Fa(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,js(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),js(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!js(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),js(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Pa(t,e){return js(t.params,e.params)&&function(t,e){return na(t,e)&&t.every((t,n)=>js(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Pa(t.parent,e.parent))}function Na(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Na(t,e,r);return Na(t,e)})}(t,e,n);return new Ca(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return Ra(e,t),t}}const n=new Aa(new $o((r=e.value).url),new $o(r.params),new $o(r.queryParams),new $o(r.fragment),new $o(r.data),r.outlet,r.component,r),i=e.children.map(e=>Na(t,e));return new Ca(n,i)}var r}function Ra(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Ra(t.children[n],e.children[n])}function La(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Ma(t){return"object"==typeof t&&null!=t&&t.outlets}function qa(t,e,n,r,i){let o={};return r&&zs(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Xs(n.root===t?e:Ua(n.root,t,e),o,i)}function Ua(t,e,n){const r={};return zs(t.children,(t,i)=>{r[i]=t===e?n:Ua(t,e,n)}),new ta(t.segments,r)}class Ba{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&La(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Ma);if(r&&r!==Zs(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ja{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Va(t,e,n){if(t||(t=new ta([],{})),0===t.segments.length&&t.hasChildren())return Ga(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(Ma(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Ya(a,u,e))return o;r+=2}else{if(!Ya(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new ta(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new ta(t.segments.slice(r.pathIndex),t.children),Ga(e,0,i)}return r.match&&0===i.length?new ta(t.segments,{}):r.match&&!t.hasChildren()?Za(t,e,n):r.match?Ga(t,0,i):Za(t,e,n)}function Ga(t,e,n){if(0===n.length)return new ta(t.segments,{});{const r=function(t){return Ma(t[0])?t[0].outlets:{[Ls]:t}}(n),i={};return zs(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Va(t.children[r],e,n))}),zs(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new ta(t.segments,i)}}function Za(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Ma(o)){const t=za(o.outlets);return new ta(r,t)}if(0===i&&La(n[0])){r.push(new ea(t.segments[e].path,Ha(n[0]))),i++;continue}const s=Ma(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&La(a)?(r.push(new ea(s,Ha(a))),i+=2):(r.push(new ea(s,{})),i++)}return new ta(r,{})}function za(t){const e={};return zs(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Za(new ta([],{}),0,t))}),e}function Ha(t){const e={};return zs(t,(t,n)=>e[n]=`${t}`),e}function Ya(t,e,n){return t==n.path&&js(e,n.parameters)}class Wa{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Fa(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Ea(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),zs(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=Ea(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=Ea(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Ns(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Fs(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Fa(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),$a(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function $a(t){Fa(t.value),t.children.forEach($a)}class Qa{constructor(t,e){this.routes=t,this.module=e}}function Ka(t){return"function"==typeof t}function Ja(t){return t instanceof Xs}const Xa=Symbol("INITIAL_VALUE");function tu(){return Ai(t=>function(...t){let e,n;return(0,Qo.K)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&(0,Ce.k)(t[0])&&(t=t[0]),(0,Ko.n)(t,n).lift(new Xo(e))}(t.map(t=>t.pipe(ho(1),os(Xa)))).pipe(Ni((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Xa)return t;if(r===Xa&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Ja(r))return r}return t},t)},Xa),so(t=>t!==Xa),(0,Ee.U)(t=>Ja(t)?t:!0===t),ho(1)))}let eu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r._UZ(0,"router-outlet")},directives:function(){return[Ju]},encapsulation:2}),t})();function nu(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];ru(r,iu(e,r))}}function ru(t,e){t.children&&nu(t.children,e)}function iu(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function ou(t){const e=t.children&&t.children.map(ou),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ls&&(n.component=eu),n}function su(t){return t.outlet||Ls}function au(t,e){const n=t.filter(t=>su(t)===e);return n.push(...t.filter(t=>su(t)!==e)),n}const uu={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function cu(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},uu):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Bs)(n,t,e);if(!i)return Object.assign({},uu);const o={};zs(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function lu(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>hu(t,e,n)&&su(n)!==Ls)}(t,n,r)){const i=new ta(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&su(o)!==Ls){const n=new ta([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[su(o)]=n}return i}(t,e,r,new ta(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>hu(t,e,n))}(t,n,r)){const o=new ta(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(hu(t,n,a)&&!i[su(a)]){const n=new ta([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[su(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new ta(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function hu(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function du(t,e,n,r){return!!(su(t)===r||r!==Ls&&hu(e,n,t))&&("**"===t.path||cu(e,t,n).matched)}function fu(t,e,n){return 0===e.length&&!t.children[n]}class pu{constructor(t){this.segmentGroup=t||null}}class gu{constructor(t){this.urlTree=t}}function mu(t){return new we.y(e=>e.error(new pu(t)))}function yu(t){return new we.y(e=>e.error(new gu(t)))}function vu(t){return new we.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class _u{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.h0i)}apply(){const t=lu(this.urlTree.root,[],[],this.config).segmentGroup,e=new ta(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Ls).pipe((0,Ee.U)(t=>this.createUrlTree(bu(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ss(t=>{if(t instanceof gu)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof pu)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Ls).pipe((0,Ee.U)(e=>this.createUrlTree(bu(e),t.queryParams,t.fragment))).pipe(ss(t=>{if(t instanceof pu)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new ta([],{[Ls]:t}):t;return new Xs(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe((0,Ee.U)(t=>new ta([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,be.D)(r).pipe(ls(r=>{const i=n.children[r],o=au(e,r);return this.expandSegmentGroup(t,o,i,r).pipe((0,Ee.U)(t=>({segment:t,outlet:r})))}),Ni((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?so((e,n)=>t(e,n,r)):Co.y,hs(1),n?go(e):vo(()=>new oo))}())}expandSegment(t,e,n,r,i,o){return(0,be.D)(n).pipe(ls(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(ss(t=>{if(t instanceof pu)return(0,xi.of)(null);throw t}))),Eo(t=>!!t),ss((t,n)=>{if(t instanceof oo||"EmptyError"===t.name){if(fu(e,r,i))return(0,xi.of)(new ta([],{}));throw new pu(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return du(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):mu(e):mu(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?yu(i):this.lineralizeSegments(n,i).pipe((0,cs.zg)(n=>{const i=new ta(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=cu(e,r,i);if(!s)return mu(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?yu(l):this.lineralizeSegments(r,l).pipe((0,cs.zg)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,xi.of)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe((0,Ee.U)(t=>(n._loadedConfig=t,new ta(r,{})))):(0,xi.of)(new ta(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=cu(e,n,r);if(!o)return mu(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe((0,cs.zg)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=lu(e,s,u,o),l=new ta(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe((0,Ee.U)(t=>new ta(s,t)));if(0===o.length&&0===c.length)return(0,xi.of)(new ta(s,{}));const h=su(n)===i;return this.expandSegment(r,l,o,c,h?Ls:i,!0).pipe((0,Ee.U)(t=>new ta(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?(0,xi.of)(new Qa(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,xi.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe((0,cs.zg)(n=>n?this.configLoader.load(t.injector,e).pipe((0,Ee.U)(t=>(e._loadedConfig=t,t))):function(t){return new we.y(e=>e.error(Us(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):(0,xi.of)(new Qa([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return(0,xi.of)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&Ka(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!Ka(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return Hs(o)});return(0,xi.of)(i).pipe(tu(),(0,ps.b)(t=>{if(!Ja(t))return;const e=Us(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(0,Ee.U)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,xi.of)(n);if(r.numberOfChildren>1||!r.children.primary)return vu(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Xs(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return zs(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return zs(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new ta(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function bu(t){const e={};for(const n of Object.keys(t.children)){const r=bu(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new ta(t.segments.concat(e.segments),e.children)}return t}(new ta(t.segments,e))}class wu{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Cu{constructor(t,e){this.component=t,this.route=e}}function Eu(t,e,n){const r=t._root;return Tu(r,e?e._root:null,n,[r.value])}function Su(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Tu(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Ea(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!na(t.url,e.url);case"pathParamsOrQueryParamsChange":return!na(t.url,e.url)||!js(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Pa(t,e)||!js(t.queryParams,e.queryParams);case"paramsChange":default:return!Pa(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new wu(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Tu(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Cu(a.outlet.component,s))}else s&&Au(e,a,i),i.canActivateChecks.push(new wu(r)),Tu(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),zs(o,(t,e)=>Au(t,n.getContext(e),i)),i}function Au(t,e,n){const r=Ea(t),i=t.value;zs(r,(t,r)=>{Au(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Cu(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Du{}function Iu(t){return new we.y(e=>e.error(t))}class xu{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=lu(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Ls);if(null===e)return null;const n=new Ia([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ls,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Ca(n,e),i=new xa(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=Da(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=au(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=Ou(n);return r.sort((t,e)=>t.value.outlet===Ls?-1:e.value.outlet===Ls?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return fu(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!du(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?Zs(n).parameters:{};i=new Ia(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Nu(t),su(t),t.component,t,Fu(e),Pu(e)+n.length,Ru(t))}else{const r=cu(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new Ia(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Nu(t),su(t),t.component,t,Fu(e),Pu(e)+o.length,Ru(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=lu(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new Ca(i,t)]}if(0===a.length&&0===c.length)return[new Ca(i,[])];const l=su(t)===r,h=this.processSegment(a,u,c,l?Ls:r);return null===h?null:[new Ca(i,h)]}}function ku(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Ou(t){const e=[],n=new Set;for(const r of t){if(!ku(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=Ou(r.children);e.push(new Ca(r.value,t))}return e.filter(t=>!n.has(t))}function Fu(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Pu(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Nu(t){return t.data||{}}function Ru(t){return t.resolve||{}}function Lu(t){return Ai(e=>{const n=t(e);return n?(0,be.D)(n).pipe((0,Ee.U)(()=>e)):(0,xi.of)(e)})}class Mu extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const qu=new r.OlP("ROUTES");class Uu{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe((0,Ee.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new Qa(Gs(i.injector.get(qu,void 0,r.XFs.Self|r.XFs.Optional)).map(ou),i)}),ss(t=>{throw e._loader$=void 0,t}));return e._loader$=new is.c(n,()=>new Qi.xQ).pipe((0,gs.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,be.D)(this.loader.load(t)):Hs(t()).pipe((0,cs.zg)(t=>t instanceof r.YKP?(0,xi.of)(t):(0,be.D)(this.compiler.compileModuleAsync(t))))}}class Bu{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ju,this.attachRef=null}}class ju{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Bu,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Vu{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Gu(t){throw t}function Zu(t,e,n){return e.parse("/")}function zu(t,e){return(0,xi.of)(null)}const Hu={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Yu={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Wu=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Qi.xQ,this.errorHandler=Gu,this.malformedUriErrorHandler=Zu,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:zu,afterPreactivation:zu},this.urlHandlingStrategy=new Vu,this.routeReuseStrategy=new Mu,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(r.h0i),this.console=o.get(r.c2e);const c=o.get(r.R0b);this.isNgZoneEnabled=c instanceof r.R0b&&r.R0b.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new Xs(new ta([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Uu(s,a,t=>this.triggerEvent(new xs(t)),t=>this.triggerEvent(new ks(t))),this.routerState=Ta(this.currentUrlTree,this.rootComponentType),this.transitions=new $o({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(so(t=>0!==t.id),(0,Ee.U)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Ai(t=>{let n=!1,r=!1;return(0,xi.of)(t).pipe((0,ps.b)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ai(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return(0,xi.of)(t).pipe(Ai(t=>{const n=this.transitions.getValue();return e.next(new bs(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?lo.E:Promise.resolve(t)}),function(t,e,n,r){return Ai(i=>function(t,e,n,r,i){return new _u(t,e,n,r,i).apply()}(t,e,n,i.extractedUrl,r).pipe((0,Ee.U)(t=>Object.assign(Object.assign({},i),{urlAfterRedirects:t}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ps.b)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return(0,cs.zg)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new xu(t,e,n,r,i,o).recognize();return null===s?Iu(new Du):(0,xi.of)(s)}catch(VO){return Iu(VO)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe((0,Ee.U)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ps.b)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,t),this.browserUrlTree=t.urlAfterRedirects);const n=new Ss(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new bs(n,this.serializeUrl(r),i,o);e.next(a);const u=Ta(r,this.rootComponentType).snapshot;return(0,xi.of)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),lo.E}),Lu(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),(0,ps.b)(t=>{const e=new Ts(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(0,Ee.U)(t=>Object.assign(Object.assign({},t),{guards:Eu(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return(0,cs.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?(0,xi.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return(0,be.D)(t).pipe((0,cs.zg)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return(0,xi.of)(!0);const s=o.map(o=>{const s=Su(o,e,i);let a;if(function(t){return t&&Ka(t.canDeactivate)}(s))a=Hs(s.canDeactivate(t,e,n,r));else{if(!Ka(s))throw new Error("Invalid CanDeactivate guard");a=Hs(s(t,e,n,r))}return a.pipe(Eo())});return(0,xi.of)(s).pipe(tu())}(t.component,t.route,n,e,r)),Eo(t=>!0!==t,!0))}(s,r,i,t).pipe((0,cs.zg)(n=>n&&function(t){return"boolean"==typeof t}(n)?function(t,e,n,r){return(0,be.D)(e).pipe(ls(e=>ns(function(t,e){return null!==t&&e&&e(new Os(t)),(0,xi.of)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Ps(t)),(0,xi.of)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>rs(()=>{const i=e.guards.map(i=>{const o=Su(i,e.node,n);let s;if(function(t){return t&&Ka(t.canActivateChild)}(o))s=Hs(o.canActivateChild(r,t));else{if(!Ka(o))throw new Error("Invalid CanActivateChild guard");s=Hs(o(r,t))}return s.pipe(Eo())});return(0,xi.of)(i).pipe(tu())}));return(0,xi.of)(i).pipe(tu())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,xi.of)(!0);const i=r.map(r=>rs(()=>{const i=Su(r,e,n);let o;if(function(t){return t&&Ka(t.canActivate)}(i))o=Hs(i.canActivate(e,t));else{if(!Ka(i))throw new Error("Invalid CanActivate guard");o=Hs(i(e,t))}return o.pipe(Eo())}));return(0,xi.of)(i).pipe(tu())}(t,e.route,n))),Eo(t=>!0!==t,!0))}(r,o,t,e):(0,xi.of)(n)),(0,Ee.U)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),(0,ps.b)(t=>{if(Ja(t.guardsResult)){const e=Us(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new As(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),so(t=>!!t.guardsResult||(this.cancelNavigationTransition(t,""),!1)),Lu(t=>{if(t.guards.canActivateChecks.length)return(0,xi.of)(t).pipe((0,ps.b)(t=>{const e=new Ds(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Ai(t=>{let e=!1;return(0,xi.of)(t).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,(0,cs.zg)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,xi.of)(t);let o=0;return(0,be.D)(i).pipe(ls(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return(0,xi.of)({});const o={};return(0,be.D)(i).pipe((0,cs.zg)(i=>function(t,e,n,r){const i=Su(t,e,r);return Hs(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe((0,ps.b)(t=>{o[i]=t}))),hs(1),(0,cs.zg)(()=>Object.keys(o).length===i.length?(0,xi.of)(o):lo.E))}(t._resolve,t,e,r).pipe((0,Ee.U)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Da(t,n).resolve),null)))}(t.route,e,n,r)),(0,ps.b)(()=>o++),hs(1),(0,cs.zg)(e=>o===i.length?(0,xi.of)(t):lo.E))})),(0,ps.b)({next:()=>e=!0,complete:()=>{e||this.cancelNavigationTransition(t,"At least one route resolver didn't emit any value.")}}));var n,r}),(0,ps.b)(t=>{const e=new Is(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Lu(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),(0,Ee.U)(t=>{const e=function(t,e,n){const r=Na(t,e._root,n?n._root:void 0);return new Sa(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),(0,ps.b)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,t),this.browserUrlTree=t.urlAfterRedirects)}),(i=this.rootContexts,o=this.routeReuseStrategy,s=t=>this.triggerEvent(t),(0,Ee.U)(t=>(new Wa(o,t.targetRouterState,t.currentRouterState,s).activate(i),t))),(0,ps.b)({next(){n=!0},complete(){n=!0}}),ms(()=>{n||r||this.cancelNavigationTransition(t,`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation=null}),ss(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Ja(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Cs(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Es(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(fE){t.reject(fE)}}var i;return lo.E}));var i,o,s}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,delete t.\u0275routerPageId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){nu(t),this.config=t.map(ou),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return qa(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Ba(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return zs(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Ba(n,e,r)}(n);if(o.toRoot())return qa(e.root,new ta([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new ja(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new ja(t,t===e.root,0)}const r=La(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new ja(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Ga(s.segmentGroup,s.index,o.commands):Va(s.segmentGroup,s.index,o.commands);return qa(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,null!=u?u:null)}navigateByUrl(t,e={skipLocationChange:!1}){const n=Ja(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);let i=null;return"computed"===this.canceledNavigationResolution&&(0===this.currentPageId||e.skipLocationChange||e.replaceUrl)&&(i=this.location.getState()),this.scheduleNavigation(r,"imperative",i,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(VO){e=this.malformedUriErrorHandler(VO,this.urlSerializer,t)}return e}isActive(t,e){let n;if(n=!0===e?Object.assign({},Hu):!1===e?Object.assign({},Yu):e,Ja(t))return $s(this.currentUrlTree,t,n);const r=this.parseUrl(t);return $s(this.currentUrlTree,r,n)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ws(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;let d;return d="computed"===this.canceledNavigationResolution?n&&n.\u0275routerPageId?n.\u0275routerPageId:this.currentPageId+1:0,this.setTransition({id:h,targetPageId:d,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e){const n=this.urlSerializer.serialize(t),r=Object.assign(Object.assign({},e.extras.state),this.generateNgRouterState(e.id,e.targetPageId));this.location.isCurrentPathEqualTo(n)||e.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,e){"computed"===this.canceledNavigationResolution?"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy||this.location.historyGo(this.currentPageId-t.targetPageId):this.resetUrlToCurrentUrlTree();const n=new Cs(t.id,this.serializeUrl(t.extractedUrl),e);this.triggerEvent(n),t.resolve(!1)}generateNgRouterState(t,e){return"computed"===this.canceledNavigationResolution?{navigationId:t,"\u0275routerPageId":e}:{navigationId:t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.DyG),r.LFG(ra),r.LFG(ju),r.LFG(w),r.LFG(r.zs3),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),$u=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new Qi.xQ,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:Ku(this.skipLocationChange),replaceUrl:Ku(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ku(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Wu),r.Y36(Aa),r.$8M("tabindex"),r.Y36(r.Qsj),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.NdJ("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.TTD]}),t})(),Qu=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new Qi.xQ,this.subscription=t.events.subscribe(t=>{t instanceof ws&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:Ku(this.skipLocationChange),replaceUrl:Ku(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ku(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Wu),r.Y36(Aa),r.Y36(m))},t.\u0275dir=r.lG2({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.NdJ("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Ikx("href",e.href,r.LSH),r.uIk("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.TTD]}),t})();function Ku(t){return""===t||!!t}let Ju=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.vpe,this.deactivateEvents=new r.vpe,this.name=i||Ls,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Xu(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(ju),r.Y36(r.s_b),r.Y36(r._Vd),r.$8M("name"),r.Y36(r.sBO))},t.\u0275dir=r.lG2({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Xu{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Aa?this.route:t===ju?this.childContexts:this.parent.get(t,e)}}class tc{}class ec{preload(t,e){return(0,xi.of)(null)}}let nc=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Uu(e,n,e=>t.triggerEvent(new xs(e)),e=>t.triggerEvent(new ks(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(so(t=>t instanceof ws),ls(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return(0,be.D)(n).pipe((0,es.J)(),(0,Ee.U)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?(0,xi.of)(e._loadedConfig):this.loader.load(t.injector,e)).pipe((0,cs.zg)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Wu),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(r.zs3),r.LFG(tc))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),rc=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof bs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ws&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Rs&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Rs(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Wu),r.LFG(Nt),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const ic=new r.OlP("ROUTER_CONFIGURATION"),oc=new r.OlP("ROUTER_FORROOT_GUARD"),sc=[w,{provide:ra,useClass:ia},{provide:Wu,useFactory:function(t,e,n,r,i,o,s,a={},u,c){const l=new Wu(null,t,e,n,r,i,o,Gs(s));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(t=>{var e,n;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[ra,ju,w,r.zs3,r.v3s,r.Sil,qu,ic,[class{},new r.FiY],[class{},new r.FiY]]},ju,{provide:Aa,useFactory:function(t){return t.routerState.root},deps:[Wu]},{provide:r.v3s,useClass:r.EAV},nc,ec,class{preload(t,e){return e().pipe(ss(()=>(0,xi.of)(null)))}},{provide:ic,useValue:{enableTracing:!1}}];function ac(){return new r.PXZ("Router",Wu)}let uc=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[sc,dc(e),{provide:oc,useFactory:hc,deps:[[Wu,new r.FiY,new r.tp0]]},{provide:ic,useValue:n||{}},{provide:m,useFactory:lc,deps:[a,[new r.tBr(v),new r.FiY],ic]},{provide:rc,useFactory:cc,deps:[Wu,Nt,ic]},{provide:tc,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:ec},{provide:r.PXZ,multi:!0,useFactory:ac},[fc,{provide:r.ip1,multi:!0,useFactory:pc,deps:[fc]},{provide:mc,useFactory:gc,deps:[fc]},{provide:r.tb,multi:!0,useExisting:mc}]]}}static forChild(e){return{ngModule:t,providers:[dc(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(oc,8),r.LFG(Wu,8))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();function cc(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new rc(t,e,n)}function lc(t,e,n={}){return n.useHash?new b(t,e):new _(t,e)}function hc(t){return"guarded"}function dc(t){return[{provide:r.deG,multi:!0,useValue:t},{provide:qu,multi:!0,useValue:t}]}let fc=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new Qi.xQ}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Wu),r=this.injector.get(ic);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,xi.of)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(ic),n=this.injector.get(nc),i=this.injector.get(rc),o=this.injector.get(Wu),s=this.injector.get(r.z2F);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.zs3))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function pc(t){return t.appInitializer.bind(t)}function gc(t){return t.bootstrapListener.bind(t)}const mc=new r.OlP("Router Initializer");let yc=(()=>{class t{constructor(t,e,n,r){this.userService=t,this.afAuth=e,this.route=n,this.router=r,this.userLoggedIn=!1,this.$user=e.authState,this.$user.subscribe(t=>{t?(this.userLoggedIn=!0,console.log("User logged in",this.userLoggedIn),this.userData=t,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(this.userLoggedIn=!1,console.log("User logged in",this.userLoggedIn),localStorage.setItem("user",null),JSON.parse(localStorage.getItem("user")))})}get user$(){return this.$user}getName(){return Ei(function*(){let t=JSON.parse(localStorage.getItem("user"));return t?t.displayName:""})()}get appUser$(){return this.$user.pipe(Ai(t=>t?this.userService.get(t.uid):(0,xi.of)(null)))}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}login(){let t=this.route.snapshot.queryParamMap.get("returnUrl")||"/";localStorage.setItem("returnUrl",t),this.afAuth.signInWithRedirect(new Si.Z.auth.GoogleAuthProvider)}logout(){this.afAuth.signOut()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Wo),r.LFG(Fo),r.LFG(Aa),r.LFG(Wu))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),vc=(()=>{class t{constructor(t,e){this.auth=t,this.router=e}canActivate(t,e){return!0!==this.auth.isLoggedIn&&this.router.navigate(["/login"],{queryParams:{returnUrl:e.url}}),!0}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(yc),r.LFG(Wu))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),_c=(()=>{class t{constructor(t){this.db=t}get categoriesRef(){return this.db.list("/food",t=>t.orderByChild("name"))}get categories(){return this.db.list("/category/gender").valueChanges()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Yo))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class bc{constructor(t){this.key="",this.title="",this.imageUrl="",this.price=-1,this.quantity=0,Object.assign(this,t)}get totalPrice(){return this.price*this.quantity}}class wc{constructor(t,e){this.dateCreated=t,this.itemsMap=e,this.items=[],this.itemsMap=e||{};for(let n in e)this.items.push(new bc(Object.assign(Object.assign({},e[n]),{key:n})))}get totalItemsCount(){let t=0;for(let e in this.itemsMap)t+=this.itemsMap[e].quantity;return t}getQuantity(t){let e=this.itemsMap[t.key];return e?e.quantity:0}get totalCartPrice(){let t=0;for(let e in this.items)t+=this.items[e].totalPrice;return t}}let Cc,Ec=(()=>{class t{constructor(t){this.db=t}clearCart(){var t=this;return Ei(function*(){let e=yield t.getOrCreateCartId();t.db.object("/shopping-carts/"+e+"/items").remove()})()}getCart(){var t=this;return Ei(function*(){let e=yield t.getOrCreateCartId();return t.db.object("/shopping-carts/"+e).valueChanges().pipe((0,Ee.U)(t=>new wc(t.dateCreated,t.items)))})()}addToCart(t){var e=this;return Ei(function*(){e.updateItem(t,1)})()}removeFromCart(t){var e=this;return Ei(function*(){e.updateItem(t,-1)})()}removeAll(t){var e=this;return Ei(function*(){let n=yield e.getOrCreateCartId();e.db.object("/shopping-carts/"+n+"/items/"+t.key).remove()})()}create(){return this.db.list("/shopping-carts").push({dateCreated:(new Date).getTime()})}getItem(t,e){return this.db.object("/shopping-carts/"+t+"/items/"+e)}getOrCreateCartId(){var t=this;return Ei(function*(){let e=localStorage.getItem("cartId");if(e)return e;let n=yield t.create();return localStorage.setItem("cartId",n.key),n.key})()}updateItem(t,e){var n=this;return Ei(function*(){let r=yield n.getOrCreateCartId(),i=n.getItem(r,t.key);i.valueChanges().pipe(ho(1)).subscribe(n=>{let r=null!==n?n.quantity+e:1;r<=0?i.remove():i.update({title:t.title,imageUrl:t.imageUrl,price:t.price,quantity:r})})})()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Yo))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Sc=(()=>{class t{constructor(t,e){this.db=t,this.shoppingCartService=e}getMapOrdersByUserId(t){return this.ordersByUserIdRef=this.db.list("/orders",e=>e.orderByChild("userId").equalTo(t)),this.ordersByUserIdRef.snapshotChanges().pipe((0,Ee.U)(t=>t.map(t=>Object.assign({key:t.payload.key},t.payload.val()))))}getMapOrderById(t){return this.ordersByIdRef=this.db.list("/orders/"+t),this.ordersByIdRef.snapshotChanges().pipe((0,Ee.U)(t=>t.map(t=>Object.assign({key:t.payload.key},t.payload.val()))))}getMapOrder(){return this.ordersRef=this.db.list("/orders"),this.ordersRef.snapshotChanges().pipe((0,Ee.U)(t=>t.map(t=>Object.assign({key:t.payload.key},t.payload.val()))))}placeOrder(t){var e=this;return Ei(function*(){let n=yield e.db.list("/orders").push(t);return e.shoppingCartService.clearCart(),n})()}getOrder(){return this.db.list("/orders").valueChanges()}getOrderByOrderId(t){return this.db.object("/orders/"+t).valueChanges()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Yo),r.LFG(Ec))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Tc=(()=>{class t{constructor(t){this.db=t,this.productsRefV=this.productsRef}getMapProduct(){return this.productsRefV.snapshotChanges().pipe((0,Ee.U)(t=>t.map(t=>Object.assign({key:t.payload.key},t.payload.val()))))}create(t){return this.db.list("/product").push(t)}update(t,e){return this.db.object("/product/"+t).update(e)}delete(t){return this.db.object("/product/"+t).remove()}get products(){return this.db.list("/product").valueChanges()}get productsRef(){return this.db.list("/product")}getProduct(t){return this.db.object("/product/"+t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Yo))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Ac(t,e=0){return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function Dc(t){return Array.isArray(t)?t:[t]}function Ic(t){return null==t?"":"string"==typeof t?t:`${t}px`}function xc(t){return t instanceof r.SBq?t.nativeElement:t}class kc{constructor(t){this.total=t}call(t,e){return e.subscribe(new Oc(t,this.total))}}class Oc extends Pi.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}function Fc(t){return e=>e.lift(new Pc(t))}class Pc{constructor(t){this.notifier=t}call(t,e){const n=new Nc(t),r=(0,Ti.ft)(this.notifier,new Ti.IY(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class Nc extends Ti.Ds{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}try{Cc="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(Dk){Cc=!1}let Rc,Lc,Mc,qc=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Ft(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Cc)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.Lbi))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(r.Lbi))},token:t,providedIn:"root"}),t})(),Uc=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();function Bc(t){return function(){if(null==Rc&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Rc=!0}))}finally{Rc=Rc||!1}return Rc}()?t:!!t.capture}function jc(){if(null==Lc){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Lc=!1,Lc;if("scrollBehavior"in document.documentElement.style)Lc=!0;else{const t=Element.prototype.scrollTo;Lc=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return Lc}function Vc(t){if(function(){if(null==Mc){const t="undefined"!=typeof document?document.head:null;Mc=!(!t||!t.createShadowRoot&&!t.attachShadow)}return Mc}()){const e=t.getRootNode?t.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Gc(){let t="undefined"!=typeof document&&document?document.activeElement:null;for(;t&&t.shadowRoot;){const e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}let Zc=(()=>{class t{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({factory:function(){return new t},token:t,providedIn:"root"}),t})(),zc=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[Zc]}),t})(),Hc=(()=>{class t{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const e=function(t){try{return t.frameElement}catch(Dk){return null}}((n=t).ownerDocument&&n.ownerDocument.defaultView||window);var n;if(e){if(-1===Wc(e))return!1;if(!this.isVisible(e))return!1}let r=t.nodeName.toLowerCase(),i=Wc(t);return t.hasAttribute("contenteditable")?-1!==i:"iframe"!==r&&"object"!==r&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(t){let e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==i:"video"===r?-1!==i&&(null!==i||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,e){return function(t){return!function(t){return function(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function(t){let e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function(t){return function(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||Yc(t))}(t)&&!this.isDisabled(t)&&((null==e?void 0:e.ignoreVisibility)||this.isVisible(t))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(qc))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(qc))},token:t,providedIn:"root"}),t})();function Yc(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let e=t.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function Wc(t){if(!Yc(t))return null;const e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class $c{constructor(t,e,n,r,i=!1){this._element=t,this._checker=e,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,i||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);for(let n=0;n<e.length;n++)e[n].hasAttribute(`cdk-focus-${t}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[n]):e[n].hasAttribute(`cdk-focus-region-${t}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[n]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),!this._checker.isFocusable(e)){const n=this._getFirstTabbableElement(e);return null==n||n.focus(t),!!n}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=0;n<e.length;n++){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(t)return t}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=e.length-1;n>=0;n--){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(t)return t}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(ho(1)).subscribe(t)}}let Qc=(()=>{class t{constructor(t,e,n){this._checker=t,this._ngZone=e,this._document=n}create(t,e=!1){return new $c(t,this._checker,this._ngZone,this._document,e)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Hc),r.LFG(r.R0b),r.LFG(s))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Hc),r.LFG(r.R0b),r.LFG(s))},token:t,providedIn:"root"}),t})();"undefined"!=typeof Element&&Element;const Kc=new r.OlP("cdk-input-modality-detector-options"),Jc={ignoreKeys:[18,17,224,91,16]},Xc=Bc({passive:!0,capture:!0});let tl=(()=>{class t{constructor(t,e,n,r){this._platform=t,this._mostRecentTarget=null,this._modality=new $o(null),this._lastTouchMs=0,this._onKeydown=t=>{var e,n;(null===(n=null===(e=this._options)||void 0===e?void 0:e.ignoreKeys)||void 0===n?void 0:n.some(e=>e===t.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=el(t))},this._onMousedown=t=>{Date.now()-this._lastTouchMs<650||(this._modality.next(function(t){return 0===t.buttons}(t)?"keyboard":"mouse"),this._mostRecentTarget=el(t))},this._onTouchstart=t=>{!function(t){const e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(t)?(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=el(t)):this._modality.next("keyboard")},this._options=Object.assign(Object.assign({},Jc),r),this.modalityDetected=this._modality.pipe((1,t=>t.lift(new kc(1)))),this.modalityChanged=this.modalityDetected.pipe(Mi()),t.isBrowser&&e.runOutsideAngular(()=>{n.addEventListener("keydown",this._onKeydown,Xc),n.addEventListener("mousedown",this._onMousedown,Xc),n.addEventListener("touchstart",this._onTouchstart,Xc)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Xc),document.removeEventListener("mousedown",this._onMousedown,Xc),document.removeEventListener("touchstart",this._onTouchstart,Xc))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(qc),r.LFG(r.R0b),r.LFG(s),r.LFG(Kc,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(qc),r.LFG(r.R0b),r.LFG(s),r.LFG(Kc,8))},token:t,providedIn:"root"}),t})();function el(t){return t.composedPath?t.composedPath()[0]:t.target}const nl=new r.OlP("cdk-focus-monitor-default-options"),rl=Bc({passive:!0,capture:!0});let il=(()=>{class t{constructor(t,e,n,r,i){this._ngZone=t,this._platform=e,this._inputModalityDetector=n,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Qi.xQ,this._rootNodeFocusAndBlurListener=t=>{const e=el(t),n="focus"===t.type?this._onFocus:this._onBlur;for(let r=e;r;r=r.parentElement)n.call(this,t,r)},this._document=r,this._detectionMode=(null==i?void 0:i.detectionMode)||0}monitor(t,e=!1){const n=xc(t);if(!this._platform.isBrowser||1!==n.nodeType)return(0,xi.of)(null);const r=Vc(n)||this._getDocument(),i=this._elementInfo.get(n);if(i)return e&&(i.checkChildren=!0),i.subject;const o={checkChildren:e,subject:new Qi.xQ,rootNode:r};return this._elementInfo.set(n,o),this._registerGlobalListeners(o),o.subject}stopMonitoring(t){const e=xc(t),n=this._elementInfo.get(e);n&&(n.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._removeGlobalListeners(n))}focusVia(t,e,n){const r=xc(t);r===this._getDocument().activeElement?this._getClosestElementsInfo(r).forEach(([t,n])=>this._originChanged(t,e,n)):(this._setOrigin(e),"function"==typeof r.focus&&r.focus(n))}ngOnDestroy(){this._elementInfo.forEach((t,e)=>this.stopMonitoring(e))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,e,n){n?t.classList.add(e):t.classList.remove(e)}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,e){this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e)}_setOrigin(t,e=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&e,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,e){const n=this._elementInfo.get(e),r=el(t);n&&(n.checkChildren||e===r)&&this._originChanged(e,this._getFocusOrigin(r),n)}_onBlur(t,e){const n=this._elementInfo.get(e);!n||n.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(n.subject,null))}_emitOrigin(t,e){this._ngZone.run(()=>t.next(e))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const e=t.rootNode,n=this._rootNodeFocusListenerCount.get(e)||0;n||this._ngZone.runOutsideAngular(()=>{e.addEventListener("focus",this._rootNodeFocusAndBlurListener,rl),e.addEventListener("blur",this._rootNodeFocusAndBlurListener,rl)}),this._rootNodeFocusListenerCount.set(e,n+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Fc(this._stopInputModalityDetector)).subscribe(t=>{this._setOrigin(t,!0)}))}_removeGlobalListeners(t){const e=t.rootNode;if(this._rootNodeFocusListenerCount.has(e)){const t=this._rootNodeFocusListenerCount.get(e);t>1?this._rootNodeFocusListenerCount.set(e,t-1):(e.removeEventListener("focus",this._rootNodeFocusAndBlurListener,rl),e.removeEventListener("blur",this._rootNodeFocusAndBlurListener,rl),this._rootNodeFocusListenerCount.delete(e))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,e,n){this._setClasses(t,e),this._emitOrigin(n.subject,e),this._lastFocusOrigin=e}_getClosestElementsInfo(t){const e=[];return this._elementInfo.forEach((n,r)=>{(r===t||n.checkChildren&&r.contains(t))&&e.push([r,n])}),e}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.R0b),r.LFG(qc),r.LFG(tl),r.LFG(s,8),r.LFG(nl,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(r.R0b),r.LFG(qc),r.LFG(tl),r.LFG(s,8),r.LFG(nl,8))},token:t,providedIn:"root"}),t})();const ol="cdk-high-contrast-black-on-white",sl="cdk-high-contrast-white-on-black",al="cdk-high-contrast-active";let ul=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(al),t.remove(ol),t.remove(sl),this._hasCheckedHighContrastMode=!0;const e=this.getHighContrastMode();1===e?(t.add(al),t.add(ol)):2===e&&(t.add(al),t.add(sl))}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(qc),r.LFG(s))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(qc),r.LFG(s))},token:t,providedIn:"root"}),t})(),cl=(()=>{class t{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(ul))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Uc,zc]]}),t})();const ll=new r.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,r.f3M)(s)}});let hl=(()=>{class t{constructor(t){if(this.value="ltr",this.change=new r.vpe,t){const e=t.documentElement?t.documentElement.dir:null,n=(t.body?t.body.dir:null)||e;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(ll,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(ll,8))},token:t,providedIn:"root"}),t})(),dl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();const fl=new r.GfV("12.1.1");class pl{}const gl="*";function ml(t,e){return{type:7,name:t,definitions:e,options:{}}}function yl(t,e=null){return{type:4,styles:e,timings:t}}function vl(t,e=null){return{type:2,steps:t,options:e}}function _l(t){return{type:6,styles:t,offset:null}}function bl(t,e,n){return{type:0,name:t,styles:e,options:n}}function wl(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function Cl(t){Promise.resolve(null).then(t)}class El{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Cl(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class Sl{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?Cl(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function Tl(){return"undefined"!=typeof window&&void 0!==window.document}function Al(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Dl(t){switch(t.length){case 0:return new El;case 1:return t[0];default:return new Sl(t)}}function Il(t,e,n,r,i={},o={}){const s=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,s),a){case"!":a=i[n];break;case gl:a=o[n];break;default:a=e.normalizeStyleValue(n,r,a,s)}l[r]=a}),r||a.push(l),c=l,u=n}),s.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${s.join(t)}`)}return a}function xl(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&kl(n,"start",t)));break;case"done":t.onDone(()=>r(n&&kl(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&kl(n,"destroy",t)))}}function kl(t,e,n){const r=n.totalTime,i=Ol(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function Ol(t,e,n,r,i="",o=0,s){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function Fl(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function Pl(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let Nl=(t,e)=>!1,Rl=(t,e)=>!1,Ll=(t,e,n)=>[];const Ml=Al();(Ml||"undefined"!=typeof Element)&&(Nl=Tl()?(t,e)=>{for(;e&&e!==document.documentElement;){if(e===t)return!0;e=e.parentNode||e.host}return!1}:(t,e)=>t.contains(e),Rl=(()=>{if(Ml||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):Rl}})(),Ll=(t,e,n)=>{let r=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)r.push(n[t])}else{const n=t.querySelector(e);n&&r.push(n)}return r});let ql=null,Ul=!1;function Bl(t){ql||(ql=("undefined"!=typeof document?document.body:null)||{},Ul=!!ql.style&&"WebkitAppearance"in ql.style);let e=!0;return ql.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in ql.style,!e&&Ul)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in ql.style),e}const jl=Rl,Vl=Nl,Gl=Ll;function Zl(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let zl=(()=>{class t{validateStyleProperty(t){return Bl(t)}matchesElement(t,e){return jl(t,e)}containsElement(t,e){return Vl(t,e)}query(t,e,n){return Gl(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,o=[],s){return new El(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Hl=(()=>{class t{}return t.NOOP=new zl,t})();const Yl="ng-enter",Wl="ng-leave",$l="ng-trigger",Ql=".ng-trigger",Kl="ng-animating",Jl=".ng-animating";function Xl(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:th(parseFloat(e[1]),e[2])}function th(t,e){switch(e){case"s":return 1e3*t;default:return t}}function eh(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,o="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=th(parseFloat(n[1]),n[2]);const s=n[3];null!=s&&(i=th(parseFloat(s),n[4]));const a=n[5];a&&(o=a)}else r=t;if(!n){let n=!1,o=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(o,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:o}}(t,e,n)}function nh(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function rh(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else nh(t,n);return n}function ih(t,e,n){return n?e+":"+n+";":""}function oh(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=ih(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=ih(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function sh(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=ph(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),Al()&&oh(t))}function ah(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=ph(e);t.style[n]=""}),Al()&&oh(t))}function uh(t){return Array.isArray(t)?1==t.length?t[0]:vl(t):t}const ch=new RegExp("{{\\s*(.+?)\\s*}}","g");function lh(t){let e=[];if("string"==typeof t){let n;for(;n=ch.exec(t);)e.push(n[1]);ch.lastIndex=0}return e}function hh(t,e,n){const r=t.toString(),i=r.replace(ch,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?t:i}function dh(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const fh=/-+([a-z0-9])/g;function ph(t){return t.replace(fh,(...t)=>t[1].toUpperCase())}function gh(t,e){return 0===t||0===e}function mh(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let o=e[0],s=[];if(r.forEach(t=>{o.hasOwnProperty(t)||s.push(t),o[t]=n[t]}),s.length)for(var i=1;i<e.length;i++){let n=e[i];s.forEach(function(e){n[e]=vh(t,e)})}}return e}function yh(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function vh(t,e){return window.getComputedStyle(t)[e]}const _h="*";function bh(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],o=r[2],s=r[3];e.push(Eh(i,s)),"<"!=o[0]||i==_h&&s==_h||e.push(Eh(s,i))}(t,n,e)):n.push(t),n}const wh=new Set(["true","1"]),Ch=new Set(["false","0"]);function Eh(t,e){const n=wh.has(t)||Ch.has(t),r=wh.has(e)||Ch.has(e);return(i,o)=>{let s=t==_h||t==i,a=e==_h||e==o;return!s&&n&&"boolean"==typeof i&&(s=i?wh.has(t):Ch.has(t)),!a&&r&&"boolean"==typeof o&&(a=o?wh.has(e):Ch.has(e)),s&&a}}const Sh=new RegExp("s*:selfs*,?","g");function Th(t,e,n){return new Ah(t).build(e,n)}class Ah{constructor(t){this._driver=t}build(t,e){const n=new Dh(e);return this._resetContextStyleTimingState(n),yh(this,uh(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,o.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,o=r||{};if(n.styles.forEach(t=>{if(Ih(t)){const e=t;Object.keys(e).forEach(t=>{lh(e[t]).forEach(t=>{o.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=dh(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=yh(this,uh(t.animation),e);return{type:1,matchers:bh(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:xh(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>yh(this,t,e)),options:xh(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=yh(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:xh(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return kh(eh(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=kh(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||eh(r,e),kh(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:_l({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,o=!1;if(!i){o=!0;const t={};n.easing&&(t.easing=n.easing),i=_l(t)}e.currentTime+=n.duration+n.delay;const s=this.visitStyle(i,e);s.isEmptyStep=o,r=s}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==gl?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(Ih(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=e.collectedStyles[e.currentQuerySelector],s=o[n];let a=!0;s&&(i!=r&&i>=s.startTime&&r<=s.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=s.startTime),a&&(o[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=lh(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let o=!1,s=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(Ih(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(Ih(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),s=s||c<0||c>1,o=o||c<a,a=c,i.push(c),n});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,d=e.currentTime,f=e.currentAnimateTimings,p=f.duration;return u.forEach((t,r)=>{const o=l>0?r==h?1:l*r:i[r],s=o*p;e.currentTime=d+f.delay+s,f.duration=s,this._validateStyleAst(t,e),t.offset=o,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:yh(this,uh(t.animation),e),options:xh(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:xh(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:xh(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,o]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(Sh,"")),[t=t.replace(/@\*/g,Ql).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,Jl),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,Fl(e.collectedStyles,e.currentQuerySelector,{});const s=yh(this,uh(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:s,originalSelector:t.selector,options:xh(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:eh(t.timings,e.errors,!0);return{type:12,animation:yh(this,uh(t.animation),e),timings:n,options:null}}}class Dh{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Ih(t){return!Array.isArray(t)&&"object"==typeof t}function xh(t){var e;return t?(t=nh(t)).params&&(t.params=(e=t.params)?nh(e):null):t={},t}function kh(t,e,n){return{duration:t,delay:e,easing:n}}function Oh(t,e,n,r,i,o,s=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class Fh{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Ph=new RegExp(":enter","g"),Nh=new RegExp(":leave","g");function Rh(t,e,n,r,i,o={},s={},a,u,c=[]){return(new Lh).buildKeyframes(t,e,n,r,i,o,s,a,u,c)}class Lh{buildKeyframes(t,e,n,r,i,o,s,a,u,c=[]){u=u||new Fh;const l=new qh(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([o],null,l.errors,a),yh(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(s).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([s],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[Oh(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?Xl(n.duration):null,o=null!=n.delay?Xl(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),yh(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Mh);const t=Xl(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>yh(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?Xl(t.options.delay):0;t.steps.forEach(o=>{const s=e.createSubContext(t.options);i&&s.delayNextStep(i),yh(this,o,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return eh(e.params?hh(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(t=>{o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?Xl(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Mh);let o=n;const s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=s.length;let a=null;s.forEach((n,r)=>{e.currentQueryIndex=r;const s=e.createSubContext(t.options,n);i&&s.delayNextStep(i),n===e.element&&(a=s.currentTimeline),yh(this,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),s=o*(e.currentQueryTotal-1);let a=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;yh(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const Mh={};class qh{constructor(t,e,n,r,i,o,s,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Mh,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new Uh(this._driver,e,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=Xl(n.duration)),null!=n.delay&&(r.delay=Xl(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=hh(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new qh(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=Mh,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new Bh(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,o){let s=[];if(r&&s.push(this.element),t.length>0){t=(t=t.replace(Ph,"."+this._enterClassName)).replace(Nh,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),s.push(...e)}return i||0!=s.length||o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),s}}class Uh{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Uh(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||gl,this._currentKeyframe[t]=gl}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},o=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]=gl})):rh(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=hh(o[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:gl),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,o)=>{const s=rh(i,!0);Object.keys(s).forEach(n=>{const r=s[n];"!"==r?t.add(n):r==gl&&e.add(n)}),n||(s.offset=o/this.duration),r.push(s)});const i=t.size?dh(t.values()):[],o=e.size?dh(e.values()):[];if(n){const t=r[0],e=nh(t);t.offset=0,e.offset=1,r=[t,e]}return Oh(this.element,r,i,o,this.duration,this.startTime,this.easing,!1)}}class Bh extends Uh{constructor(t,e,n,r,i,o,s=!1){super(t,e,o.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],o=n+e,s=e/o,a=rh(t[0],!1);a.offset=0,i.push(a);const u=rh(t[0],!1);u.offset=jh(s),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let s=rh(t[r],!1);s.offset=jh((e+s.offset*n)/o),i.push(s)}n=o,e=0,r="",t=i}return Oh(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function jh(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class Vh{}class Gh extends Vh{normalizePropertyName(t,e){return ph(t)}normalizeStyleValue(t,e,n,r){let i="";const o=n.toString().trim();if(Zh[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return o+i}}const Zh=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function zh(t,e,n,r,i,o,s,a,u,c,l,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:d}}const Hh={};class Yh{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o}build(t,e,n,r,i,o,s,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||Hh,d=this.buildStyles(n,s&&s.params||Hh,l),f=a&&a.params||Hh,p=this.buildStyles(r,f,l),g=new Set,m=new Map,y=new Map,v="void"===r,_={params:Object.assign(Object.assign({},h),f)},b=c?[]:Rh(t,e,this.ast.animation,i,o,d,p,_,u,l);let w=0;if(b.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),l.length)return zh(e,this._triggerName,n,r,v,d,p,[],[],m,y,w,l);b.forEach(t=>{const n=t.element,r=Fl(m,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=Fl(y,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&g.add(n)});const C=dh(g.values());return zh(e,this._triggerName,n,r,v,d,p,b,C,m,y,w)}}class Wh{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=nh(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let o=i[t];o.length>1&&(o=hh(o,r,e)),n[t]=o})}}),n}}class $h{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new Wh(t.style,t.options&&t.options.params||{})}),Qh(this.states,"true","1"),Qh(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new Yh(t,e,this.states))}),this.fallbackTransition=new Yh(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function Qh(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const Kh=new Fh;class Jh{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=Th(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=Il(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let o;const s=new Map;if(i?(o=Rh(this._driver,e,i,Yl,Wl,{},{},n,Kh,r),o.forEach(t=>{const e=Fl(s,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);s.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,gl)})});const a=Dl(o.map(t=>{const e=s.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const i=Ol(e,"","","");return xl(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const Xh="ng-animate-queued",td="ng-animate-disabled",ed=".ng-animate-disabled",nd=[],rd={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},id={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class od{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=nh(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const sd="void",ad=new od(sd);class ud{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,gd(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const o=Fl(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};o.push(s);const a=Fl(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(gd(t,$l),gd(t,"ng-trigger-"+e),a[e]=ad),()=>{this._engine.afterFlush(()=>{const t=o.indexOf(s);t>=0&&o.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),o=new ld(this.id,e,t);let s=this._engine.statesByElement.get(t);s||(gd(t,$l),gd(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));let a=s[e];const u=new od(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),s[e]=u,a||(a=ad),u.value!==sd&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{ah(t,n),sh(t,r)})}return}const c=Fl(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:o,isFallbackTransition:h}),h||(gd(t,Xh),o.onStart(()=>{md(t,Xh)})),o.onDone(()=>{let e=this.players.indexOf(o);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(o);t>=0&&n.splice(t,1)}}),this.players.push(o),c.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,Ql,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const o=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,sd,r);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&Dl(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(e=>{const i=e.name;if(r.has(i))return;r.add(i);const o=this._triggers[i].fallbackTransition,s=n[i]||ad,a=new od(sd),u=new ld(this.id,i,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:i,transition:o,fromState:s,toState:a,player:u,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==rd||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){gd(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,o=this._elementListeners.get(i);o&&o.forEach(e=>{if(e.name==n.triggerName){const r=Ol(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,xl(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class cd{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new ud(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(hd(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!hd(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),gd(t,td)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),md(t,td))}removeNode(t,e,n,r){if(hd(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return hd(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,Ql,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,Jl,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Dl(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=rd,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,ed)&&this.markElementAsDisabled(t,!1),this.driver.query(t,ed,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)gd(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?Dl(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new Fh,r=[],i=new Map,o=[],s=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=pd(h,this.collectedEnterElements),f=new Map;let p=0;d.forEach((t,e)=>{const n=Yl+p++;f.set(e,n),t.forEach(t=>gd(t,n))});const g=[],m=new Set,y=new Set;for(let k=0;k<this.collectedLeaveElements.length;k++){const t=this.collectedLeaveElements[k],e=t.__ng_removed;e&&e.setForRemoval&&(g.push(t),m.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>m.add(t)):y.add(t))}const v=new Map,_=pd(h,Array.from(m));_.forEach((t,e)=>{const n=Wl+p++;v.set(e,n),t.forEach(t=>gd(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=f.get(e);t.forEach(t=>md(t,n))}),_.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>md(t,n))}),g.forEach(t=>{this.processLeaveNode(t)})});const b=[],w=[];for(let k=this._namespaceList.length-1;k>=0;k--)this._namespaceList[k].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(b.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=v.get(i),d=f.get(i),p=this._buildInstruction(t,n,d,h,c);if(p.errors&&p.errors.length)w.push(p);else{if(c)return e.onStart(()=>ah(i,p.fromStyles)),e.onDestroy(()=>sh(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>ah(i,p.fromStyles)),e.onDestroy(()=>sh(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),o.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>Fl(s,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),b.forEach(t=>t.destroy()),this.reportError(t)}const C=new Map,E=new Map;o.forEach(t=>{const e=t.element;n.has(e)&&(E.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,C))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{Fl(C,e,[]).push(t),t.destroy()})});const S=g.filter(t=>_d(t,a,u)),T=new Map;fd(T,this.driver,y,u,gl).forEach(t=>{_d(t,a,u)&&S.push(t)});const A=new Map;d.forEach((t,e)=>{fd(A,this.driver,new Set(t),a,"!")}),S.forEach(t=>{const e=T.get(t),n=A.get(t);T.set(t,Object.assign(Object.assign({},e),n))});const D=[],I=[],x={};o.forEach(t=>{const{element:e,player:o,instruction:s}=t;if(n.has(e)){if(c.has(e))return o.onDestroy(()=>sh(e,s.toStyles)),o.disabled=!0,o.overrideTotalTime(s.totalTime),void r.push(o);let t=x;if(E.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=E.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>E.set(e,t))}const n=this._buildAnimation(o.namespaceId,s,C,i,A,T);if(o.setRealPlayer(n),t===x)D.push(o);else{const e=this.playersByElement.get(t);e&&e.length&&(o.parentPlayer=Dl(e)),r.push(o)}}else ah(e,s.fromStyles),o.onDestroy(()=>sh(e,s.toStyles)),I.push(o),c.has(e)&&r.push(o)}),I.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=Dl(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let k=0;k<g.length;k++){const t=g[k],e=t.__ng_removed;if(md(t,Wl),e&&e.hasAnimation)continue;let n=[];if(s.size){let e=s.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,Jl,!0);for(let t=0;t<r.length;t++){let e=s.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?yd(this,t,r):this.processLeaveNode(t)}return g.length=0,D.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),D}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let o=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(o=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||i==sd;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&o.push(e)})}}return(n||r)&&(o=o.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),o}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName;for(const s of e.timelines){const t=s.element,a=t!==r,u=Fl(n,t,[]);this._getPreviousPlayers(t,a,i,o,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}ah(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,o){const s=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new El(e.duration,e.delay);const f=h!==a,p=function(t){const e=[];return vd(t,e),e}((n.get(h)||nd).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),g=i.get(h),m=o.get(h),y=Il(0,this._normalizer,0,e.keyframes,g,m),v=this._buildPlayer(e,y,p);if(e.subTimeline&&r&&l.add(h),f){const e=new ld(t,s,h);e.setRealPlayer(v),u.push(e)}return v});u.forEach(t=>{Fl(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>gd(t,Kl));const d=Dl(h);return d.onDestroy(()=>{c.forEach(t=>md(t,Kl)),sh(a,e.toStyles)}),l.forEach(t=>{Fl(r,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new El(t.duration,t.delay)}}class ld{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new El,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>xl(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Fl(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function hd(t){return t&&1===t.nodeType}function dd(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function fd(t,e,n,r,i){const o=[];n.forEach(t=>o.push(dd(t)));const s=[];r.forEach((n,r)=>{const o={};n.forEach(t=>{const n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=id,s.push(r))}),t.set(r,o)});let a=0;return n.forEach(t=>dd(t,o[a++])),s}function pd(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;function o(t){if(!t)return 1;let e=i.get(t);if(e)return e;const s=t.parentNode;return e=n.has(s)?s:r.has(s)?1:o(s),i.set(t,e),e}return e.forEach(t=>{const e=o(t);1!==e&&n.get(e).push(t)}),n}function gd(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function md(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function yd(t,e,n){Dl(n).onDone(()=>t.processLeaveNode(e))}function vd(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof Sl?vd(r.players,e):e.push(r)}}function _d(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class bd{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new cd(t,e,n),this._timelineEngine=new Jh(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const o=t+"-"+r;let s=this._triggerCache[o];if(!s){const t=[],e=Th(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);s=function(t,e){return new $h(t,e)}(r,e),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,r,s)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=Pl(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=Pl(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function wd(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=Ed(e[0]),e.length>1&&(r=Ed(e[e.length-1]))):e&&(n=Ed(e)),n||r?new Cd(t,n,r):null}let Cd=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&sh(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(sh(this._element,this._initialStyles),this._endStyles&&(sh(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(ah(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ah(this._element,this._endStyles),this._endStyles=null),sh(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function Ed(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];Sd(i)&&(e=e||{},e[i]=t[i])}return e}function Sd(t){return"display"===t||"position"===t}const Td="animation",Ad="animationend";class Dd{constructor(t,e,n,r,i,o,s){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=Pd(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),Fd(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Od(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Id(this._element,this._name,"paused")}resume(){Id(this._element,this._name,"running")}setPosition(t){const e=xd(this._element,this._name);this._position=t*this._duration,Fd(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Od(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=Pd(t,"").split(","),r=kd(n,e);r>=0&&(n.splice(r,1),Fd(t,"",n.join(",")))}(this._element,this._name))}}function Id(t,e,n){Fd(t,"PlayState",n,xd(t,e))}function xd(t,e){const n=Pd(t,"");return n.indexOf(",")>0?kd(n.split(","),e):kd([n],e)}function kd(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function Od(t,e,n){n?t.removeEventListener(Ad,e):t.addEventListener(Ad,e)}function Fd(t,e,n,r){const i=Td+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function Pd(t,e){return t.style[Td+e]||""}class Nd{constructor(t,e,n,r,i,o,s,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=s,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Dd(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:vh(this.element,n))})}this.currentSnapshot=t}}class Rd extends El{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=Zl(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class Ld{constructor(){this._count=0}validateStyleProperty(t){return Bl(t)}matchesElement(t,e){return jl(t,e)}containsElement(t,e){return Vl(t,e)}query(t,e,n){return Gl(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>Zl(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const o=document.createElement("style");return o.textContent=r,o}animate(t,e,n,r,i,o=[],s){const a=o.filter(t=>t instanceof Nd),u={};gh(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=mh(t,e,u));if(0==n)return new Rd(t,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);(function(t){var e;const n=null===(e=t.getRootNode)||void 0===e?void 0:e.call(t);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(t).appendChild(h);const d=wd(t,e),f=new Nd(t,e,l,n,r,i,c,d);return f.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),f}}class Md{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:vh(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class qd{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Ud().toString()),this._cssKeyframesDriver=new Ld}validateStyleProperty(t){return Bl(t)}matchesElement(t,e){return jl(t,e)}containsElement(t,e){return Vl(t,e)}query(t,e,n){return Gl(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,o=[],s){if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=o.filter(t=>t instanceof Md);gh(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=wd(t,e=mh(t,e=e.map(t=>rh(t,!1)),u));return new Md(t,e,a,l)}}function Ud(){return Tl()&&Element.prototype.animate||{}}let Bd=(()=>{class t extends pl{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:r.ifc.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?vl(t):t;return Gd(this._renderer,null,e,"register",[n]),new jd(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.FYo),r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class jd extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new Vd(this._id,t,e||{},this._renderer)}}class Vd{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return Gd(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function Gd(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const Zd="@",zd="@.disabled";let Hd=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new Yd("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const o=e=>{Array.isArray(e)?e.forEach(o):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(o),new Wd(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.FYo),r.LFG(bd),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class Yd{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==Zd&&e==zd?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Wd extends Yd{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==Zd?"."==e.charAt(1)&&e==zd?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==Zd){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),o="";return i.charAt(0)!=Zd&&([i,o]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,o,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let $d=(()=>{class t extends bd{constructor(t,e,n){super(t.body,e,n)}ngOnDestroy(){this.flush()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s),r.LFG(Hl),r.LFG(Vh))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const Qd=new r.OlP("AnimationModuleType"),Kd=[{provide:pl,useClass:Bd},{provide:Vh,useFactory:function(){return new Gh}},{provide:bd,useClass:$d},{provide:r.FYo,useFactory:function(t,e,n){return new Hd(t,e,n)},deps:[te,bd,r.R0b]}],Jd=[{provide:Hl,useFactory:function(){return"function"==typeof Ud()?new qd:new Ld}},{provide:Qd,useValue:"BrowserAnimations"},...Kd],Xd=[{provide:Hl,useClass:zl},{provide:Qd,useValue:"NoopAnimations"},...Kd];let tf=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?Xd:Jd}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:Jd,imports:[ge]}),t})();const ef=new r.GfV("12.1.1"),nf=new r.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let rf=(()=>{class t{constructor(t,e,n){this._hasDoneGlobalChecks=!1,this._document=n,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const t=this._document.defaultView||window;return"object"==typeof t&&t?t:null}_checksAreEnabled(){return(0,r.X6Q)()&&!this._isTestEnv()}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype)&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&ef.full!==fl.full&&console.warn("The Angular Material version ("+ef.full+") does not match the Angular CDK version ("+fl.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(ul),r.LFG(nf,8),r.LFG(s))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[dl],dl]}),t})();function of(t,e){return class extends t{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const e=t||this.defaultColor;e!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),e&&this._elementRef.nativeElement.classList.add(`mat-${e}`),this._color=e)}}}const sf=new r.OlP("MAT_DATE_LOCALE",{providedIn:"root",factory:function(){return(0,r.f3M)(r.soG)}});class af{constructor(){this._localeChanges=new Qi.xQ,this.localeChanges=this._localeChanges}getValidDateOrNull(t){return this.isDateInstance(t)&&this.isValid(t)?t:null}deserialize(t){return null==t||this.isDateInstance(t)&&this.isValid(t)?t:this.invalid()}setLocale(t){this.locale=t,this._localeChanges.next()}compareDate(t,e){return this.getYear(t)-this.getYear(e)||this.getMonth(t)-this.getMonth(e)||this.getDate(t)-this.getDate(e)}sameDate(t,e){if(t&&e){let n=this.isValid(t),r=this.isValid(e);return n&&r?!this.compareDate(t,e):n==r}return t==e}clampDate(t,e,n){return e&&this.compareDate(t,e)<0?e:n&&this.compareDate(t,n)>0?n:t}}const uf=new r.OlP("mat-date-formats");let cf;try{cf="undefined"!=typeof Intl}catch(Dk){cf=!1}const lf={long:["January","February","March","April","May","June","July","August","September","October","November","December"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],narrow:["J","F","M","A","M","J","J","A","S","O","N","D"]},hf=pf(31,t=>String(t+1)),df={long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],narrow:["S","M","T","W","T","F","S"]},ff=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function pf(t,e){const n=Array(t);for(let r=0;r<t;r++)n[r]=e(r);return n}let gf=(()=>{class t extends af{constructor(t,e){super(),this.useUtcForDisplay=!0,super.setLocale(t),this.useUtcForDisplay=!e.TRIDENT,this._clampDate=e.TRIDENT||e.EDGE}getYear(t){return t.getFullYear()}getMonth(t){return t.getMonth()}getDate(t){return t.getDate()}getDayOfWeek(t){return t.getDay()}getMonthNames(t){if(cf){const e=new Intl.DateTimeFormat(this.locale,{month:t,timeZone:"utc"});return pf(12,t=>this._stripDirectionalityCharacters(this._format(e,new Date(2017,t,1))))}return lf[t]}getDateNames(){if(cf){const t=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return pf(31,e=>this._stripDirectionalityCharacters(this._format(t,new Date(2017,0,e+1))))}return hf}getDayOfWeekNames(t){if(cf){const e=new Intl.DateTimeFormat(this.locale,{weekday:t,timeZone:"utc"});return pf(7,t=>this._stripDirectionalityCharacters(this._format(e,new Date(2017,0,t+1))))}return df[t]}getYearName(t){if(cf){const e=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._stripDirectionalityCharacters(this._format(e,t))}return String(this.getYear(t))}getFirstDayOfWeek(){return 0}getNumDaysInMonth(t){return this.getDate(this._createDateWithOverflow(this.getYear(t),this.getMonth(t)+1,0))}clone(t){return new Date(t.getTime())}createDate(t,e,n){let r=this._createDateWithOverflow(t,e,n);return r.getMonth(),r}today(){return new Date}parse(t){return"number"==typeof t?new Date(t):t?new Date(Date.parse(t)):null}format(t,e){if(!this.isValid(t))throw Error("NativeDateAdapter: Cannot format invalid date.");if(cf){this._clampDate&&(t.getFullYear()<1||t.getFullYear()>9999)&&(t=this.clone(t)).setFullYear(Math.max(1,Math.min(9999,t.getFullYear()))),e=Object.assign(Object.assign({},e),{timeZone:"utc"});const n=new Intl.DateTimeFormat(this.locale,e);return this._stripDirectionalityCharacters(this._format(n,t))}return this._stripDirectionalityCharacters(t.toDateString())}addCalendarYears(t,e){return this.addCalendarMonths(t,12*e)}addCalendarMonths(t,e){let n=this._createDateWithOverflow(this.getYear(t),this.getMonth(t)+e,this.getDate(t));return this.getMonth(n)!=((this.getMonth(t)+e)%12+12)%12&&(n=this._createDateWithOverflow(this.getYear(n),this.getMonth(n),0)),n}addCalendarDays(t,e){return this._createDateWithOverflow(this.getYear(t),this.getMonth(t),this.getDate(t)+e)}toIso8601(t){return[t.getUTCFullYear(),this._2digit(t.getUTCMonth()+1),this._2digit(t.getUTCDate())].join("-")}deserialize(t){if("string"==typeof t){if(!t)return null;if(ff.test(t)){let e=new Date(t);if(this.isValid(e))return e}}return super.deserialize(t)}isDateInstance(t){return t instanceof Date}isValid(t){return!isNaN(t.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(t,e,n){const r=new Date;return r.setFullYear(t,e,n),r.setHours(0,0,0,0),r}_2digit(t){return("00"+t).slice(-2)}_stripDirectionalityCharacters(t){return t.replace(/[\u200e\u200f]/g,"")}_format(t,e){const n=new Date;return n.setUTCFullYear(e.getFullYear(),e.getMonth(),e.getDate()),n.setUTCHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),t.format(n)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(sf,8),r.LFG(qc))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),mf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:af,useClass:gf}],imports:[[Uc]]}),t})();const yf={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let vf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:uf,useValue:yf}],imports:[[mf]]}),t})(),_f=(()=>{class t{isErrorState(t,e){return!!(t&&t.invalid&&(t.touched||e&&e.submitted))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({factory:function(){return new t},token:t,providedIn:"root"}),t})(),bf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[rf,Uc],rf]}),t})(),wf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[rf]]}),t})(),Cf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[bf,Ot,rf,wf]]}),t})(),Ef=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})(),Sf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[bf,rf,zc,Ef],rf,Ef]}),t})(),Tf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[bf,rf],rf]}),t})();var Af=n(5024);function Df(t,e,n,r){return(0,Af.m)(n)&&(r=n,n=void 0),r?Df(t,e,n).pipe((0,Ee.U)(t=>(0,Ce.k)(t)?r(...t):r(t))):new we.y(r=>{If(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function If(t,e,n,r,i){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,i),o=()=>r.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),o=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),o=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let o=0,s=t.length;o<s;o++)If(t[o],e,n,r,i)}r.add(o)}n(8277),n(1098),n(2709);class xf{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new kf(t,this.durationSelector))}}class kf extends Ti.Ds{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:e}=this;n=e(t)}catch(e){return this.destination.error(e)}const r=(0,Ti.ft)(n,new Ti.IY(this));!r||r.closed?this.clearThrottle():this.add(this.throttled=r)}}clearThrottle(){const{value:t,hasValue:e,throttled:n}=this;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var Of=n(2293);function Ff(t=0,e,n){let r=-1;return(0,Of.k)(e)?r=Number(e)<1?1:Number(e):(0,Qo.K)(e)&&(n=e),(0,Qo.K)(n)||(n=ki.P),new we.y(e=>{const i=(0,Of.k)(t)?t:+t-n.now();return n.schedule(Pf,i,{index:0,period:r,subscriber:e})})}function Pf(t){const{index:e,period:n,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}function Nf(t,e=ki.P){return n=()=>Ff(t,e),function(t){return t.lift(new xf(n))};var n}function Rf(){return t=>t.lift(new Lf)}class Lf{call(t,e){return e.subscribe(new Mf(t))}}class Mf extends Pi.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}let qf=(()=>{class t{constructor(t,e,n){this._ngZone=t,this._platform=e,this._scrolled=new Qi.xQ,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=n}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new we.y(e=>{this._globalSubscription||this._addGlobalListener();const n=t>0?this._scrolled.pipe(Nf(t)).subscribe(e):this._scrolled.subscribe(e);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,xi.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,e)=>this.deregister(e)),this._scrolled.complete()}ancestorScrolled(t,e){const n=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(so(t=>!t||n.indexOf(t)>-1))}getAncestorScrollContainers(t){const e=[];return this.scrollContainers.forEach((n,r)=>{this._scrollableContainsElement(r,t)&&e.push(r)}),e}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,e){let n=xc(e),r=t.getElementRef().nativeElement;do{if(n==r)return!0}while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Df(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.R0b),r.LFG(qc),r.LFG(s,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(r.R0b),r.LFG(qc),r.LFG(s,8))},token:t,providedIn:"root"}),t})(),Uf=(()=>{class t{constructor(t,e,n){this._platform=t,this._change=new Qi.xQ,this._changeListener=t=>{this._change.next(t)},this._document=n,e.runOutsideAngular(()=>{if(t.isBrowser){const t=this._getWindow();t.addEventListener("resize",this._changeListener),t.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:e,height:n}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+n,right:t.left+e,height:n,width:e}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,e=this._getWindow(),n=t.documentElement,r=n.getBoundingClientRect();return{top:-r.top||t.body.scrollTop||e.scrollY||n.scrollTop||0,left:-r.left||t.body.scrollLeft||e.scrollX||n.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(Nf(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(qc),r.LFG(r.R0b),r.LFG(s,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(qc),r.LFG(r.R0b),r.LFG(s,8))},token:t,providedIn:"root"}),t})(),Bf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})(),jf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[dl,Uc,Bf],dl,Bf]}),t})();class Vf{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class Gf extends Vf{constructor(t,e,n,r){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=r}}class Zf extends Vf{constructor(t,e,n){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class zf extends Vf{constructor(t){super(),this.element=t instanceof r.SBq?t.nativeElement:t}}class Hf{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof Gf?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Zf?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof zf?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Yf extends Hf{constructor(t,e,n,r,i){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=t=>{const e=t.element,n=this._document.createComment("dom-portal");e.parentNode.insertBefore(n,e),this.outletElement.appendChild(e),this._attachedPortal=t,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(e,n)})},this._document=i}attachComponentPortal(t){const e=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let n;return t.viewContainerRef?(n=t.viewContainerRef.createComponent(e,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>n.destroy())):(n=e.create(t.injector||this._defaultInjector),this._appRef.attachView(n.hostView),this.setDisposeFn(()=>{this._appRef.detachView(n.hostView),n.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(n)),this._attachedPortal=t,n}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context);return n.rootNodes.forEach(t=>this.outletElement.appendChild(t)),n.detectChanges(),this.setDisposeFn(()=>{let t=e.indexOf(n);-1!==t&&e.remove(t)}),this._attachedPortal=t,n}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let Wf=(()=>{class t extends Hf{constructor(t,e,n){super(),this._componentFactoryResolver=t,this._viewContainerRef=e,this._isInitialized=!1,this.attached=new r.vpe,this.attachDomPortal=t=>{const e=t.element,n=this._document.createComment("dom-portal");t.setAttachedHost(this),e.parentNode.insertBefore(n,e),this._getRootNode().appendChild(e),this._attachedPortal=t,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(e,n)})},this._document=n}get portal(){return this._attachedPortal}set portal(t){(!this.hasAttached()||t||this._isInitialized)&&(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const e=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),r=e.createComponent(n,e.length,t.injector||e.injector);return e!==this._viewContainerRef&&this._getRootNode().appendChild(r.hostView.rootNodes[0]),super.setDisposeFn(()=>r.destroy()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}attachTemplatePortal(t){t.setAttachedHost(this);const e=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=e,this.attached.emit(e),e}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r._Vd),r.Y36(r.s_b),r.Y36(s))},t.\u0275dir=r.lG2({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[r.qOj]}),t})(),$f=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();const Qf=jc();class Kf{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Ic(-this._previousScrollPosition.left),t.style.top=Ic(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,e=t.style,n=this._document.body.style,r=e.scrollBehavior||"",i=n.scrollBehavior||"";this._isEnabled=!1,e.left=this._previousHTMLStyles.left,e.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),Qf&&(e.scrollBehavior=n.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Qf&&(e.scrollBehavior=r,n.scrollBehavior=i)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,e=this._viewportRuler.getViewportSize();return t.scrollHeight>e.height||t.scrollWidth>e.width}}class Jf{constructor(t,e,n,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Xf{enable(){}disable(){}attach(){}}function tp(t,e){return e.some(e=>t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right)}function ep(t,e){return e.some(e=>t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)}class np{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:e,height:n}=this._viewportRuler.getViewportSize();tp(t,[{width:e,height:n,bottom:n,right:e,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let rp=(()=>{class t{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this.noop=()=>new Xf,this.close=t=>new Jf(this._scrollDispatcher,this._ngZone,this._viewportRuler,t),this.block=()=>new Kf(this._viewportRuler,this._document),this.reposition=t=>new np(this._scrollDispatcher,this._viewportRuler,this._ngZone,t),this._document=r}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(qf),r.LFG(Uf),r.LFG(r.R0b),r.LFG(s))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(qf),r.LFG(Uf),r.LFG(r.R0b),r.LFG(s))},token:t,providedIn:"root"}),t})();class ip{constructor(t){if(this.scrollStrategy=new Xf,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const n of e)void 0!==t[n]&&(this[n]=t[n])}}}class op{constructor(t,e,n,r,i){this.offsetX=n,this.offsetY=r,this.panelClass=i,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}}class sp{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let ap=(()=>{class t{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const e=this._attachedOverlays.indexOf(t);e>-1&&this._attachedOverlays.splice(e,1),0===this._attachedOverlays.length&&this.detach()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(s))},token:t,providedIn:"root"}),t})(),up=(()=>{class t extends ap{constructor(t){super(t),this._keydownListener=t=>{const e=this._attachedOverlays;for(let n=e.length-1;n>-1;n--)if(e[n]._keydownEvents.observers.length>0){e[n]._keydownEvents.next(t);break}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(s))},token:t,providedIn:"root"}),t})(),cp=(()=>{class t extends ap{constructor(t,e){super(t),this._platform=e,this._cursorStyleIsSet=!1,this._clickListener=t=>{const e=t.composedPath?t.composedPath()[0]:t.target,n=this._attachedOverlays.slice();for(let r=n.length-1;r>-1;r--){const i=n[r];if(!(i._outsidePointerEvents.observers.length<1)&&i.hasAttached()){if(i.overlayElement.contains(e))break;i._outsidePointerEvents.next(t)}}}}add(t){if(super.add(t),!this._isAttached){const t=this._document.body;t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=t.style.cursor,t.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s),r.LFG(qc))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(s),r.LFG(qc))},token:t,providedIn:"root"}),t})();const lp="undefined"!=typeof window?window:{},hp=void 0!==lp.__karma__&&!!lp.__karma__||void 0!==lp.jasmine&&!!lp.jasmine||void 0!==lp.jest&&!!lp.jest||void 0!==lp.Mocha&&!!lp.Mocha;let dp=(()=>{class t{constructor(t,e){this._platform=e,this._document=t}ngOnDestroy(){const t=this._containerElement;t&&t.parentNode&&t.parentNode.removeChild(t)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||hp){const e=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t])}const e=this._document.createElement("div");e.classList.add(t),hp?e.setAttribute("platform","test"):this._platform.isBrowser||e.setAttribute("platform","server"),this._document.body.appendChild(e),this._containerElement=e}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s),r.LFG(qc))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(s),r.LFG(qc))},token:t,providedIn:"root"}),t})();class fp{constructor(t,e,n,r,i,o,s,a,u){this._portalOutlet=t,this._host=e,this._pane=n,this._config=r,this._ngZone=i,this._keyboardDispatcher=o,this._document=s,this._location=a,this._outsideClickDispatcher=u,this._backdropElement=null,this._backdropClick=new Qi.xQ,this._attachments=new Qi.xQ,this._detachments=new Qi.xQ,this._locationChanges=Xi.w.EMPTY,this._backdropClickHandler=t=>this._backdropClick.next(t),this._keydownEvents=new Qi.xQ,this._outsidePointerEvents=new Qi.xQ,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let e=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(ho(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Ic(this._config.width),t.height=Ic(this._config.height),t.minWidth=Ic(this._config.minWidth),t.minHeight=Ic(this._config.minHeight),t.maxWidth=Ic(this._config.maxWidth),t.maxHeight=Ic(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t,e=this._backdropElement;if(!e)return;let n=()=>{e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",n),e.parentNode&&e.parentNode.removeChild(e)),this._backdropElement==e&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(e,this._config.backdropClass,!1),clearTimeout(t)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",n)}),e.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(n,500))}_toggleClasses(t,e,n){const r=t.classList;Dc(e).forEach(t=>{t&&(n?r.add(t):r.remove(t))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(Fc((0,Oi.T)(this._attachments,this._detachments))).subscribe(()=>{this._pane&&this._host&&0!==this._pane.children.length||(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}}const pp="cdk-overlay-connected-position-bounding-box",gp=/([A-Za-z%]+)$/;class mp{constructor(t,e,n,r,i){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=i,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Qi.xQ,this._resizeSubscription=Xi.w.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(pp),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const t=this._originRect,e=this._overlayRect,n=this._viewportRect,r=[];let i;for(let o of this._preferredPositions){let s=this._getOriginPoint(t,o),a=this._getOverlayPoint(s,e,o),u=this._getOverlayFit(a,e,n,o);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(o,s);this._canFitWithFlexibleDimensions(u,a,n)?r.push({position:o,origin:s,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(s,o)}):(!i||i.overlayFit.visibleArea<u.visibleArea)&&(i={overlayFit:u,overlayPoint:a,originPoint:s,position:o,overlayRect:e})}if(r.length){let t=null,e=-1;for(const n of r){const r=n.boundingBoxRect.width*n.boundingBoxRect.height*(n.position.weight||1);r>e&&(e=r,t=n)}return this._isPushed=!1,void this._applyPosition(t.position,t.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(i.position,i.originPoint);this._applyPosition(i.position,i.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&yp(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(pp),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e){let n,r;if("center"==e.originX)n=t.left+t.width/2;else{const r=this._isRtl()?t.right:t.left,i=this._isRtl()?t.left:t.right;n="start"==e.originX?r:i}return r="center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom,{x:n,y:r}}_getOverlayPoint(t,e,n){let r,i;return r="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,i="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:t.x+r,y:t.y+i}}_getOverlayFit(t,e,n,r){const i=_p(e);let{x:o,y:s}=t,a=this._getOffset(r,"x"),u=this._getOffset(r,"y");a&&(o+=a),u&&(s+=u);let c=0-s,l=s+i.height-n.height,h=this._subtractOverflows(i.width,0-o,o+i.width-n.width),d=this._subtractOverflows(i.height,c,l),f=h*d;return{visibleArea:f,isCompletelyWithinViewport:i.width*i.height===f,fitsInViewportVertically:d===i.height,fitsInViewportHorizontally:h==i.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){const r=n.bottom-e.y,i=n.right-e.x,o=vp(this._overlayRef.getConfig().minHeight),s=vp(this._overlayRef.getConfig().minWidth),a=t.fitsInViewportHorizontally||null!=s&&s<=i;return(t.fitsInViewportVertically||null!=o&&o<=r)&&a}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=_p(e),i=this._viewportRect,o=Math.max(t.x+r.width-i.width,0),s=Math.max(t.y+r.height-i.height,0),a=Math.max(i.top-n.top-t.y,0),u=Math.max(i.left-n.left-t.x,0);let c=0,l=0;return c=r.width<=i.width?u||-o:t.x<this._viewportMargin?i.left-n.left-t.x:0,l=r.height<=i.height?a||-s:t.y<this._viewportMargin?i.top-n.top-t.y:0,this._previousPushAmount={x:c,y:l},{x:t.x+c,y:t.y+l}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const e=this._getScrollVisibility(),n=new sp(t,e);this._positionChanges.next(n)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=t.overlayY;n="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let i=0;i<e.length;i++)e[i].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(t,e){const n=this._viewportRect,r=this._isRtl();let i,o,s,a,u,c;if("top"===e.overlayY)o=t.y,i=n.height-o+this._viewportMargin;else if("bottom"===e.overlayY)s=n.height-t.y+2*this._viewportMargin,i=n.height-s+this._viewportMargin;else{const e=Math.min(n.bottom-t.y+n.top,t.y),r=this._lastBoundingBoxSize.height;i=2*e,o=t.y-e,i>r&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-r/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)c=n.width-t.x+this._viewportMargin,a=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)u=t.x,a=n.right-t.x;else{const e=Math.min(n.right-t.x+n.left,t.x),r=this._lastBoundingBoxSize.width;a=2*e,u=t.x-e,a>r&&!this._isInitialRender&&!this._growAfterOpen&&(u=t.x-r/2)}return{top:o,left:u,bottom:s,right:c,width:a,height:i}}_setBoundingBoxStyles(t,e){const n=this._calculateBoundingBoxRect(t,e);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const t=this._overlayRef.getConfig().maxHeight,i=this._overlayRef.getConfig().maxWidth;r.height=Ic(n.height),r.top=Ic(n.top),r.bottom=Ic(n.bottom),r.width=Ic(n.width),r.left=Ic(n.left),r.right=Ic(n.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",t&&(r.maxHeight=Ic(t)),i&&(r.maxWidth=Ic(i))}this._lastBoundingBoxSize=n,yp(this._boundingBox.style,r)}_resetBoundingBoxStyles(){yp(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){yp(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const n={},r=this._hasExactPosition(),i=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const r=this._viewportRuler.getViewportScrollPosition();yp(n,this._getExactOverlayY(e,t,r)),yp(n,this._getExactOverlayX(e,t,r))}else n.position="static";let s="",a=this._getOffset(e,"x"),u=this._getOffset(e,"y");a&&(s+=`translateX(${a}px) `),u&&(s+=`translateY(${u}px)`),n.transform=s.trim(),o.maxHeight&&(r?n.maxHeight=Ic(o.maxHeight):i&&(n.maxHeight="")),o.maxWidth&&(r?n.maxWidth=Ic(o.maxWidth):i&&(n.maxWidth="")),yp(this._pane.style,n)}_getExactOverlayY(t,e,n){let r={top:"",bottom:""},i=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,n));let o=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return i.y-=o,"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(i.y+this._overlayRect.height)+"px":r.top=Ic(i.y),r}_getExactOverlayX(t,e,n){let r,i={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n)),r=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===r?i.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":i.left=Ic(o.x),i}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(t=>t.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:ep(t,n),isOriginOutsideView:tp(t,n),isOverlayClipped:ep(e,n),isOverlayOutsideView:tp(e,n)}}_subtractOverflows(t,...e){return e.reduce((t,e)=>t-Math.max(e,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Dc(t).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof r.SBq)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}}function yp(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function vp(t){if("number"!=typeof t&&null!=t){const[e,n]=t.split(gp);return n&&"px"!==n?null:parseFloat(e)}return t||null}function _p(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}class bp{constructor(t,e,n,r,i,o,s){this._preferredPositions=[],this._positionStrategy=new mp(n,r,i,o,s).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,e),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(t){this._overlayRef=t,this._positionStrategy.attach(t),this._direction&&(t.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(t){this._positionStrategy.withScrollableContainers(t)}withFallbackPosition(t,e,n,r){const i=new op(t,e,n,r);return this._preferredPositions.push(i),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(t){return this._overlayRef?this._overlayRef.setDirection(t):this._direction=t,this}withOffsetX(t){return this._positionStrategy.withDefaultOffsetX(t),this}withOffsetY(t){return this._positionStrategy.withDefaultOffsetY(t),this}withLockedPosition(t){return this._positionStrategy.withLockedPosition(t),this}withPositions(t){return this._preferredPositions=t.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(t){return this._positionStrategy.setOrigin(t),this}}const wp="cdk-global-overlay-wrapper";class Cp{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(wp),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:i,maxWidth:o,maxHeight:s}=n,a=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),u=!("100%"!==i&&"100vh"!==i||s&&"100%"!==s&&"100vh"!==s);t.position=this._cssPosition,t.marginLeft=a?"0":this._leftOffset,t.marginTop=u?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,a?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=u?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(wp),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let Ep=(()=>{class t{constructor(t,e,n,r){this._viewportRuler=t,this._document=e,this._platform=n,this._overlayContainer=r}global(){return new Cp}connectedTo(t,e,n){return new bp(e,n,t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(t){return new mp(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Uf),r.LFG(s),r.LFG(qc),r.LFG(dp))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Uf),r.LFG(s),r.LFG(qc),r.LFG(dp))},token:t,providedIn:"root"}),t})(),Sp=0,Tp=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u,c,l){this.scrollStrategies=t,this._overlayContainer=e,this._componentFactoryResolver=n,this._positionBuilder=r,this._keyboardDispatcher=i,this._injector=o,this._ngZone=s,this._document=a,this._directionality=u,this._location=c,this._outsideClickDispatcher=l}create(t){const e=this._createHostElement(),n=this._createPaneElement(e),r=this._createPortalOutlet(n),i=new ip(t);return i.direction=i.direction||this._directionality.value,new fp(r,e,n,i,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const e=this._document.createElement("div");return e.id="cdk-overlay-"+Sp++,e.classList.add("cdk-overlay-pane"),t.appendChild(e),e}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(r.z2F)),new Yf(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(rp),r.LFG(dp),r.LFG(r._Vd),r.LFG(Ep),r.LFG(up),r.LFG(r.zs3),r.LFG(r.R0b),r.LFG(s),r.LFG(hl),r.LFG(w),r.LFG(cp))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const Ap={provide:new r.OlP("cdk-connected-overlay-scroll-strategy"),deps:[Tp],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};let Dp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[Tp,Ap],imports:[[dl,$f,jf],jf]}),t})(),Ip=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Ot,rf,zc],rf]}),t})();const xp={provide:new r.OlP("mat-select-scroll-strategy"),deps:[Tp],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};let kp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[xp],imports:[[Ot,Dp,Cf,rf],Bf,Ip,Cf,rf]}),t})(),Op=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Uc]]}),t})(),Fp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[_f],imports:[[Op,Ip,rf],Op,Ip]}),t})(),Pp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[bf,rf],rf]}),t})(),Np=(()=>{class t{constructor(){this.changes=new Qi.xQ,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(t,e){return`${t} \u2013 ${e}`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({factory:function(){return new t},token:t,providedIn:"root"}),t})();const Rp={provide:new r.OlP("mat-datepicker-scroll-strategy"),deps:[Tp],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};let Lp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[Np,Rp],imports:[[Ot,Pp,Dp,cl,$f,rf],Bf]}),t})();var Mp=n(1225);class qp{}class Up{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Up?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Up;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Up?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Bp{encodeKey(t){return jp(t)}encodeValue(t){return jp(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function jp(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function Vp(t){return`${t}`}class Gp{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Bp,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Gp({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(Vp(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(Vp(t.value));-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class Zp{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function zp(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Hp(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Yp(t){return"undefined"!=typeof FormData&&t instanceof FormData}class Wp{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new Up),this.context||(this.context=new Zp),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new Gp,this.urlWithParams=e}serializeBody(){return null===this.body?null:zp(this.body)||Hp(this.body)||Yp(this.body)||"string"==typeof this.body?this.body:this.body instanceof Gp?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Yp(this.body)?null:Hp(this.body)?this.body.type||null:zp(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Gp?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,s=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let u=t.headers||this.headers,c=t.params||this.params;const l=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),u)),t.setParams&&(c=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),c)),new Wp(n,r,o,{params:c,headers:u,context:l,reportProgress:a,responseType:i,withCredentials:s})}}var $p=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class Qp extends class{constructor(t,e=200,n="OK"){this.headers=t.headers||new Up,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(t={}){super(t),this.type=$p.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Qp({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}function Kp(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Jp=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof Wp)r=t;else{let i,o;i=n.headers instanceof Up?n.headers:new Up(n.headers),n.params&&(o=n.params instanceof Gp?n.params:new Gp({fromObject:n.params})),r=new Wp(t,e,void 0!==n.body?n.body:null,{headers:i,context:n.context,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=(0,xi.of)(r).pipe(ls(t=>this.handler.handle(t)));if(t instanceof Wp||"events"===n.observe)return i;const o=i.pipe(so(t=>t instanceof Qp));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe((0,Ee.U)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe((0,Ee.U)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe((0,Ee.U)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe((0,Ee.U)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new Gp).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,Kp(n,e))}post(t,e,n={}){return this.request("POST",t,Kp(n,e))}put(t,e,n={}){return this.request("PUT",t,Kp(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(qp))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const Xp=["*"];function tg(t){return Error(`Unable to find icon with the name "${t}"`)}function eg(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function ng(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}class rg{constructor(t,e,n){this.url=t,this.svgText=e,this.options=n}}let ig=(()=>{class t{constructor(t,e,n,r){this._httpClient=t,this._sanitizer=e,this._errorHandler=r,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=n}addSvgIcon(t,e,n){return this.addSvgIconInNamespace("",t,e,n)}addSvgIconLiteral(t,e,n){return this.addSvgIconLiteralInNamespace("",t,e,n)}addSvgIconInNamespace(t,e,n,r){return this._addSvgIconConfig(t,e,new rg(n,null,r))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,e,n,i){const o=this._sanitizer.sanitize(r.q3G.HTML,n);if(!o)throw ng(n);return this._addSvgIconConfig(t,e,new rg("",o,i))}addSvgIconSet(t,e){return this.addSvgIconSetInNamespace("",t,e)}addSvgIconSetLiteral(t,e){return this.addSvgIconSetLiteralInNamespace("",t,e)}addSvgIconSetInNamespace(t,e,n){return this._addSvgIconSetConfig(t,new rg(e,null,n))}addSvgIconSetLiteralInNamespace(t,e,n){const i=this._sanitizer.sanitize(r.q3G.HTML,e);if(!i)throw ng(e);return this._addSvgIconSetConfig(t,new rg("",i,n))}registerFontClassAlias(t,e=t){return this._fontCssClassesByAlias.set(t,e),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const e=this._sanitizer.sanitize(r.q3G.RESOURCE_URL,t);if(!e)throw eg(t);const n=this._cachedIconsByUrl.get(e);return n?(0,xi.of)(og(n)):this._loadSvgIconFromConfig(new rg(t,null)).pipe((0,ps.b)(t=>this._cachedIconsByUrl.set(e,t)),(0,Ee.U)(t=>og(t)))}getNamedSvgIcon(t,e=""){const n=sg(e,t);let r=this._svgIconConfigs.get(n);if(r)return this._getSvgFromConfig(r);if(r=this._getIconConfigFromResolvers(e,t),r)return this._svgIconConfigs.set(n,r),this._getSvgFromConfig(r);const i=this._iconSetConfigs.get(e);return i?this._getSvgFromIconSetConfigs(t,i):(0,Mp._)(tg(n))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?(0,xi.of)(og(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,Ee.U)(t=>og(t)))}_getSvgFromIconSetConfigs(t,e){const n=this._extractIconWithNameFromAnySet(t,e);return n?(0,xi.of)(n):Te(e.filter(t=>!t.svgText).map(t=>this._loadSvgIconSetFromConfig(t).pipe(ss(e=>{const n=this._sanitizer.sanitize(r.q3G.RESOURCE_URL,t.url);return this._errorHandler.handleError(new Error(`Loading icon set URL: ${n} failed: ${e.message}`)),(0,xi.of)(null)})))).pipe((0,Ee.U)(()=>{const n=this._extractIconWithNameFromAnySet(t,e);if(!n)throw tg(t);return n}))}_extractIconWithNameFromAnySet(t,e){for(let n=e.length-1;n>=0;n--){const r=e[n];if(r.svgText&&r.svgText.indexOf(t)>-1){const e=this._svgElementFromConfig(r),n=this._extractSvgIconFromSet(e,t,r.options);if(n)return n}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,ps.b)(e=>t.svgText=e),(0,Ee.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?(0,xi.of)(null):this._fetchIcon(t).pipe((0,ps.b)(e=>t.svgText=e))}_extractSvgIconFromSet(t,e,n){const r=t.querySelector(`[id="${e}"]`);if(!r)return null;const i=r.cloneNode(!0);if(i.removeAttribute("id"),"svg"===i.nodeName.toLowerCase())return this._setSvgAttributes(i,n);if("symbol"===i.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(i),n);const o=this._svgElementFromString("<svg></svg>");return o.appendChild(i),this._setSvgAttributes(o,n)}_svgElementFromString(t){const e=this._document.createElement("DIV");e.innerHTML=t;const n=e.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}_toSvgElement(t){const e=this._svgElementFromString("<svg></svg>"),n=t.attributes;for(let r=0;r<n.length;r++){const{name:t,value:i}=n[r];"id"!==t&&e.setAttribute(t,i)}for(let r=0;r<t.childNodes.length;r++)t.childNodes[r].nodeType===this._document.ELEMENT_NODE&&e.appendChild(t.childNodes[r].cloneNode(!0));return e}_setSvgAttributes(t,e){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),e&&e.viewBox&&t.setAttribute("viewBox",e.viewBox),t}_fetchIcon(t){var e;const{url:n,options:i}=t,o=null!==(e=null==i?void 0:i.withCredentials)&&void 0!==e&&e;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==n)throw Error(`Cannot fetch icon from URL "${n}".`);const s=this._sanitizer.sanitize(r.q3G.RESOURCE_URL,n);if(!s)throw eg(n);const a=this._inProgressUrlFetches.get(s);if(a)return a;const u=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe(ms(()=>this._inProgressUrlFetches.delete(s)),(0,Fi.B)());return this._inProgressUrlFetches.set(s,u),u}_addSvgIconConfig(t,e,n){return this._svgIconConfigs.set(sg(t,e),n),this}_addSvgIconSetConfig(t,e){const n=this._iconSetConfigs.get(t);return n?n.push(e):this._iconSetConfigs.set(t,[e]),this}_svgElementFromConfig(t){if(!t.svgElement){const e=this._svgElementFromString(t.svgText);this._setSvgAttributes(e,t.options),t.svgElement=e}return t.svgElement}_getIconConfigFromResolvers(t,e){for(let r=0;r<this._resolvers.length;r++){const i=this._resolvers[r](e,t);if(i)return(n=i).url&&n.options?new rg(i.url,null,i.options):new rg(i,null)}var n}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Jp,8),r.LFG(le),r.LFG(s,8),r.LFG(r.qLn))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Jp,8),r.LFG(le),r.LFG(s,8),r.LFG(r.qLn))},token:t,providedIn:"root"}),t})();function og(t){return t.cloneNode(!0)}function sg(t,e){return t+":"+e}const ag=of(class{constructor(t){this._elementRef=t}}),ug=new r.OlP("mat-icon-location",{providedIn:"root",factory:function(){const t=(0,r.f3M)(s),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),cg=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],lg=cg.map(t=>`[${t}]`).join(", "),hg=/^url\(['"]?#(.*?)['"]?\)$/;let dg=(()=>{class t extends ag{constructor(t,e,n,r,i){super(t),this._iconRegistry=e,this._location=r,this._errorHandler=i,this._inline=!1,this._currentIconFetch=Xi.w.EMPTY,n||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){var e;this._inline=null!=(e=t)&&"false"!=`${e}`}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const e=this._cleanupFontValue(t);e!==this._fontSet&&(this._fontSet=e,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const e=this._cleanupFontValue(t);e!==this._fontIcon&&(this._fontIcon=e,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const e=t.split(":");switch(e.length){case 1:return["",e[0]];case 2:return e;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const t=this._location.getPathname();t!==this._previousPath&&(this._previousPath=t,this._prependPathToReferences(t))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const e=t.querySelectorAll("style");for(let r=0;r<e.length;r++)e[r].textContent+=" ";const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let e=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();e--;){const n=t.childNodes[e];1===n.nodeType&&"svg"!==n.nodeName.toLowerCase()||t.removeChild(n)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,e=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();e!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),e&&t.classList.add(e),this._previousFontSetClass=e),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const e=this._elementsWithExternalReferences;e&&e.forEach((e,n)=>{e.forEach(e=>{n.setAttribute(e.name,`url('${t}#${e.value}')`)})})}_cacheChildrenWithExternalReferences(t){const e=t.querySelectorAll(lg),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let r=0;r<e.length;r++)cg.forEach(t=>{const i=e[r],o=i.getAttribute(t),s=o?o.match(hg):null;if(s){let e=n.get(i);e||(e=[],n.set(i,e)),e.push({name:t,value:s[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[e,n]=this._splitIconName(t);e&&(this._svgNamespace=e),n&&(this._svgName=n),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(n,e).pipe(ho(1)).subscribe(t=>this._setSvgElement(t),t=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${e}:${n}! ${t.message}`))})}}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(ig),r.$8M("aria-hidden"),r.Y36(ug),r.Y36(r.qLn))},t.\u0275cmp=r.Xpm({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,e){2&t&&(r.uIk("data-mat-icon-type",e._usingFontIcon()?"font":"svg")("data-mat-icon-name",e._svgName||e.fontIcon)("data-mat-icon-namespace",e._svgNamespace||e.fontSet),r.ekj("mat-icon-inline",e.inline)("mat-icon-no-color","primary"!==e.color&&"accent"!==e.color&&"warn"!==e.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[r.qOj],ngContentSelectors:Xp,decls:1,vars:0,template:function(t,e){1&t&&(r.F$t(),r.Hsn(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),t})(),fg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[rf],rf]}),t})();const pg=new r.OlP("mat-chips-default-options"),gg={separatorKeyCodes:[13]};let mg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[_f,{provide:pg,useValue:gg}],imports:[[rf]]}),t})();function yg(t,e){if(1&t&&(r.O4$(),r._UZ(0,"circle",3)),2&t){const t=r.oxw();r.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),r.uIk("r",t._getCircleRadius())}}function vg(t,e){if(1&t&&(r.O4$(),r._UZ(0,"circle",3)),2&t){const t=r.oxw();r.Udp("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),r.uIk("r",t._getCircleRadius())}}const _g=of(class{constructor(t){this._elementRef=t}},"primary"),bg=new r.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});let wg=(()=>{class t extends _g{constructor(e,n,r,i,o){super(e),this._document=r,this._diameter=100,this._value=0,this._fallbackAnimation=!1,this.mode="determinate";const s=t._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),s.has(r.head)||s.set(r.head,new Set([100])),this._fallbackAnimation=n.EDGE||n.TRIDENT,this._noopAnimations="NoopAnimations"===i&&!!o&&!o._forceAnimations,o&&(o.diameter&&(this.diameter=o.diameter),o.strokeWidth&&(this.strokeWidth=o.strokeWidth))}get diameter(){return this._diameter}set diameter(t){this._diameter=Ac(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),!this._fallbackAnimation&&this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=Ac(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,Ac(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=Vc(t)||this._document.head,this._attachStyleNode(),t.classList.add(`mat-progress-spinner-indeterminate${this._fallbackAnimation?"-fallback":""}-animation`)}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:this._fallbackAnimation&&"indeterminate"===this.mode?.2*this._getStrokeCircumference():null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const e=this._styleRoot,n=this._diameter,r=t._diameters;let i=r.get(e);if(!i||!i.has(n)){const t=this._document.createElement("style");t.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),t.textContent=this._getAnimationText(),e.appendChild(t),i||(i=new Set,r.set(e,i)),i.add(n)}}_getAnimationText(){const t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(qc),r.Y36(s,8),r.Y36(Qd,8),r.Y36(bg))},t.\u0275cmp=r.Xpm({type:t,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(r.uIk("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),r.Udp("width",e.diameter,"px")("height",e.diameter,"px"),r.ekj("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",mode:"mode",diameter:"diameter",strokeWidth:"strokeWidth",value:"value"},exportAs:["matProgressSpinner"],features:[r.qOj],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(r.O4$(),r.TgZ(0,"svg",0),r.YNc(1,yg,1,9,"circle",1),r.YNc(2,vg,1,7,"circle",2),r.qZA()),2&t&&(r.Udp("width",e.diameter,"px")("height",e.diameter,"px"),r.Q6J("ngSwitch","indeterminate"===e.mode),r.uIk("viewBox",e._getViewBox()),r.xp6(1),r.Q6J("ngSwitchCase",!0),r.xp6(1),r.Q6J("ngSwitchCase",!1))},directives:[_t,bt],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:currentColor;stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{animation:mat-progress-spinner-stroke-rotate-fallback 10000ms cubic-bezier(0.87, 0.03, 0.33, 1) infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0deg)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}\n"],encapsulation:2,changeDetection:0}),t._diameters=new WeakMap,t})(),Cg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[rf,Ot],rf]}),t})();const Eg={provide:new r.OlP("mat-tooltip-scroll-strategy"),deps:[Tp],useFactory:function(t){return()=>t.scrollStrategies.reposition({scrollThrottle:20})}};let Sg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[Eg],imports:[[cl,Ot,Dp,rf],rf,Bf]}),t})(),Tg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Ot,rf,$f,bf,zc,cl],rf]}),t})();function Ag(t,e){}class Dg{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const Ig={dialogContainer:ml("dialogContainer",[bl("void, exit",_l({opacity:0,transform:"scale(0.7)"})),bl("enter",_l({transform:"none"})),wl("* => enter",yl("150ms cubic-bezier(0, 0, 0.2, 1)",_l({transform:"none",opacity:1}))),wl("* => void, * => exit",yl("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",_l({opacity:0})))])};let xg=(()=>{class t extends Hf{constructor(t,e,n,i,o,s){super(),this._elementRef=t,this._focusTrapFactory=e,this._changeDetectorRef=n,this._config=o,this._focusMonitor=s,this._animationStateChanged=new r.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=t=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(t)),this._ariaLabelledBy=o.ariaLabelledBy||null,this._document=i}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}attachComponentPortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const e=Gc(),n=this._elementRef.nativeElement;e&&e!==this._document.body&&e!==n&&!n.contains(e)||(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=Gc())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,e=Gc();return t===e||t.contains(e)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(Qc),r.Y36(r.sBO),r.Y36(s,8),r.Y36(Dg),r.Y36(il))},t.\u0275dir=r.lG2({type:t,viewQuery:function(t,e){if(1&t&&r.Gf(Wf,7),2&t){let t;r.iGM(t=r.CRH())&&(e._portalOutlet=t.first)}},features:[r.qOj]}),t})(),kg=(()=>{class t extends xg{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:t,totalTime:e}){"enter"===t?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:e}))}_onAnimationStart({toState:t,totalTime:e}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:e}):"exit"!==t&&"void"!==t||this._animationStateChanged.next({state:"closing",totalTime:e})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275cmp=r.Xpm({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,e){1&t&&r.WFA("@dialogContainer.start",function(t){return e._onAnimationStart(t)})("@dialogContainer.done",function(t){return e._onAnimationDone(t)}),2&t&&(r.Ikx("id",e._id),r.uIk("role",e._config.role)("aria-labelledby",e._config.ariaLabel?null:e._ariaLabelledBy)("aria-label",e._config.ariaLabel)("aria-describedby",e._config.ariaDescribedBy||null),r.d8E("@dialogContainer",e._state))},features:[r.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,e){1&t&&r.YNc(0,Ag,0,0,"ng-template",0)},directives:[Wf],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Ig.dialogContainer]}}),t})(),Og=0;class Fg{constructor(t,e,n="mat-dialog-"+Og++){this._overlayRef=t,this._containerInstance=e,this.id=n,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new Qi.xQ,this._afterClosed=new Qi.xQ,this._beforeClosed=new Qi.xQ,this._state=0,e._id=n,e._animationStateChanged.pipe(so(t=>"opened"===t.state),ho(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(so(t=>"closed"===t.state),ho(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),t.keydownEvents().pipe(so(t=>27===t.keyCode&&!this.disableClose&&!function(t,...e){return e.length?e.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}(t))).subscribe(t=>{t.preventDefault(),Pg(this,"keyboard")}),t.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():Pg(this,"mouse")})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(so(t=>"closing"===t.state),ho(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(t){let e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(t="",e=""){return this._overlayRef.updateSize({width:t,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(t){return this._overlayRef.addPanelClass(t),this}removePanelClass(t){return this._overlayRef.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function Pg(t,e,n){return void 0!==t._containerInstance&&(t._containerInstance._closeInteractionType=e),t.close(n)}const Ng=new r.OlP("MatDialogData"),Rg=new r.OlP("mat-dialog-default-options"),Lg=new r.OlP("mat-dialog-scroll-strategy"),Mg={provide:Lg,deps:[Tp],useFactory:function(t){return()=>t.scrollStrategies.block()}};let qg=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this._overlay=t,this._injector=e,this._defaultOptions=n,this._parentDialog=r,this._overlayContainer=i,this._dialogRefConstructor=s,this._dialogContainerType=a,this._dialogDataToken=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Qi.xQ,this._afterOpenedAtThisLevel=new Qi.xQ,this._ariaHiddenElements=new Map,this.afterAllClosed=rs(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(os(void 0))),this._scrollStrategy=o}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,e){(e=function(t,e){return Object.assign(Object.assign({},e),t)}(e,this._defaultOptions||new Dg)).id&&this.getDialogById(e.id);const n=this._createOverlay(e),r=this._attachDialogContainer(n,e),i=this._attachDialogContent(t,r,n,e);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(i),i.afterClosed().subscribe(()=>this._removeOpenDialog(i)),this.afterOpened.next(i),r._initializeWithAttachedContent(),i}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(e=>e.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(t){const e=this._getOverlayConfig(t);return this._overlay.create(e)}_getOverlayConfig(t){const e=new ip({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(e.backdropClass=t.backdropClass),e}_attachDialogContainer(t,e){const n=r.zs3.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:Dg,useValue:e}]}),i=new Gf(this._dialogContainerType,e.viewContainerRef,n,e.componentFactoryResolver);return t.attach(i).instance}_attachDialogContent(t,e,n,i){const o=new this._dialogRefConstructor(n,e,i.id);if(t instanceof r.Rgc)e.attachTemplatePortal(new Zf(t,null,{$implicit:i.data,dialogRef:o}));else{const n=this._createInjector(i,o,e),r=e.attachComponentPortal(new Gf(t,i.viewContainerRef,n));o.componentInstance=r.instance}return o.updateSize(i.width,i.height).updatePosition(i.position),o}_createInjector(t,e,n){const i=t&&t.viewContainerRef&&t.viewContainerRef.injector,o=[{provide:this._dialogContainerType,useValue:n},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:e}];return!t.direction||i&&i.get(hl,null,r.XFs.Optional)||o.push({provide:hl,useValue:{value:t.direction,change:(0,xi.of)()}}),r.zs3.create({parent:i||this._injector,providers:o})}_removeOpenDialog(t){const e=this.openDialogs.indexOf(t);e>-1&&(this.openDialogs.splice(e,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((t,e)=>{t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const e=t.parentElement.children;for(let n=e.length-1;n>-1;n--){let r=e[n];r===t||"SCRIPT"===r.nodeName||"STYLE"===r.nodeName||r.hasAttribute("aria-live")||(this._ariaHiddenElements.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let e=t.length;for(;e--;)t[e].close()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Tp),r.Y36(r.zs3),r.Y36(void 0),r.Y36(void 0),r.Y36(dp),r.Y36(void 0),r.Y36(r.DyG),r.Y36(r.DyG),r.Y36(r.OlP))},t.\u0275dir=r.lG2({type:t}),t})(),Ug=(()=>{class t extends qg{constructor(t,e,n,r,i,o,s){super(t,e,r,o,s,i,Fg,kg,Ng)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Tp),r.LFG(r.zs3),r.LFG(w,8),r.LFG(Rg,8),r.LFG(Lg),r.LFG(t,12),r.LFG(dp))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Bg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[Ug,Mg],imports:[[Dp,$f,rf],rf]}),t})(),jg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[rf],rf]}),t})();var Vg=n(3103);class Gg{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new Zg(t,this.delay,this.scheduler))}}class Zg extends Pi.L{constructor(t,e,n){super(t),this.delay=e,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,n=e.queue,r=t.scheduler,i=t.destination;for(;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){const e=Math.max(0,n[0].time-r.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(Zg.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,n=new zg(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(Vg.P.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(Vg.P.createComplete()),this.unsubscribe()}}class zg{constructor(t,e){this.time=t,this.notification=e}}const Hg={provide:new r.OlP("mat-menu-scroll-strategy"),deps:[Tp],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};let Yg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[Hg],imports:[rf]}),t})(),Wg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[Hg],imports:[[Ot,rf,bf,Dp,Yg],Bf,rf,Yg]}),t})(),$g=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[Sf,Tf,kp,Fp,Lp,vf,fg,Pp,mg,Cg,Sg,Tg,Bg,jg,Wg]}),t})();function Qg(...t){if(1===t.length){if(!(0,Ce.k)(t[0]))return t[0];t=t[0]}return(0,Ko.n)(t,void 0).lift(new Kg)}class Kg{call(t,e){return e.subscribe(new Jg(t))}}class Jg extends Bi{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let n=0;n<e&&!this.hasFirst;n++){const e=Gi(this,t[n],void 0,n);this.subscriptions&&this.subscriptions.push(e),this.add(e)}this.observables=null}}notifyNext(t,e,n){if(!this.hasFirst){this.hasFirst=!0;for(let t=0;t<this.subscriptions.length;t++)if(t!==n){let e=this.subscriptions[t];e.unsubscribe(),this.remove(e)}this.subscriptions=null}this.destination.next(e)}}n(6054);var Xg=n(5686);function tm(...t){const e=t[t.length-1];return"function"==typeof e&&t.pop(),(0,Ko.n)(t,void 0).lift(new em(e))}class em{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new nm(t,this.resultSelector))}}class nm extends Pi.L{constructor(t,e,n=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;(0,Ce.k)(t)?e.push(new im(t)):e.push("function"==typeof t[Xg.hZ]?new rm(t[Xg.hZ]()):new om(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let n=0;n<e;n++){let e=t[n];e.stillUnsubscribed?this.destination.add(e.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,n=this.destination;for(let o=0;o<e;o++){let e=t[o];if("function"==typeof e.hasValue&&!e.hasValue())return}let r=!1;const i=[];for(let o=0;o<e;o++){let e=t[o],s=e.next();if(e.hasCompleted()&&(r=!0),s.done)return void n.complete();i.push(s.value)}this.resultSelector?this._tryresultSelector(i):n.next(i),r&&n.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class rm{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class im{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[Xg.hZ](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class om extends Ti.Ds{constructor(t,e,n){super(t),this.parent=e,this.observable=n,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[Xg.hZ](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return(0,Ti.ft)(this.observable,new Ti.IY(this))}}const sm=["*"],am=["dialog"];function um(t){return null!=t}function cm(t){return(t||document.body).getBoundingClientRect()}"undefined"==typeof Element||Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(t){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});const lm={animation:!0,transitionTimerDelayMs:5};let hm=(()=>{class t{constructor(){this.animation=lm.animation}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({factory:function(){return new t},token:t,providedIn:"root"}),t})();const dm=()=>{},{transitionTimerDelayMs:fm}=lm,pm=new Map,gm=(t,e,n,r)=>{let i=r.context||{};const o=pm.get(e);if(o)switch(r.runningTransition){case"continue":return lo.E;case"stop":t.run(()=>o.transition$.complete()),i=Object.assign(o.context,i),pm.delete(e)}const s=n(e,r.animation,i)||dm;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return t.run(()=>s()),(0,xi.of)(void 0).pipe(function(t){return e=>new we.y(n=>e.subscribe(e=>t.run(()=>n.next(e)),e=>t.run(()=>n.error(e)),()=>t.run(()=>n.complete())))}(t));const a=new Qi.xQ,u=new Qi.xQ,c=a.pipe(function(...t){return e=>ns(e,(0,xi.of)(...t))}(!0));pm.set(e,{transition$:a,complete:()=>{u.next(),u.complete()},context:i});const l=function(t){const{transitionDelay:e,transitionDuration:n}=window.getComputedStyle(t);return 1e3*(parseFloat(e)+parseFloat(n))}(e);return t.runOutsideAngular(()=>{const n=Df(e,"transitionend").pipe(Fc(c),so(({target:t})=>t===e));Qg(Ff(l+fm).pipe(Fc(c)),n,u).pipe(Fc(c)).subscribe(()=>{pm.delete(e),t.run(()=>{s(),a.next(),a.complete()})})}),a.asObservable()};let mm=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Ot]]}),t})(),ym=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Ot]]}),t})(),vm=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})(),_m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Ot]]}),t})(),bm=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();var wm=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}({});const Cm=(t,e)=>!!e&&e.some(e=>e.contains(t)),Em=(t,e)=>!e||null!=function(t,e){return e?void 0===t.closest?null:t.closest(e):null}(t,e),Sm="undefined"!=typeof navigator&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const Tm=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Am(t){const e=Array.from(t.querySelectorAll(Tm)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}const Dm=/\s+/,Im=new class{getAllStyles(t){return window.getComputedStyle(t)}getStyle(t,e){return this.getAllStyles(t)[e]}isStaticPositioned(t){return"static"===(this.getStyle(t,"position")||"static")}offsetParent(t){let e=t.offsetParent||document.documentElement;for(;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement}position(t,e=!0){let n,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))n=t.getBoundingClientRect(),n={top:n.top,bottom:n.bottom,left:n.left,right:n.right,height:n.height,width:n.width};else{const e=this.offsetParent(t);n=this.offset(t,!1),e!==document.documentElement&&(r=this.offset(e,!1)),r.top+=e.clientTop,r.left+=e.clientLeft}return n.top-=r.top,n.bottom-=r.top,n.left-=r.left,n.right-=r.left,e&&(n.top=Math.round(n.top),n.bottom=Math.round(n.bottom),n.left=Math.round(n.left),n.right=Math.round(n.right)),n}offset(t,e=!0){const n=t.getBoundingClientRect(),r=window.pageYOffset-document.documentElement.clientTop,i=window.pageXOffset-document.documentElement.clientLeft;let o={height:n.height||t.offsetHeight,width:n.width||t.offsetWidth,top:n.top+r,bottom:n.bottom+r,left:n.left+i,right:n.right+i};return e&&(o.height=Math.round(o.height),o.width=Math.round(o.width),o.top=Math.round(o.top),o.bottom=Math.round(o.bottom),o.left=Math.round(o.left),o.right=Math.round(o.right)),o}positionElements(t,e,n,r){const[i="top",o="center"]=n.split("-"),s=r?this.offset(t,!1):this.position(t,!1),a=this.getAllStyles(e),u=parseFloat(a.marginTop),c=parseFloat(a.marginBottom),l=parseFloat(a.marginLeft),h=parseFloat(a.marginRight);let d=0,f=0;switch(i){case"top":d=s.top-(e.offsetHeight+u+c);break;case"bottom":d=s.top+s.height;break;case"left":f=s.left-(e.offsetWidth+l+h);break;case"right":f=s.left+s.width}switch(o){case"top":d=s.top;break;case"bottom":d=s.top+s.height-e.offsetHeight;break;case"left":f=s.left;break;case"right":f=s.left+s.width-e.offsetWidth;break;case"center":"top"===i||"bottom"===i?f=s.left+s.width/2-e.offsetWidth/2:d=s.top+s.height/2-e.offsetHeight/2}e.style.transform=`translate(${Math.round(f)}px, ${Math.round(d)}px)`;const p=e.getBoundingClientRect(),g=document.documentElement,m=window.innerHeight||g.clientHeight,y=window.innerWidth||g.clientWidth;return p.left>=0&&p.top>=0&&p.right<=y&&p.bottom<=m}};new Date(1882,10,12),new Date(2174,10,25);let xm=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Ot,Yn]]}),t})(),km=(()=>{class t{constructor(){this.autoClose=!0,this.placement=["bottom-left","bottom-right","top-left","top-right"]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({factory:function(){return new t},token:t,providedIn:"root"}),t})(),Om=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["",8,"navbar"]]}),t})(),Fm=(()=>{class t{constructor(t){this.elementRef=t,this._disabled=!1}set disabled(t){this._disabled=""===t||!0===t}get disabled(){return this._disabled}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:2,hostBindings:function(t,e){2&t&&r.ekj("disabled",e.disabled)},inputs:{disabled:"disabled"}}),t})(),Pm=(()=>{class t{constructor(t,e){this.dropdown=t,this.placement="bottom",this.isOpen=!1,this.nativeElement=e.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(r.Y36((0,r.Gpc)(()=>Lm)),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(t,e,n){if(1&t&&r.Suo(n,Fm,4),2&t){let t;r.iGM(t=r.CRH())&&(e.menuItems=t)}},hostVars:5,hostBindings:function(t,e){1&t&&r.NdJ("keydown.ArrowUp",function(t){return e.dropdown.onKeyDown(t)})("keydown.ArrowDown",function(t){return e.dropdown.onKeyDown(t)})("keydown.Home",function(t){return e.dropdown.onKeyDown(t)})("keydown.End",function(t){return e.dropdown.onKeyDown(t)})("keydown.Enter",function(t){return e.dropdown.onKeyDown(t)})("keydown.Space",function(t){return e.dropdown.onKeyDown(t)})("keydown.Tab",function(t){return e.dropdown.onKeyDown(t)})("keydown.Shift.Tab",function(t){return e.dropdown.onKeyDown(t)}),2&t&&(r.uIk("x-placement",e.placement),r.ekj("dropdown-menu",!0)("show",e.dropdown.isOpen()))}}),t})(),Nm=(()=>{class t{constructor(t,e){this.dropdown=t,this.nativeElement=e.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(r.Y36((0,r.Gpc)(()=>Lm)),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(t,e){2&t&&r.uIk("aria-expanded",e.dropdown.isOpen())}}),t})(),Rm=(()=>{class t extends Nm{constructor(t,e){super(t,e)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36((0,r.Gpc)(()=>Lm)),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(t,e){1&t&&r.NdJ("click",function(){return e.dropdown.toggle()})("keydown.ArrowUp",function(t){return e.dropdown.onKeyDown(t)})("keydown.ArrowDown",function(t){return e.dropdown.onKeyDown(t)})("keydown.Home",function(t){return e.dropdown.onKeyDown(t)})("keydown.End",function(t){return e.dropdown.onKeyDown(t)})("keydown.Tab",function(t){return e.dropdown.onKeyDown(t)})("keydown.Shift.Tab",function(t){return e.dropdown.onKeyDown(t)}),2&t&&r.uIk("aria-expanded",e.dropdown.isOpen())},features:[r._Bn([{provide:Nm,useExisting:(0,r.Gpc)(()=>t)}]),r.qOj]}),t})(),Lm=(()=>{class t{constructor(t,e,n,i,o,s,a){this._changeDetector=t,this._document=n,this._ngZone=i,this._elementRef=o,this._renderer=s,this._closed$=new Qi.xQ,this._bodyContainer=null,this._open=!1,this.openChange=new r.vpe,this.placement=e.placement,this.container=e.container,this.autoClose=e.autoClose,this.display=a?"static":"dynamic",this._zoneSubscription=i.onStable.subscribe(()=>{this._positionMenu()})}ngAfterContentInit(){this._ngZone.onStable.pipe(ho(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(t){if(t.container&&this._open&&this._applyContainer(this.container),t.placement&&!t.placement.isFirstChange&&this._applyPlacementClasses(),t.dropdownClass){const{currentValue:e,previousValue:n}=t.dropdownClass;this._applyCustomDropdownClass(e,n)}}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&this._anchor.nativeElement.focus())}_setCloseHandlers(){!function(t,e,n,r,i,o,s,a){n&&t.runOutsideAngular((t=>Sm?()=>setTimeout(()=>t(),100):t)(()=>{const u=Df(e,"keydown").pipe(Fc(i),so(t=>t.which===wm.Escape),(0,ps.b)(t=>t.preventDefault())),c=Df(e,"mousedown").pipe((0,Ee.U)(t=>{const e=t.target;return 2!==t.button&&!Cm(e,s)&&("inside"===n?Cm(e,o)&&Em(e,a):"outside"===n?!Cm(e,o):Em(e,a)||!Cm(e,o))}),Fc(i)),l=Df(e,"mouseup").pipe(Zi(c),so(([t,e])=>e),function(t,e=ki.P){var n;const r=(n=t)instanceof Date&&!isNaN(+n)?+t-e.now():Math.abs(t);return t=>t.lift(new Gg(r,e))}(0),Fc(i));Qg([u.pipe((0,Ee.U)(t=>0)),l.pipe((0,Ee.U)(t=>1))]).subscribe(e=>t.run(()=>r(e)))}))}(this._ngZone,this._document,this.autoClose,t=>{this.close(),0===t&&this._anchor.nativeElement.focus()},this._closed$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._resetContainer(),this._closed$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this._resetContainer(),this._closed$.next(),this._zoneSubscription.unsubscribe()}onKeyDown(t){const e=t.which,n=this._getMenuElements();let r=-1,i=null;const o=this._isEventFromToggle(t);if(!o&&n.length&&n.forEach((e,n)=>{e.contains(t.target)&&(i=e),e===this._document.activeElement&&(r=n)}),e!==wm.Space&&e!==wm.Enter){if(e!==wm.Tab){if(o||i){if(this.open(),n.length){switch(e){case wm.ArrowDown:r=Math.min(r+1,n.length-1);break;case wm.ArrowUp:if(this._isDropup()&&-1===r){r=n.length-1;break}r=Math.max(r-1,0);break;case wm.Home:r=0;break;case wm.End:r=n.length-1}n[r].focus()}t.preventDefault()}}else if(t.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===t.target)return void("body"!==this.container||t.shiftKey?t.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const e=this._menu.nativeElement.querySelectorAll(Tm);t.shiftKey&&t.target===e[0]?(this._anchor.nativeElement.focus(),t.preventDefault()):t.shiftKey||t.target!==e[e.length-1]||(this._anchor.nativeElement.focus(),this.close())}else Df(t.target,"focusout").pipe(ho(1)).subscribe(({relatedTarget:t})=>{this._elementRef.nativeElement.contains(t)||this.close()})}}else!i||!0!==this.autoClose&&"inside"!==this.autoClose||Df(i,"click").pipe(ho(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(t){return this._anchor.nativeElement.contains(t.target)}_getMenuElements(){const t=this._menu;return null==t?[]:t.menuItems.filter(t=>!t.disabled).map(t=>t.elementRef.nativeElement)}_positionMenu(){const t=this._menu;this.isOpen()&&t&&this._applyPlacementClasses("dynamic"===this.display?function(t,e,n,r,i){let o=Array.isArray(n)?n:n.split(Dm);const s=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],a=t=>{const[e,n]=t.split("-"),r=[];return r};let u=o.findIndex(t=>"auto"===t);u>=0&&s.forEach(function(t){null==o.find(e=>-1!==e.search("^"+t))&&o.splice(u++,1,t)});const c=e.style;c.position="absolute",c.top="0",c.left="0",c["will-change"]="transform";let l=null,h=!1;for(l of o){a(l);if(Im.positionElements(t,e,l,r)){h=!0;break}}return h||(l=o[0],a(l),Im.positionElements(t,e,l,r)),l}(this._anchor.nativeElement,this._bodyContainer||this._menu.nativeElement,this.placement,"body"===this.container):this._getFirstPlacement(this.placement))}_getFirstPlacement(t){return Array.isArray(t)?t[0]:t.split(" ")[0]}_resetContainer(){const t=this._renderer;if(this._menu){const e=this._menu.nativeElement;t.appendChild(this._elementRef.nativeElement,e),t.removeStyle(e,"position"),t.removeStyle(e,"transform")}this._bodyContainer&&(t.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(t=null){if(this._resetContainer(),"body"===t){const t=this._renderer,e=this._menu.nativeElement,n=this._bodyContainer=this._bodyContainer||t.createElement("div");t.setStyle(n,"position","absolute"),t.setStyle(e,"position","static"),t.setStyle(n,"z-index","1050"),t.appendChild(n,e),t.appendChild(this._document.body,n)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(t,e){const n="body"===this.container?this._bodyContainer:this._elementRef.nativeElement;n&&(e&&this._renderer.removeClass(n,e),t&&this._renderer.addClass(n,t))}_applyPlacementClasses(t){const e=this._menu;if(e){t||(t=this._getFirstPlacement(this.placement));const n=this._renderer,r=this._elementRef.nativeElement;n.removeClass(r,"dropup"),n.removeClass(r,"dropdown"),e.placement="static"===this.display?null:t;const i=-1!==t.search("^top")?"dropup":"dropdown";n.addClass(r,i);const o=this._bodyContainer;o&&(n.removeClass(o,"dropup"),n.removeClass(o,"dropdown"),n.addClass(o,i))}}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.sBO),r.Y36(km),r.Y36(s),r.Y36(r.R0b),r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(Om,8))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngbDropdown",""]],contentQueries:function(t,e,n){if(1&t&&(r.Suo(n,Pm,5),r.Suo(n,Nm,5)),2&t){let t;r.iGM(t=r.CRH())&&(e._menu=t.first),r.iGM(t=r.CRH())&&(e._anchor=t.first)}},hostVars:2,hostBindings:function(t,e){2&t&&r.ekj("show",e.isOpen())},inputs:{_open:["open","_open"],placement:"placement",container:"container",autoClose:"autoClose",display:"display",dropdownClass:"dropdownClass"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[r.TTD]}),t})(),Mm=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})(),qm=(()=>{class t{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(hm))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(hm))},token:t,providedIn:"root"}),t})();class Um{constructor(t,e,n){this.nodes=t,this.viewRef=e,this.componentRef=n}}const Bm=()=>{};let jm=(()=>{class t{constructor(t){this._document=t}compensate(){const t=this._getWidth();return this._isPresent(t)?this._adjustBody(t):Bm}_adjustBody(t){const e=this._document.body,n=e.style.paddingRight,r=parseFloat(window.getComputedStyle(e)["padding-right"]);return e.style["padding-right"]=`${r+t}px`,()=>e.style["padding-right"]=n}_isPresent(t){const e=this._document.body.getBoundingClientRect();return window.innerWidth-(e.left+e.right)>=t-.1*t}_getWidth(){const t=this._document.createElement("div");t.className="modal-scrollbar-measure";const e=this._document.body;e.appendChild(t);const n=t.getBoundingClientRect().width-t.clientWidth;return e.removeChild(t),n}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(s))},token:t,providedIn:"root"}),t})(),Vm=(()=>{class t{constructor(t,e){this._el=t,this._zone=e}ngOnInit(){this._zone.onStable.asObservable().pipe(ho(1)).subscribe(()=>{gm(this._zone,this._el.nativeElement,(t,e)=>{e&&cm(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return gm(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.R0b))},t.\u0275cmp=r.Xpm({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(t,e){2&t&&(r.Tol("modal-backdrop"+(e.backdropClass?" "+e.backdropClass:"")),r.ekj("show",!e.animation)("fade",e.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();class Gm{close(t){}dismiss(t){}}class Zm{constructor(t,e,n,r){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=n,this._beforeDismiss=r,this._closed=new Qi.xQ,this._dismissed=new Qi.xQ,this._hidden=new Qi.xQ,t.instance.dismissEvent.subscribe(t=>{this.dismiss(t)}),this.result=new Promise((t,e)=>{this._resolve=t,this._reject=e}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Fc(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Fc(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();e&&e.then?e.then(e=>{!1!==e&&this._dismiss(t)},()=>{}):!1!==e&&this._dismiss(t)}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,xi.of)(void 0);t.subscribe(()=>{const{nativeElement:t}=this._windowCmptRef.location;t.parentNode.removeChild(t),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:t}=this._backdropCmptRef.location;t.parentNode.removeChild(t),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),tm(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var zm=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}({});let Hm=(()=>{class t{constructor(t,e,n){this._document=t,this._elRef=e,this._zone=n,this._closed$=new Qi.xQ,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new r.vpe,this.shown=new Qi.xQ,this.hidden=new Qi.xQ}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(ho(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,e={animation:this.animation,runningTransition:"stop"},n=tm(gm(this._zone,t,()=>t.classList.remove("show"),e),gm(this._zone,this._dialogEl.nativeElement,()=>{},e));return n.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),n}_show(){const t={animation:this.animation,runningTransition:"continue"};tm(gm(this._zone,this._elRef.nativeElement,(t,e)=>{e&&cm(t),t.classList.add("show")},t),gm(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{Df(t,"keydown").pipe(Fc(this._closed$),so(t=>t.which===wm.Escape)).subscribe(t=>{this.keyboard?requestAnimationFrame(()=>{t.defaultPrevented||this._zone.run(()=>this.dismiss(zm.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let e=!1;Df(this._dialogEl.nativeElement,"mousedown").pipe(Fc(this._closed$),(0,ps.b)(()=>e=!1),Ai(()=>Df(t,"mouseup").pipe(Fc(this._closed$),ho(1))),so(({target:e})=>t===e)).subscribe(()=>{e=!0}),Df(t,"click").pipe(Fc(this._closed$)).subscribe(({target:n})=>{t===n&&("static"===this.backdrop?this._bumpBackdrop():!0!==this.backdrop||e||this._zone.run(()=>this.dismiss(zm.BACKDROP_CLICK))),e=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const e=t.querySelector("[ngbAutofocus]"),n=Am(t)[0];(e||n||t).focus()}}_restoreFocus(){const t=this._document.body,e=this._elWithFocus;let n;n=e&&e.focus&&t.contains(e)?e:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>n.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&gm(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(s),r.Y36(r.SBq),r.Y36(r.R0b))},t.\u0275cmp=r.Xpm({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(t,e){if(1&t&&r.Gf(am,7),2&t){let t;r.iGM(t=r.CRH())&&(e._dialogEl=t.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,e){2&t&&(r.uIk("aria-modal",!0)("aria-labelledby",e.ariaLabelledBy)("aria-describedby",e.ariaDescribedBy),r.Tol("modal d-block"+(e.windowClass?" "+e.windowClass:"")),r.ekj("fade",e.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:sm,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,e){1&t&&(r.F$t(),r.TgZ(0,"div",0,1),r.TgZ(2,"div",2),r.Hsn(3),r.qZA(),r.qZA()),2&t&&r.Tol("modal-dialog"+(e.size?" modal-"+e.size:"")+(e.centered?" modal-dialog-centered":"")+(e.scrollable?" modal-dialog-scrollable":"")+(e.modalDialogClass?" "+e.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),t})(),Ym=(()=>{class t{constructor(t,e,n,i,o,s){this._applicationRef=t,this._injector=e,this._document=n,this._scrollBar=i,this._rendererFactory=o,this._ngZone=s,this._activeWindowCmptHasChanged=new Qi.xQ,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new r.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const t=this._windowCmpts[this._windowCmpts.length-1];((t,e,n,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const t=Df(e,"focusin").pipe(Fc(n),(0,Ee.U)(t=>t.target));Df(e,"keydown").pipe(Fc(n),so(t=>t.which===wm.Tab),Zi(t)).subscribe(([t,n])=>{const[r,i]=Am(e);n!==r&&n!==e||!t.shiftKey||(i.focus(),t.preventDefault()),n!==i||t.shiftKey||(r.focus(),t.preventDefault())}),r&&Df(e,"click").pipe(Fc(n),Zi(t),(0,Ee.U)(t=>t[1])).subscribe(t=>t.focus())})})(0,t.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(t.location.nativeElement)}})}open(t,e,n,r){const i=r.container instanceof HTMLElement?r.container:um(r.container)?this._document.querySelector(r.container):this._document.body,o=this._rendererFactory.createRenderer(null,null),s=this._scrollBar.compensate(),a=()=>{this._modalRefs.length||(o.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!i)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);const u=new Gm,c=this._getContentRef(t,r.injector||e,n,u,r);let l=!1!==r.backdrop?this._attachBackdrop(t,i):void 0,h=this._attachWindowComponent(t,i,c),d=new Zm(h,c,l,r.beforeDismiss);return this._registerModalRef(d),this._registerWindowCmpt(h),d.result.then(s,s),d.result.then(a,a),u.close=t=>{d.close(t)},u.dismiss=t=>{d.dismiss(t)},this._applyWindowOptions(h.instance,r),1===this._modalRefs.length&&o.addClass(this._document.body,"modal-open"),l&&l.instance&&(this._applyBackdropOptions(l.instance,r),l.changeDetectorRef.detectChanges()),h.changeDetectorRef.detectChanges(),d}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(e=>e.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,e){let n=t.resolveComponentFactory(Vm).create(this._injector);return this._applicationRef.attachView(n.hostView),e.appendChild(n.location.nativeElement),n}_attachWindowComponent(t,e,n){let r=t.resolveComponentFactory(Hm).create(this._injector,n.nodes);return this._applicationRef.attachView(r.hostView),e.appendChild(r.location.nativeElement),r}_applyWindowOptions(t,e){this._windowAttributes.forEach(n=>{um(e[n])&&(t[n]=e[n])})}_applyBackdropOptions(t,e){this._backdropAttributes.forEach(n=>{um(e[n])&&(t[n]=e[n])})}_getContentRef(t,e,n,i,o){return n?n instanceof r.Rgc?this._createFromTemplateRef(n,i):"string"==typeof n?this._createFromString(n):this._createFromComponent(t,e,n,i,o):new Um([])}_createFromTemplateRef(t,e){const n=t.createEmbeddedView({$implicit:e,close(t){e.close(t)},dismiss(t){e.dismiss(t)}});return this._applicationRef.attachView(n),new Um([n.rootNodes],n)}_createFromString(t){const e=this._document.createTextNode(`${t}`);return new Um([[e]])}_createFromComponent(t,e,n,i,o){const s=t.resolveComponentFactory(n),a=r.zs3.create({providers:[{provide:Gm,useValue:i}],parent:e}),u=s.create(a),c=u.location.nativeElement;return o.scrollable&&c.classList.add("component-host-scrollable"),this._applicationRef.attachView(u.hostView),new Um([[c]],u.hostView,u)}_setAriaHidden(t){const e=t.parentElement;e&&t!==this._document.body&&(Array.from(e.children).forEach(e=>{e!==t&&"SCRIPT"!==e.nodeName&&(this._ariaHiddenValues.set(e,e.getAttribute("aria-hidden")),e.setAttribute("aria-hidden","true"))}),this._setAriaHidden(e))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,e)=>{t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const e=()=>{const e=this._modalRefs.indexOf(t);e>-1&&(this._modalRefs.splice(e,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(e,e)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const e=this._windowCmpts.indexOf(t);e>-1&&(this._windowCmpts.splice(e,1),this._activeWindowCmptHasChanged.next())})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.z2F),r.LFG(r.zs3),r.LFG(s),r.LFG(jm),r.LFG(r.FYo),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(r.z2F),r.LFG(r.gxx),r.LFG(s),r.LFG(jm),r.LFG(r.FYo),r.LFG(r.R0b))},token:t,providedIn:"root"}),t})(),Wm=(()=>{class t{constructor(t,e,n,r){this._moduleCFR=t,this._injector=e,this._modalStack=n,this._config=r}open(t,e={}){const n=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),e);return this._modalStack.open(this._moduleCFR,this._injector,t,n)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r._Vd),r.LFG(r.zs3),r.LFG(Ym),r.LFG(qm))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(r._Vd),r.LFG(r.gxx),r.LFG(Ym),r.LFG(qm))},token:t,providedIn:"root"}),t})(),$m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[Wm]}),t})(),Qm=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Ot]]}),t})(),Km=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Ot]]}),t})(),Jm=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Ot]]}),t})(),Xm=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Ot]]}),t})(),ty=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Ot]]}),t})(),ey=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Ot]]}),t})(),ny=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Ot]]}),t})(),ry=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();new r.OlP("live announcer delay",{providedIn:"root",factory:function(){return 100}});let iy=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Ot]]}),t})();const oy=[mm,ym,vm,_m,bm,xm,Mm,$m,Qm,Km,Jm,Xm,ty,ey,ny,ry,iy];let sy=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[oy,mm,ym,vm,_m,bm,xm,Mm,$m,Qm,Km,Jm,Xm,ty,ey,ny,ry,iy]}),t})();var ay=n(4762);class uy{constructor(t,e,n,r){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=r}call(t,e){return e.subscribe(new cy(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))}}class cy extends Pi.L{constructor(t,e,n,r,i){super(t),this.keySelector=e,this.elementSelector=n,this.durationSelector=r,this.subjectSelector=i,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}_next(t){let e;try{e=this.keySelector(t)}catch(n){return void this.error(n)}this._group(t,e)}_group(t,e){let n=this.groups;n||(n=this.groups=new Map);let r,i=n.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(o){this.error(o)}else r=t;if(!i){i=this.subjectSelector?this.subjectSelector():new Qi.xQ,n.set(e,i);const t=new hy(e,i,this);if(this.destination.next(t),this.durationSelector){let t;try{t=this.durationSelector(new hy(e,i))}catch(o){return void this.error(o)}this.add(t.subscribe(new ly(e,i,this)))}}i.closed||i.next(r)}_error(t){const e=this.groups;e&&(e.forEach((e,n)=>{e.error(t)}),e.clear()),this.destination.error(t)}_complete(){const t=this.groups;t&&(t.forEach((t,e)=>{t.complete()}),t.clear()),this.destination.complete()}removeGroup(t){this.groups.delete(t)}unsubscribe(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&super.unsubscribe())}}class ly extends Pi.L{constructor(t,e,n){super(e),this.key=t,this.group=e,this.parent=n}_next(t){this.complete()}_unsubscribe(){const{parent:t,key:e}=this;this.key=this.parent=null,t&&t.removeGroup(e)}}class hy extends we.y{constructor(t,e,n){super(),this.key=t,this.groupSubject=e,this.refCountSubscription=n}_subscribe(t){const e=new Xi.w,{refCountSubscription:n,groupSubject:r}=this;return n&&!n.closed&&e.add(new dy(n)),e.add(r.subscribe(t)),e}}class dy extends Xi.w{constructor(t){super(),this.parent=t,t.count++}unsubscribe(){const t=this.parent;t.closed||this.closed||(super.unsubscribe(),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())}}const fy=new r.OlP("angularfire2.analytics.analyticsCollectionEnabled"),py=new r.OlP("angularfire2.analytics.appVersion"),gy=new r.OlP("angularfire2.analytics.appName"),my=new r.OlP("angularfire2.analytics.debugMode"),yy=new r.OlP("angularfire2.analytics.config");let vy=(()=>{class t{constructor(t,e,r,i,o,s,a,u){if(this.analyticsInitialized=new Promise(()=>{}),Ft(a)){window.dataLayer=window.dataLayer||[];const t=(...t)=>"config"===t[0]&&"firebase"===t[2].origin&&(this.measurementId=t[1],!0),e=t=>{window.gtag=(...e)=>{t&&t(...e),"event"===e[0]&&e[2].send_to===this.measurementId&&(i&&(e[2].app_name=i),r&&(e[2].app_version=r)),o&&"undefined"!=typeof console&&console.info(...e),function(...t){window.dataLayer.push(arguments)}(...e)}};window.dataLayer.some(t)?(this.analyticsInitialized=Promise.resolve(),e()):this.analyticsInitialized=new Promise(n=>{e((...e)=>{t(...e)&&n()})}),s&&this.updateConfig(s),o&&this.updateConfig({debug_mode:1})}else this.analyticsInitialized=Promise.resolve();const c=(0,xi.of)(void 0).pipe((0,Ki.QV)(new $i.HU(u).outsideAngular),Ai(()=>Ft(a)?u.runOutsideAngular(()=>n.e(497).then(n.bind(n,2497))):lo.E),(0,Ee.U)(()=>(0,$i.sI)("analytics","AngularFireAnalytics",t,()=>{const n=t.analytics();return!1===e&&n.setAnalyticsCollectionEnabled(!1),n},[t,e,s,o])),io({bufferSize:1,refCount:!1}));return(0,$i.pX)(this,c,u)}updateConfig(t){return(0,ay.mG)(this,void 0,void 0,function*(){yield this.analyticsInitialized,window.gtag("config",this.measurementId,Object.assign(Object.assign({},t),{update:!0}))})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG($i.Ot),r.LFG(fy,8),r.LFG(py,8),r.LFG(gy,8),r.LFG(my,8),r.LFG(yy,8),r.LFG(r.Lbi),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG($i.Ot),r.LFG(fy,8),r.LFG(py,8),r.LFG(gy,8),r.LFG(my,8),r.LFG(yy,8),r.LFG(r.Lbi),r.LFG(r.R0b))},token:t,providedIn:"any"}),t})();(0,$i.GT)(vy,[{app:null,logEvent:null,setCurrentScreen:null,setUserId:null,setUserProperties:null,setAnalyticsCollectionEnabled:null}]);let _y=(()=>{class t{constructor(t,e,n,r){if(this.disposables=[],Pt(e))this.initialized=Promise.resolve();else{let e;this.initialized=r.runOutsideAngular(()=>new Promise(t=>e=t)),this.disposables=[n.authState.subscribe(n=>{t.setUserId(null==n?void 0:n.uid),e()}),n.credential.subscribe(e=>{if(e){const n=e.user.isAnonymous?"anonymous":e.additionalUserInfo.providerId;e.additionalUserInfo.isNewUser&&t.logEvent("sign_up",{method:n}),t.logEvent("login",{method:n})}})]}}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(vy),r.LFG(r.Lbi),r.LFG(Fo),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const by="screen_class";let wy=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const Cy={},Ey=t=>{const e=[t.screen_class,t.outlet].join("#");if(Cy.hasOwnProperty(e))return Cy[e];{const t=wy++;return Cy[e]=t,t}};let Sy=(()=>{class t{constructor(t,e,n,r,i,o,s){if(!e||!Ft(i))return this;o.runOutsideAngular(()=>{const i=e.events.pipe(so(t=>t instanceof Ns));var o;this.disposable=i.pipe(Ai(t=>{var i;const o=(null===(i=e.parseUrl(e.url.replace(/(?:\().+(?:\))/g,t=>t.replace("://",":///"))).root.children[t.snapshot.outlet])||void 0===i?void 0:i.toString())||"",s=e.routerState.root.children.map(t=>t).find(e=>e.outlet===t.snapshot.outlet);if(!s)return(0,xi.of)(null);let a=s;for(;a.firstChild;)a=a.firstChild;const u=a.pathFromRoot.map(t=>{var e;return null===(e=t.routeConfig)||void 0===e?void 0:e.path}).filter(t=>t).join("/")||"/",c={screen_name:u,page_path:`/${o}`,firebase_event_origin:"auto",firebase_screen:u,outlet:t.snapshot.outlet};n&&(c.page_title=n.getTitle());let l=s.component;if(l){if(l===eu){let e=t.snapshot;for(;e.firstChild;)e=e.firstChild;l=e.component}}else l=t.snapshot.component;if("string"==typeof l)return(0,xi.of)(Object.assign(Object.assign({},c),{[by]:l}));if(l){const t=r.resolveComponentFactory(l);return(0,xi.of)(Object.assign(Object.assign({},c),{[by]:t.selector}))}return(0,xi.of)(null)}),so(t=>t),(0,Ee.U)(t=>Object.assign({firebase_screen_class:t.screen_class,firebase_screen_id:Ey(t)},t)),(o=t=>t.outlet,t=>t.lift(new uy(o,void 0,void 0,void 0))),(0,cs.zg)(e=>e.pipe(Mi((t,e)=>JSON.stringify(t)===JSON.stringify(e)),os(void 0),Rf(),(0,Ee.U)(([t,e])=>t?Object.assign({firebase_previous_class:t.screen_class,firebase_previous_screen:t.screen_name,firebase_previous_id:t.firebase_screen_id},e):e),Ai(e=>(0,ay.mG)(this,void 0,void 0,function*(){return s&&(yield s.initialized),yield t.logEvent("screen_view",e)}))))).subscribe()})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(vy),r.LFG(Wu,8),r.LFG(ye,8),r.LFG(r._Vd),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(_y,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Ty=(()=>{class t{constructor(t,e,n){t.app.then(()=>{})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(vy),r.LFG(Sy,8),r.LFG(_y,8))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[vy]}),t})();var Ay=n(1062),Dy=n(250),Iy=n(308),xy=function(t,e){return(xy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function ky(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Oy,Fy="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Py=Py||{},Ny=Fy||self;function Ry(){}function Ly(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function My(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var qy="closure_uid_"+(1e9*Math.random()>>>0),Uy=0;function By(t,e,n){return t.call.apply(t.bind,arguments)}function jy(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Vy(t,e,n){return(Vy=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?By:jy).apply(null,arguments)}function Gy(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Zy(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function zy(){this.s=this.s,this.o=this.o}var Hy={};zy.prototype.s=!1,zy.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,qy)&&t[qy]||(t[qy]=++Uy)}(this);delete Hy[t]}},zy.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Yy=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Wy=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function $y(t){return Array.prototype.concat.apply([],arguments)}function Qy(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Ky(t){return/^[\s\xa0]*$/.test(t)}var Jy,Xy=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function tv(t,e){return-1!=t.indexOf(e)}function ev(t,e){return t<e?-1:t>e?1:0}t:{var nv=Ny.navigator;if(nv){var rv=nv.userAgent;if(rv){Jy=rv;break t}}Jy=""}function iv(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function ov(t){var e={};for(var n in t)e[n]=t[n];return e}var sv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function av(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<sv.length;o++)n=sv[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function uv(t){return uv[" "](t),t}uv[" "]=Ry;var cv,lv,hv=tv(Jy,"Opera"),dv=tv(Jy,"Trident")||tv(Jy,"MSIE"),fv=tv(Jy,"Edge"),pv=fv||dv,gv=tv(Jy,"Gecko")&&!(tv(Jy.toLowerCase(),"webkit")&&!tv(Jy,"Edge"))&&!(tv(Jy,"Trident")||tv(Jy,"MSIE"))&&!tv(Jy,"Edge"),mv=tv(Jy.toLowerCase(),"webkit")&&!tv(Jy,"Edge");function yv(){var t=Ny.document;return t?t.documentMode:void 0}t:{var vv="",_v=(lv=Jy,gv?/rv:([^\);]+)(\)|;)/.exec(lv):fv?/Edge\/([\d\.]+)/.exec(lv):dv?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(lv):mv?/WebKit\/(\S+)/.exec(lv):hv?/(?:Version)[ \/]?(\S+)/.exec(lv):void 0);if(_v&&(vv=_v?_v[1]:""),dv){var bv=yv();if(null!=bv&&bv>parseFloat(vv)){cv=String(bv);break t}}cv=vv}var wv={};var Cv=Ny.document&&dv&&(yv()||parseInt(cv,10))||void 0,Ev=function(){if(!Ny.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Ny.addEventListener("test",Ry,e),Ny.removeEventListener("test",Ry,e)}catch(n){}return t}();function Sv(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Tv(t,e){if(Sv.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(gv){t:{try{uv(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Av[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Tv.Z.h.call(this)}}Sv.prototype.h=function(){this.defaultPrevented=!0},Zy(Tv,Sv);var Av={2:"touch",3:"pen",4:"mouse"};Tv.prototype.h=function(){Tv.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Dv="closure_listenable_"+(1e6*Math.random()|0),Iv=0;function xv(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++Iv,this.ca=this.fa=!1}function kv(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Ov(t){this.src=t,this.g={},this.h=0}function Fv(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=Yy(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(kv(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Pv(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}Ov.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=Pv(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new xv(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var Nv="closure_lm_"+(1e6*Math.random()|0),Rv={};function Lv(t,e,n,r,i){if(r&&r.once)return qv(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Lv(t,e[o],n,r,i);return null}return n=zv(n),t&&t[Dv]?t.N(e,n,My(r)?!!r.capture:!!r,i):Mv(t,e,n,!1,r,i)}function Mv(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=My(i)?!!i.capture:!!i,a=Gv(t);if(a||(t[Nv]=a=new Ov(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Vv;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ev||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(jv(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function qv(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)qv(t,e[o],n,r,i);return null}return n=zv(n),t&&t[Dv]?t.O(e,n,My(r)?!!r.capture:!!r,i):Mv(t,e,n,!0,r,i)}function Uv(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Uv(t,e[o],n,r,i);else r=My(r)?!!r.capture:!!r,n=zv(n),t&&t[Dv]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=Pv(o=t.g[e],n,r,i))&&(kv(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--))):t&&(t=Gv(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Pv(e,n,r,i)),(n=-1<t?e[t]:null)&&Bv(n))}function Bv(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[Dv])Fv(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(jv(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Gv(e))?(Fv(n,t),0==n.h&&(n.src=null,e[Nv]=null)):kv(t)}}}function jv(t){return t in Rv?Rv[t]:Rv[t]="on"+t}function Vv(t,e){if(t.ca)t=!0;else{e=new Tv(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&Bv(t),t=n.call(r,e)}return t}function Gv(t){return(t=t[Nv])instanceof Ov?t:null}var Zv="__closure_events_fn_"+(1e9*Math.random()>>>0);function zv(t){return"function"==typeof t?t:(t[Zv]||(t[Zv]=function(e){return t.handleEvent(e)}),t[Zv])}function Hv(){zy.call(this),this.i=new Ov(this),this.P=this,this.I=null}function Yv(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new Sv(e,t);else if(e instanceof Sv)e.target=e.target||t;else{var i=e;av(e=new Sv(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=Wv(s,r,!0,e)&&i}if(i=Wv(s=e.g=t,r,!0,e)&&i,i=Wv(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Wv(s=e.g=n[o],r,!1,e)&&i}function Wv(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&Fv(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Zy(Hv,zy),Hv.prototype[Dv]=!0,Hv.prototype.removeEventListener=function(t,e,n,r){Uv(this,t,e,n,r)},Hv.prototype.M=function(){if(Hv.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)kv(n[r]);delete e.g[t],e.h--}}this.I=null},Hv.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Hv.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var $v=Ny.JSON.stringify;function Qv(){var t=i_,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Kv,Jv=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=Xv.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),Xv=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,this.g=(t=this.g).next,t.next=null):t=this.i(),t},t}())(function(){return new t_},function(t){return t.reset()}),t_=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function e_(t){Ny.setTimeout(function(){throw t},0)}function n_(t,e){Kv||function(){var t=Ny.Promise.resolve(void 0);Kv=function(){t.then(o_)}}(),r_||(Kv(),r_=!0),i_.add(t,e)}var r_=!1,i_=new Jv;function o_(){for(var t;t=Qv();){try{t.h.call(t.g)}catch(n){e_(n)}var e=Xv;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}r_=!1}function s_(t,e){Hv.call(this),this.h=t||1,this.g=e||Ny,this.j=Vy(this.kb,this),this.l=Date.now()}function a_(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function u_(t,e,n){if("function"==typeof t)n&&(t=Vy(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Vy(t.handleEvent,t)}return 2147483647<Number(e)?-1:Ny.setTimeout(t,e||0)}function c_(t){t.g=u_(function(){t.g=null,t.i&&(t.i=!1,c_(t))},t.j);var e=t.h;t.h=null,t.m.apply(null,e)}Zy(s_,Hv),(Oy=s_.prototype).da=!1,Oy.S=null,Oy.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Yv(this,"tick"),this.da&&(a_(this),this.start()))}},Oy.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Oy.M=function(){s_.Z.M.call(this),a_(this),delete this.g};var l_=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}xy(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:c_(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(Ny.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(zy);function h_(t){zy.call(this),this.h=t,this.g={}}Zy(h_,zy);var d_=[];function f_(t,e,n,r){Array.isArray(n)||(n&&(d_[0]=n.toString()),n=d_);for(var i=0;i<n.length;i++){var o=Lv(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function p_(t){iv(t.g,function(t,e){this.g.hasOwnProperty(e)&&Bv(t)},t),t.g={}}function g_(){this.g=!0}function m_(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return $v(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}h_.prototype.M=function(){h_.Z.M.call(this),p_(this)},h_.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},g_.prototype.Aa=function(){this.g=!1},g_.prototype.info=function(){};var y_={},v_=null;function __(){return v_=v_||new Hv}function b_(t){Sv.call(this,y_.Ma,t)}function w_(t){var e=__();Yv(e,new b_(e,t))}function C_(t,e){Sv.call(this,y_.STAT_EVENT,t),this.stat=e}function E_(t){var e=__();Yv(e,new C_(e,t))}function S_(t,e){Sv.call(this,y_.Na,t),this.size=e}function T_(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Ny.setTimeout(function(){t()},e)}y_.Ma="serverreachability",Zy(b_,Sv),y_.STAT_EVENT="statevent",Zy(C_,Sv),y_.Na="timingevent",Zy(S_,Sv);var A_={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},D_={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function I_(){}function x_(){}I_.prototype.h=null;var k_,O_={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function F_(){Sv.call(this,"d")}function P_(){Sv.call(this,"c")}function N_(){}function R_(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new h_(this),this.P=M_,this.W=new s_(t=pv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new L_}function L_(){this.i=null,this.g="",this.h=!1}Zy(F_,Sv),Zy(P_,Sv),Zy(N_,I_),N_.prototype.g=function(){return new XMLHttpRequest},N_.prototype.i=function(){return{}},k_=new N_;var M_=45e3,q_={},U_={};function B_(t,e,n){t.K=1,t.v=cb(rb(e)),t.s=n,t.U=!0,j_(t,null)}function j_(t,e){t.F=Date.now(),z_(t),t.A=rb(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Cb(n.h,"t",r),t.C=0,n=t.l.H,t.h=new L_,t.g=Ew(t.l,n?e:null,!t.s),0<t.O&&(t.L=new l_(Vy(t.Ia,t,t.g),t.O)),f_(t.V,t.g,"readystatechange",t.gb),e=t.H?ov(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),w_(1),function(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.j,t.u,t.A,t.m,t.X,t.s)}function V_(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function G_(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=Z_(t,n))==U_){4==e&&(t.o=4,E_(14),i=!1),m_(t.j,t.m,null,"[Incomplete Response]");break}if(r==q_){t.o=4,E_(15),m_(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}m_(t.j,t.m,r,null),Q_(t,r)}V_(t)&&r!=U_&&r!=q_&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,E_(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),gw(e),e.L=!0,E_(11))):(m_(t.j,t.m,n,"[Invalid Chunked Response]"),$_(t),W_(t))}function Z_(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?U_:(n=Number(e.substring(n,r)),isNaN(n)?q_:(r+=1)+n>e.length?U_:(e=e.substr(r,n),t.C=r+n,e))}function z_(t){t.Y=Date.now()+t.P,H_(t,t.P)}function H_(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=T_(Vy(t.eb,t),e)}function Y_(t){t.B&&(Ny.clearTimeout(t.B),t.B=null)}function W_(t){0==t.l.G||t.I||vw(t.l,t)}function $_(t){Y_(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,a_(t.W),p_(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Q_(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||xb(n.i,t)))if(n.I=t.N,!t.J&&xb(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;yw(n),sw(n)}pw(n),E_(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=T_(Vy(n.ab,n),6e3));if(1>=Ib(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else bw(n,11)}else if((t.J||n.g==t)&&yw(n),!Ky(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(n.K=r=1.5*u,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(tv(l,"spdy")||tv(l,"quic")||tv(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(kb(h,h.h),h.h=null))}if(r.D){var d=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;d&&(r.sa=d,ub(r.F,r.D,d))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var f=t;if((r=n).oa=Cw(r,r.H?r.la:null,r.W),f.J){Ob(r.i,f);var p=f,g=r.K;g&&p.setTimeout(g),p.B&&(Y_(p),z_(p)),r.g=f}else fw(r);0<n.l.length&&cw(n)}else"stop"!=o[0]&&"close"!=o[0]||bw(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?bw(n,7):ow(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}w_(4)}catch(o){}}function K_(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Ly(t)||"string"==typeof t)Wy(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(Ly(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(Ly(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function J_(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof J_)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function X_(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];tb(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)tb(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function tb(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Oy=R_.prototype).setTimeout=function(t){this.P=t},Oy.gb=function(t){t=t.target;var e=this.L;e&&3==tw(t)?e.l():this.Ia(t)},Oy.Ia=function(t){try{if(t==this.g)t:{var e=tw(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||pv||this.g&&(this.h.h||this.g.ga()||ew(this.g)))){this.I||4!=e||7==n||w_(8==n||0>=r?3:2),Y_(this);var i=this.g.ba();this.N=i;e:if(V_(this)){var o=ew(this.g);t="";var s=o.length,a=4==tw(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){$_(this),W_(this);var u="";break e}this.h.i=new Ny.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ky(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,E_(12),$_(this),W_(this);break t}m_(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Q_(this,i)}this.U?(G_(this,e,u),pv&&this.i&&3==e&&(f_(this.V,this.W,"tick",this.fb),this.W.start())):(m_(this.j,this.m,u,null),Q_(this,u)),4==e&&$_(this),this.i&&!this.I&&(4==e?vw(this.l,this):(this.i=!1,z_(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,E_(12)):(this.o=0,E_(13)),$_(this),W_(this)}}}catch(e){}},Oy.fb=function(){if(this.g){var t=tw(this.g),e=this.g.ga();this.C<e.length&&(Y_(this),G_(this,t,e),this.i&&4!=t&&z_(this))}},Oy.cancel=function(){this.I=!0,$_(this)},Oy.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(w_(3),E_(17)),$_(this),this.o=2,W_(this)):H_(this,this.Y-t)},(Oy=J_.prototype).R=function(){X_(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},Oy.T=function(){return X_(this),this.g.concat()},Oy.get=function(t,e){return tb(this.h,t)?this.h[t]:e},Oy.set=function(t,e){tb(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},Oy.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var eb=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function nb(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof nb){this.g=void 0!==e?e:t.g,ib(this,t.j),this.s=t.s,ob(this,t.i),sb(this,t.m),this.l=t.l,e=t.h;var n=new vb;n.i=e.i,e.g&&(n.g=new J_(e.g),n.h=e.h),ab(this,n),this.o=t.o}else t&&(n=String(t).match(eb))?(this.g=!!e,ib(this,n[1]||"",!0),this.s=lb(n[2]||""),ob(this,n[3]||"",!0),sb(this,n[4]),this.l=lb(n[5]||"",!0),ab(this,n[6]||"",!0),this.o=lb(n[7]||"")):(this.g=!!e,this.h=new vb(null,this.g))}function rb(t){return new nb(t)}function ib(t,e,n){t.j=n?lb(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ob(t,e,n){t.i=n?lb(e,!0):e}function sb(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function ab(t,e,n){e instanceof vb?(t.h=e,function(t,e){e&&!t.j&&(_b(t),t.i=null,t.g.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(bb(this,e),Cb(this,n,t))},t)),t.j=e}(t.h,t.g)):(n||(e=hb(e,mb)),t.h=new vb(e,t.g))}function ub(t,e,n){t.h.set(e,n)}function cb(t){return ub(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function lb(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function hb(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,db),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function db(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}nb.prototype.toString=function(){var t=[],e=this.j;e&&t.push(hb(e,fb,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(hb(e,fb,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(hb(n,"/"==n.charAt(0)?gb:pb,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",hb(n,yb)),t.join("")};var fb=/[#\/\?@]/g,pb=/[#\?:]/g,gb=/[#\?]/g,mb=/[#\?@]/g,yb=/#/g;function vb(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function _b(t){t.g||(t.g=new J_,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function bb(t,e){_b(t),e=Eb(t,e),tb(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,tb((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&X_(t)))}function wb(t,e){return _b(t),e=Eb(t,e),tb(t.g.h,e)}function Cb(t,e,n){bb(t,e),0<n.length&&(t.i=null,t.g.set(Eb(t,e),Qy(n)),t.h+=n.length)}function Eb(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Oy=vb.prototype).add=function(t,e){_b(this),this.i=null,t=Eb(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Oy.forEach=function(t,e){_b(this),this.g.forEach(function(n,r){Wy(n,function(n){t.call(e,n,r,this)},this)},this)},Oy.T=function(){_b(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Oy.R=function(t){_b(this);var e=[];if("string"==typeof t)wb(this,t)&&(e=$y(e,this.g.get(Eb(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=$y(e,t[n])}return e},Oy.set=function(t,e){return _b(this),this.i=null,wb(this,t=Eb(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Oy.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},Oy.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var Sb=function(){return function(t,e){this.h=t,this.g=e}}();function Tb(t){this.l=t||Ab,t=Ny.PerformanceNavigationTiming?0<(t=Ny.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Ny.g&&Ny.g.Ea&&Ny.g.Ea()&&Ny.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ab=10;function Db(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Ib(t){return t.h?1:t.g?t.g.size:0}function xb(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function kb(t,e){t.g?t.g.add(e):t.h=e}function Ob(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Fb(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=ky(t.g.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.D)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Qy(t.i)}function Pb(){}function Nb(){this.g=new Pb}function Rb(t,e,n){var r=n||"";try{K_(t,function(t,n){var i=t;My(t)&&(i=$v(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(VO){throw e.push(r+"type="+encodeURIComponent("_badmap")),VO}}function Lb(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function Mb(t){this.l=t.$b||null,this.j=t.ib||!1}function qb(t,e){Hv.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Ub,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Tb.prototype.cancel=function(){var t,e;if(this.i=Fb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=ky(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},Pb.prototype.stringify=function(t){return Ny.JSON.stringify(t,void 0)},Pb.prototype.parse=function(t){return Ny.JSON.parse(t,void 0)},Zy(Mb,I_),Mb.prototype.g=function(){return new qb(this.l,this.j)},Mb.prototype.i=function(t){return function(){return t}}({}),Zy(qb,Hv);var Ub=0;function Bb(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function jb(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Vb(t)}function Vb(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Oy=qb.prototype).open=function(t,e){if(this.readyState!=Ub)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Vb(this)},Oy.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Ny).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Oy.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,jb(this)),this.readyState=Ub},Oy.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Vb(this)),this.g&&(this.readyState=3,Vb(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ny.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Bb(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},Oy.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?jb(this):Vb(this),3==this.readyState&&Bb(this)}},Oy.Ua=function(t){this.g&&(this.response=this.responseText=t,jb(this))},Oy.Ta=function(t){this.g&&(this.response=t,jb(this))},Oy.ha=function(){this.g&&jb(this)},Oy.setRequestHeader=function(t,e){this.v.append(t,e)},Oy.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Oy.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(qb.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Gb=Ny.JSON.parse;function Zb(t){Hv.call(this),this.headers=new J_,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=zb,this.K=this.L=!1}Zy(Zb,Hv);var zb="",Hb=/^https?$/i,Yb=["POST","PUT"];function Wb(t){return"content-type"==t.toLowerCase()}function $b(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Qb(t),Jb(t)}function Qb(t){t.D||(t.D=!0,Yv(t,"complete"),Yv(t,"error"))}function Kb(t){if(t.h&&void 0!==Py&&(!t.C[1]||4!=tw(t)||2!=t.ba()))if(t.v&&4==tw(t))u_(t.Fa,0,t);else if(Yv(t,"readystatechange"),4==tw(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(eb)[1]||null;if(!o&&Ny.self&&Ny.self.location){var s=Ny.self.location.protocol;o=s.substr(0,s.length-1)}i=!Hb.test(o?o.toLowerCase():"")}e=i}if(e)Yv(t,"complete"),Yv(t,"success");else{t.m=6;try{var a=2<tw(t)?t.g.statusText:""}catch(u){a=""}t.j=a+" ["+t.ba()+"]",Qb(t)}}finally{Jb(t)}}}function Jb(t,e){if(t.g){Xb(t);var n=t.g,r=t.C[0]?Ry:null;t.g=null,t.C=null,e||Yv(t,"ready");try{n.onreadystatechange=r}catch(VO){}}}function Xb(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Ny.clearTimeout(t.A),t.A=null)}function tw(t){return t.g?t.g.readyState:0}function ew(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case zb:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function nw(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return iv(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ub(t,e,n))}function rw(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function iw(t){this.za=0,this.l=[],this.h=new g_,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=rw("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=rw("baseRetryDelayMs",5e3,t),this.$a=rw("retryDelaySeedMs",1e4,t),this.Ya=rw("forwardChannelMaxRetries",2,t),this.ra=rw("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Tb(t&&t.concurrentRequestLimit),this.Ca=new Nb,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function ow(t){if(aw(t),3==t.G){var e=t.V++,n=rb(t.F);ub(n,"SID",t.J),ub(n,"RID",e),ub(n,"TYPE","terminate"),hw(t,n),(e=new R_(t,t.h,e,void 0)).K=2,e.v=cb(rb(n)),n=!1,Ny.navigator&&Ny.navigator.sendBeacon&&(n=Ny.navigator.sendBeacon(e.v.toString(),"")),!n&&Ny.Image&&((new Image).src=e.v,n=!0),n||(e.g=Ew(e.l,null),e.g.ea(e.v)),e.F=Date.now(),z_(e)}ww(t)}function sw(t){t.g&&(gw(t),t.g.cancel(),t.g=null)}function aw(t){sw(t),t.u&&(Ny.clearTimeout(t.u),t.u=null),yw(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Ny.clearTimeout(t.m),t.m=null)}function uw(t,e){t.l.push(new Sb(t.Za++,e)),3==t.G&&cw(t)}function cw(t){Db(t.i)||t.m||(t.m=!0,n_(t.Ha,t),t.C=0)}function lw(t,e){var n;n=e?e.m:t.V++;var r=rb(t.F);ub(r,"SID",t.J),ub(r,"RID",n),ub(r,"AID",t.U),hw(t,r),t.o&&t.s&&nw(r,t.o,t.s),n=new R_(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=dw(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),kb(t.i,n),B_(n,r,e)}function hw(t,e){t.j&&K_({},function(t,n){ub(e,n,t)})}function dw(t,e,n){n=Math.min(t.l.length,n);var r=t.j?Vy(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].h)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{Rb(l,s,"req"+c+"_")}catch(h){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function fw(t){t.g||t.u||(t.Y=1,n_(t.Ga,t),t.A=0)}function pw(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=T_(Vy(t.Ga,t),_w(t,t.A)),t.A++,0))}function gw(t){null!=t.B&&(Ny.clearTimeout(t.B),t.B=null)}function mw(t){t.g=new R_(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=rb(t.oa);ub(e,"RID","rpc"),ub(e,"SID",t.J),ub(e,"CI",t.N?"0":"1"),ub(e,"AID",t.U),hw(t,e),ub(e,"TYPE","xmlhttp"),t.o&&t.s&&nw(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=cb(rb(e)),n.s=null,n.U=!0,j_(n,t)}function yw(t){null!=t.v&&(Ny.clearTimeout(t.v),t.v=null)}function vw(t,e){var n=null;if(t.g==e){yw(t),gw(t),t.g=null;var r=2}else{if(!xb(t.i,e))return;n=e.D,Ob(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Yv(r=__(),new S_(r,n,e,i)),cw(t)}else fw(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Ib(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=T_(Vy(t.Ha,t,e),_w(t,t.C)),t.C++,0)))}(t,e)||2==r&&pw(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:bw(t,5);break;case 4:bw(t,10);break;case 3:bw(t,6);break;default:bw(t,2)}}function _w(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function bw(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=Vy(t.jb,t);n||(n=new nb("//www.google.com/images/cleardot.gif"),Ny.location&&"http"==Ny.location.protocol||ib(n,"https"),cb(n)),function(t,e){var n=new g_;if(Ny.Image){var r=new Image;r.onload=Gy(Lb,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Gy(Lb,n,r,"TestLoadImage: error",!1,e),r.onabort=Gy(Lb,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Gy(Lb,n,r,"TestLoadImage: timeout",!1,e),Ny.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else E_(2);t.G=0,t.j&&t.j.va(e),ww(t),aw(t)}function ww(t){t.G=0,t.I=-1,t.j&&(0==Fb(t.i).length&&0==t.l.length||(t.i.i.length=0,Qy(t.l),t.l.length=0),t.j.ua())}function Cw(t,e,n){var r=function(t){return t instanceof nb?rb(t):new nb(t,void 0)}(n);if(""!=r.i)e&&ob(r,e+"."+r.i),sb(r,r.m);else{var i=Ny.location;r=function(t,e,n,r){var i=new nb(null,void 0);return t&&ib(i,t),e&&ob(i,e),n&&sb(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&iv(t.aa,function(t,e){ub(r,e,t)}),n=t.sa,(e=t.D)&&n&&ub(r,e,n),ub(r,"VER",t.ma),hw(t,r),r}function Ew(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Zb(n&&t.Ba&&!t.qa?new Mb({ib:!0}):t.qa)).L=t.H,e}function Sw(){}function Tw(){if(dv&&!(10<=Number(Cv)))throw Error("Environmental error: no available transport.")}function Aw(t,e){Hv.call(this),this.g=new iw(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!Ky(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ky(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new xw(this)}function Dw(t){F_.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Iw(){P_.call(this),this.status=1}function xw(t){this.g=t}(Oy=Zb.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():k_.g(),this.C=function(t){return t.h||(t.h=t.i())}(this.u?this.u:k_),this.g.onreadystatechange=Vy(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void $b(this,o)}t=n||"";var i=new J_(this.headers);r&&K_(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Wb,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=Ny.FormData&&t instanceof Ny.FormData,!(0<=Yy(Yb,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.g.setRequestHeader(e,t)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Xb(this),0<this.B&&((this.K=function(t){return dv&&function(){return t=wv,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var t=0,e=Xy(String(cv)).split("."),n=Xy("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=ev(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||ev(0==o[2].length,0==s[2].length)||ev(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}();var t}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Vy(this.pa,this)):this.A=u_(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){$b(this,o)}},Oy.pa=function(){void 0!==Py&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Yv(this,"timeout"),this.abort(8))},Oy.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Yv(this,"complete"),Yv(this,"abort"),Jb(this))},Oy.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Jb(this,!0)),Zb.Z.M.call(this)},Oy.Fa=function(){this.s||(this.F||this.v||this.l?Kb(this):this.cb())},Oy.cb=function(){Kb(this)},Oy.ba=function(){try{return 2<tw(this)?this.g.status:-1}catch(lv){return-1}},Oy.ga=function(){try{return this.g?this.g.responseText:""}catch(lv){return""}},Oy.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Gb(e)}},Oy.Da=function(){return this.m},Oy.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Oy=iw.prototype).ma=8,Oy.G=1,Oy.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},Oy.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new R_(this,this.h,t,void 0),n=this.s;if(this.P&&(n?av(n=ov(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=dw(this,e,r),ub(i=rb(this.F),"RID",t),ub(i,"CVER",22),this.D&&ub(i,"X-HTTP-Session-Id",this.D),hw(this,i),this.o&&n&&nw(i,this.o,n),kb(this.i,e),this.Ra&&ub(i,"TYPE","init"),this.ja?(ub(i,"$req",r),ub(i,"SID","null"),e.$=!0,B_(e,i,null)):B_(e,i,r),this.G=2}}else 3==this.G&&(t?lw(this,t):0==this.l.length||Db(this.i)||lw(this))},Oy.Ga=function(){if(this.u=null,mw(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=T_(Vy(this.bb,this),t)}},Oy.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,E_(10),sw(this),mw(this))},Oy.ab=function(){null!=this.v&&(this.v=null,sw(this),pw(this),E_(19))},Oy.jb=function(t){t?(this.h.info("Successfully pinged google.com"),E_(2)):(this.h.info("Failed to ping google.com"),E_(1))},(Oy=Sw.prototype).xa=function(){},Oy.wa=function(){},Oy.va=function(){},Oy.ua=function(){},Oy.Oa=function(){},Tw.prototype.g=function(t,e){return new Aw(t,e)},Zy(Aw,Hv),Aw.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),n_(Vy(t.hb,t,e))),E_(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Cw(t,null,t.W),cw(t)},Aw.prototype.close=function(){ow(this.g)},Aw.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,uw(this.g,e)}else this.v?((e={}).__data__=$v(t),uw(this.g,e)):uw(this.g,t)},Aw.prototype.M=function(){this.g.j=null,delete this.j,ow(this.g),delete this.g,Aw.Z.M.call(this)},Zy(Dw,F_),Zy(Iw,P_),Zy(xw,Sw),xw.prototype.xa=function(){Yv(this.g,"a")},xw.prototype.wa=function(t){Yv(this.g,new Dw(t))},xw.prototype.va=function(t){Yv(this.g,new Iw(t))},xw.prototype.ua=function(){Yv(this.g,"b")},Tw.prototype.createWebChannel=Tw.prototype.g,Aw.prototype.send=Aw.prototype.u,Aw.prototype.open=Aw.prototype.m,Aw.prototype.close=Aw.prototype.close,A_.NO_ERROR=0,A_.TIMEOUT=8,A_.HTTP_ERROR=6,D_.COMPLETE="complete",x_.EventType=O_,O_.OPEN="a",O_.CLOSE="b",O_.ERROR="c",O_.MESSAGE="d",Hv.prototype.listen=Hv.prototype.N,Zb.prototype.listenOnce=Zb.prototype.O,Zb.prototype.getLastError=Zb.prototype.La,Zb.prototype.getLastErrorCode=Zb.prototype.Da,Zb.prototype.getStatus=Zb.prototype.ba,Zb.prototype.getResponseJson=Zb.prototype.Qa,Zb.prototype.getResponseText=Zb.prototype.ga,Zb.prototype.send=Zb.prototype.ea;var kw=A_,Ow=D_,Fw=y_,Pw=Mb,Nw=x_,Rw=Zb,Lw=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Lw.o=-1;var Mw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},qw=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,ay.ZT)(e,t),e}(Error),Uw=new Iy.Yd("@firebase/firestore");function Bw(){return Uw.logLevel}function jw(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Uw.logLevel<=Iy.in.DEBUG){var r=e.map(Zw);Uw.debug.apply(Uw,(0,ay.ev)(["Firestore (8.7.0): "+t],r))}}function Vw(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Uw.logLevel<=Iy.in.ERROR){var r=e.map(Zw);Uw.error.apply(Uw,(0,ay.ev)(["Firestore (8.7.0): "+t],r))}}function Gw(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Uw.logLevel<=Iy.in.WARN){var r=e.map(Zw);Uw.warn.apply(Uw,(0,ay.ev)(["Firestore (8.7.0): "+t],r))}}function Zw(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(VO){return t}}function zw(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.7.0) INTERNAL ASSERTION FAILED: "+t;throw Vw(e),new Error(e)}function Hw(t,e){t||zw()}function Yw(t,e){return t}function Ww(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var $w=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Ww(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Qw(t,e){return t<e?-1:t>e?1:0}function Kw(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Jw(t){return t+"\0"}var Xw=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new qw(Mw.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new qw(Mw.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new qw(Mw.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new qw(Mw.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Qw(this.nanoseconds,t.nanoseconds):Qw(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),tC=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Xw(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function eC(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function nC(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rC(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var iC=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&zw(),void 0===n?n=t.length-e:n>t.length-e&&zw(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),oC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,ay.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new qw(Mw.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(iC),sC=/^[_a-zA-Z][_a-zA-Z0-9]*$/,aC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,ay.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return sC.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new qw(Mw.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new qw(Mw.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new qw(Mw.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new qw(Mw.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(iC),uC=function(){function t(t){this.fields=t,t.sort(aC.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Kw(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),cC=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Qw(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();cC.EMPTY_BYTE_STRING=new cC("");var lC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hC(t){if(Hw(!!t),"string"==typeof t){var e=0,n=lC.exec(t);if(Hw(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:dC(t.seconds),nanos:dC(t.nanos)}}function dC(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function fC(t){return"string"==typeof t?cC.fromBase64String(t):cC.fromUint8Array(t)}function pC(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function gC(t){var e=t.mapValue.fields.__previous_value__;return pC(e)?gC(e):e}function mC(t){var e=hC(t.mapValue.fields.__local_write_time__.timestampValue);return new Xw(e.seconds,e.nanos)}function yC(t){return null==t}function vC(t){return 0===t&&1/t==-1/0}function _C(t){return"number"==typeof t&&Number.isInteger(t)&&!vC(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var bC=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(oC.fromString(e))},t.fromName=function(e){return new t(oC.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===oC.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return oC.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new oC(e.slice()))},t}();function wC(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?pC(t)?4:10:zw()}function CC(t,e){var n=wC(t);if(n!==wC(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return mC(t).isEqual(mC(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=hC(t.timestampValue),r=hC(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return fC(t.bytesValue).isEqual(fC(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return dC(t.geoPointValue.latitude)===dC(e.geoPointValue.latitude)&&dC(t.geoPointValue.longitude)===dC(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return dC(t.integerValue)===dC(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=dC(t.doubleValue),r=dC(e.doubleValue);return n===r?vC(n)===vC(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Kw(t.arrayValue.values||[],e.arrayValue.values||[],CC);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(eC(n)!==eC(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!CC(n[i],r[i])))return!1;return!0}(t,e);default:return zw()}}function EC(t,e){return void 0!==(t.values||[]).find(function(t){return CC(t,e)})}function SC(t,e){var n=wC(t),r=wC(e);if(n!==r)return Qw(n,r);switch(n){case 0:return 0;case 1:return Qw(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=dC(t.integerValue||t.doubleValue),r=dC(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return TC(t.timestampValue,e.timestampValue);case 4:return TC(mC(t),mC(e));case 5:return Qw(t.stringValue,e.stringValue);case 6:return function(t,e){var n=fC(t),r=fC(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Qw(n[i],r[i]);if(0!==o)return o}return Qw(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Qw(dC(t.latitude),dC(e.latitude));return 0!==n?n:Qw(dC(t.longitude),dC(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=SC(n[i],r[i]);if(o)return o}return Qw(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Qw(r[s],o[s]);if(0!==a)return a;var u=SC(n[r[s]],i[o[s]]);if(0!==u)return u}return Qw(r.length,o.length)}(t.mapValue,e.mapValue);default:throw zw()}}function TC(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Qw(t,e);var n=hC(t),r=hC(e),i=Qw(n.seconds,r.seconds);return 0!==i?i:Qw(n.nanos,r.nanos)}function AC(t){return DC(t)}function DC(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=hC(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?fC(t.bytesValue).toBase64():"referenceValue"in t?bC.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=DC(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+DC(t.fields[o])}return e+"}"}(t.mapValue):zw();var e}function IC(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function xC(t){return!!t&&"integerValue"in t}function kC(t){return!!t&&"arrayValue"in t}function OC(t){return!!t&&"nullValue"in t}function FC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function PC(t){return!!t&&"mapValue"in t}function NC(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue)return{timestampValue:Object.assign({},hC(t.timestampValue))};if(t.mapValue){var e={mapValue:{fields:{}}};return nC(t.mapValue.fields,function(t,n){return e.mapValue.fields[t]=NC(n)}),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=NC(t.arrayValue.values[r]);return n}return Object.assign({},t)}var RC=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!PC(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=NC(e)},t.prototype.setAll=function(t){var e=this,n=aC.emptyPath(),r={},i=[];t.forEach(function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=NC(t):i.push(o.lastSegment())});var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());PC(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return CC(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];PC(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){nC(e,function(e,n){return t[e]=n});for(var r=0,i=n;r<i.length;r++)delete t[i[r]]},t.prototype.clone=function(){return new t(NC(this.value))},t}();function LC(t){var e=[];return nC(t.fields,function(t,n){var r=new aC([t]);if(PC(n)){var i=LC(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new uC(e)}var MC=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,tC.min(),RC.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,RC.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,RC.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=RC.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=RC.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),qC=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function UC(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new qC(t,e,n,r,i,o,s)}function BC(t){var e=Yw(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+AC(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),yC(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=XC(e.startAt)),e.endAt&&(n+="|ub:",n+=XC(e.endAt)),e.h=n}return e.h}function jC(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!eE(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!CC(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rE(t.startAt,e.startAt)&&rE(t.endAt,e.endAt)}function VC(t){return bC.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var GC=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,ay.ZT)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new ZC(t,n,r):"array-contains"===n?new WC(t,r):"in"===n?new $C(t,r):"not-in"===n?new QC(t,r):"array-contains-any"===n?new KC(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new zC(t,n):new HC(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(SC(e,this.value)):null!==e&&wC(this.value)===wC(e)&&this.m(SC(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return zw()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),ZC=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=bC.fromName(r.referenceValue),i}return(0,ay.ZT)(e,t),e.prototype.matches=function(t){var e=bC.comparator(t.key,this.key);return this.m(e)},e}(GC),zC=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=YC(0,n),r}return(0,ay.ZT)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(GC),HC=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=YC(0,n),r}return(0,ay.ZT)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(GC);function YC(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return bC.fromName(t.referenceValue)})}var WC=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,ay.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return kC(e)&&EC(e.arrayValue,this.value)},e}(GC),$C=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,ay.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&EC(this.value.arrayValue,e)},e}(GC),QC=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,ay.ZT)(e,t),e.prototype.matches=function(t){if(EC(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!EC(this.value.arrayValue,e)},e}(GC),KC=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,ay.ZT)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!kC(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return EC(e.value.arrayValue,t)})},e}(GC),JC=function(t,e){this.position=t,this.before=e};function XC(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return AC(t)}).join(",")}var tE=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function eE(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function nE(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?bC.comparator(bC.fromName(s.referenceValue),n.key):SC(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function rE(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!CC(t.position[n],e.position[n]))return!1;return!0}var iE=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function oE(t,e,n,r,i,o,s,a){return new iE(t,e,n,r,i,o,s,a)}function sE(t){return new iE(t)}function aE(t){return!yC(t.limit)&&"F"===t.limitType}function uE(t){return!yC(t.limit)&&"L"===t.limitType}function cE(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function lE(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function hE(t){return null!==t.collectionGroup}function dE(t){var e=Yw(t);if(null===e.p){e.p=[];var n=lE(e),r=cE(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new tE(n)),e.p.push(new tE(aC.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new tE(aC.keyField(),u))}}}return e.p}function fE(t){var e=Yw(t);if(!e.T)if("F"===e.limitType)e.T=UC(e.path,e.collectionGroup,dE(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=dE(e);r<i.length;r++){var o=i[r];n.push(new tE(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new JC(e.endAt.position,!e.endAt.before):null,a=e.startAt?new JC(e.startAt.position,!e.startAt.before):null;e.T=UC(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function pE(t,e,n){return new iE(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function gE(t,e){return jC(fE(t),fE(e))&&t.limitType===e.limitType}function mE(t){return BC(fE(t))+"|lt:"+t.limitType}function yE(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+AC(e.value);var e}).join(", ")+"]"),yC(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+XC(t.startAt)),t.endAt&&(e+=", endAt: "+XC(t.endAt)),"Target("+e+")"}(fE(t))+"; limitType="+t.limitType+")"}function vE(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):bC.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!nE(t.startAt,dE(t),e)||t.endAt&&nE(t.endAt,dE(t),e))}(t,e)}function _E(t){return function(e,n){for(var r=!1,i=0,o=dE(t);i<o.length;i++){var s=o[i],a=bE(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function bE(t,e,n){var r=t.field.isKeyField()?bC.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?SC(r,i):zw()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return zw()}}function wE(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vC(e)?"-0":e}}function CE(t){return{integerValue:""+t}}function EE(t,e){return _C(e)?CE(e):wE(t,e)}var SE=function(){this._=void 0};function TE(t,e,n){return t instanceof IE?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof xE?kE(t,e):t instanceof OE?FE(t,e):function(t,e){var n=DE(t,e),r=NE(n)+NE(t.A);return xC(n)&&xC(t.A)?CE(r):wE(t.R,r)}(t,e)}function AE(t,e,n){return t instanceof xE?kE(t,e):t instanceof OE?FE(t,e):n}function DE(t,e){return t instanceof PE?xC(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var IE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,ay.ZT)(e,t),e}(SE),xE=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,ay.ZT)(e,t),e}(SE);function kE(t,e){for(var n=RE(e),r=function(t){n.some(function(e){return CC(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var OE=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,ay.ZT)(e,t),e}(SE);function FE(t,e){for(var n=RE(e),r=function(t){n=n.filter(function(e){return!CC(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var PE=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,ay.ZT)(e,t),e}(SE);function NE(t){return dC(t.integerValue||t.doubleValue)}function RE(t){return kC(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var LE=function(t,e){this.field=t,this.transform=e},ME=function(t,e){this.version=t,this.transformResults=e},qE=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function UE(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var BE=function(){};function jE(t,e,n){t instanceof HE?function(t,e,n){var r=t.value.clone(),i=$E(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof YE?function(t,e,n){if(UE(t.precondition,e)){var r=$E(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(WE(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function VE(t,e,n){t instanceof HE?function(t,e,n){if(UE(t.precondition,e)){var r=t.value.clone(),i=QE(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(zE(e),r).setHasLocalMutations()}}(t,e,n):t instanceof YE?function(t,e,n){if(UE(t.precondition,e)){var r=QE(t.fieldTransforms,n,e),i=e.data;i.setAll(WE(t)),i.setAll(r),e.convertToFoundDocument(zE(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){UE(t.precondition,e)&&e.convertToNoDocument(tC.min())}(t,e)}function GE(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=DE(o.transform,s||null);null!=a&&(null==n&&(n=RC.empty()),n.set(o.field,a))}return n||null}function ZE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Kw(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof xE&&e instanceof xE||t instanceof OE&&e instanceof OE?Kw(t.elements,e.elements,CC):t instanceof PE&&e instanceof PE?CC(t.A,e.A):t instanceof IE&&e instanceof IE}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function zE(t){return t.isFoundDocument()?t.version:tC.min()}var HE=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return(0,ay.ZT)(e,t),e}(BE),YE=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return(0,ay.ZT)(e,t),e}(BE);function WE(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function $E(t,e,n){var r=new Map;Hw(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,AE(s,a,n[i]))}return r}function QE(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,TE(a,u,e))}return r}var KE,JE,XE=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,ay.ZT)(e,t),e}(BE),tS=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,ay.ZT)(e,t),e}(BE),eS=function(t){this.count=t};function nS(t){switch(t){case Mw.OK:return zw();case Mw.CANCELLED:case Mw.UNKNOWN:case Mw.DEADLINE_EXCEEDED:case Mw.RESOURCE_EXHAUSTED:case Mw.INTERNAL:case Mw.UNAVAILABLE:case Mw.UNAUTHENTICATED:return!1;case Mw.INVALID_ARGUMENT:case Mw.NOT_FOUND:case Mw.ALREADY_EXISTS:case Mw.PERMISSION_DENIED:case Mw.FAILED_PRECONDITION:case Mw.ABORTED:case Mw.OUT_OF_RANGE:case Mw.UNIMPLEMENTED:case Mw.DATA_LOSS:return!0;default:return zw()}}function rS(t){if(void 0===t)return Vw("GRPC error has no .code"),Mw.UNKNOWN;switch(t){case KE.OK:return Mw.OK;case KE.CANCELLED:return Mw.CANCELLED;case KE.UNKNOWN:return Mw.UNKNOWN;case KE.DEADLINE_EXCEEDED:return Mw.DEADLINE_EXCEEDED;case KE.RESOURCE_EXHAUSTED:return Mw.RESOURCE_EXHAUSTED;case KE.INTERNAL:return Mw.INTERNAL;case KE.UNAVAILABLE:return Mw.UNAVAILABLE;case KE.UNAUTHENTICATED:return Mw.UNAUTHENTICATED;case KE.INVALID_ARGUMENT:return Mw.INVALID_ARGUMENT;case KE.NOT_FOUND:return Mw.NOT_FOUND;case KE.ALREADY_EXISTS:return Mw.ALREADY_EXISTS;case KE.PERMISSION_DENIED:return Mw.PERMISSION_DENIED;case KE.FAILED_PRECONDITION:return Mw.FAILED_PRECONDITION;case KE.ABORTED:return Mw.ABORTED;case KE.OUT_OF_RANGE:return Mw.OUT_OF_RANGE;case KE.UNIMPLEMENTED:return Mw.UNIMPLEMENTED;case KE.DATA_LOSS:return Mw.DATA_LOSS;default:return zw()}}(JE=KE||(KE={}))[JE.OK=0]="OK",JE[JE.CANCELLED=1]="CANCELLED",JE[JE.UNKNOWN=2]="UNKNOWN",JE[JE.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",JE[JE.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",JE[JE.NOT_FOUND=5]="NOT_FOUND",JE[JE.ALREADY_EXISTS=6]="ALREADY_EXISTS",JE[JE.PERMISSION_DENIED=7]="PERMISSION_DENIED",JE[JE.UNAUTHENTICATED=16]="UNAUTHENTICATED",JE[JE.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",JE[JE.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",JE[JE.ABORTED=10]="ABORTED",JE[JE.OUT_OF_RANGE=11]="OUT_OF_RANGE",JE[JE.UNIMPLEMENTED=12]="UNIMPLEMENTED",JE[JE.INTERNAL=13]="INTERNAL",JE[JE.UNAVAILABLE=14]="UNAVAILABLE",JE[JE.DATA_LOSS=15]="DATA_LOSS";var iS=function(){function t(t,e){this.comparator=t,this.root=e||sS.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,sS.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sS.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new oS(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new oS(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new oS(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new oS(this.root,t,this.comparator,!0)},t}(),oS=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),sS=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw zw();if(this.right.isRed())throw zw();var t=this.left.check();if(t!==this.right.check())throw zw();return t+(this.isRed()?0:1)},t}();sS.EMPTY=null,sS.RED=!0,sS.BLACK=!1,sS.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw zw()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw zw()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw zw()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw zw()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw zw()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new sS(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var aS=function(){function t(t){this.comparator=t,this.data=new iS(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new uS(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new uS(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),uS=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),cS=new iS(bC.comparator);function lS(){return cS}var hS=new iS(bC.comparator);function dS(){return hS}var fS=new iS(bC.comparator);function pS(){return fS}var gS=new aS(bC.comparator);function mS(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=gS,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var yS=new aS(Qw);function vS(){return yS}var _S=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,bS.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(tC.min(),r,vS(),lS(),mS())},t}(),bS=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(cC.EMPTY_BYTE_STRING,n,mS(),mS(),mS())},t}(),wS=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},CS=function(t,e){this.targetId=t,this.V=e},ES=function(t,e,n,r){void 0===n&&(n=cC.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},SS=function(){function t(){this.S=0,this.D=DS(),this.C=cC.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=mS(),e=mS(),n=mS();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:zw()}}),new bS(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=DS()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),TS=function(){function t(t){this.W=t,this.G=new Map,this.H=lS(),this.J=AS(),this.Y=new aS(Qw)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:zw()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(VC(i))if(0===n){var o=new bC(i.path);this.tt(e,o,MC.newNoDocument(o,tC.min()))}else Hw(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&VC(o.target)){var s=new bC(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,MC.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}});var r=mS();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new _S(t,n,this.Y,this.H,r);return this.H=lS(),this.J=AS(),this.Y=new aS(Qw),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new SS,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new aS(Qw),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||jw("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new SS),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function AS(){return new iS(bC.comparator)}function DS(){return new iS(bC.comparator)}var IS={asc:"ASCENDING",desc:"DESCENDING"},xS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kS=function(t,e){this.databaseId=t,this.I=e};function OS(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function FS(t,e){return t.I?e.toBase64():e.toUint8Array()}function PS(t,e){return OS(t,e.toTimestamp())}function NS(t){return Hw(!!t),tC.fromTimestamp(function(t){var e=hC(t);return new Xw(e.seconds,e.nanos)}(t))}function RS(t,e){return function(t){return new oC(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function LS(t){var e=oC.fromString(t);return Hw(sT(e)),e}function MS(t,e){return RS(t.databaseId,e.path)}function qS(t,e){var n=LS(e);if(n.get(1)!==t.databaseId.projectId)throw new qw(Mw.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new qw(Mw.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new bC(VS(n))}function US(t,e){return RS(t.databaseId,e)}function BS(t){var e=LS(t);return 4===e.length?oC.emptyPath():VS(e)}function jS(t){return new oC(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function VS(t){return Hw(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function GS(t,e,n){return{name:MS(t,e),fields:n.value.mapValue.fields}}function ZS(t,e,n){var r=qS(t,e.name),i=NS(e.updateTime),o=new RC({mapValue:{fields:e.fields}}),s=MC.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function zS(t,e){var n;if(e instanceof HE)n={update:GS(t,e.key,e.value)};else if(e instanceof XE)n={delete:MS(t,e.key)};else if(e instanceof YE)n={update:GS(t,e.key,e.data),updateMask:oT(e.fieldMask)};else{if(!(e instanceof tS))return zw();n={verify:MS(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof IE)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof xE)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof OE)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof PE)return{fieldPath:e.field.canonicalString(),increment:n.A};throw zw()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:PS(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:zw()}(t,e.precondition)),n}function HS(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?qE.updateTime(NS(t.updateTime)):void 0!==t.exists?qE.exists(t.exists):qE.none()}(e.currentDocument):qE.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Hw("REQUEST_TIME"===e.setToServerValue),n=new IE):"appendMissingElements"in e?n=new xE(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new OE(e.removeAllFromArray.values||[]):"increment"in e?n=new PE(t,e.increment):zw();var r=aC.fromServerFormat(e.fieldPath);return new LE(r,n)}(t,e)}):[];if(e.update){var i=qS(t,e.update.name),o=new RC({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new uC((t.fieldPaths||[]).map(function(t){return aC.fromServerFormat(t)}))}(e.updateMask);return new YE(i,o,s,n,r)}return new HE(i,o,n,r)}if(e.delete){var a=qS(t,e.delete);return new XE(a,n)}if(e.verify){var u=qS(t,e.verify);return new tS(u,n)}return zw()}function YS(t,e){return{documents:[US(t,e.path)]}}function WS(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=US(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=US(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(FC(t.value))return{unaryFilter:{field:eT(t.field),op:"IS_NAN"}};if(OC(t.value))return{unaryFilter:{field:eT(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(FC(t.value))return{unaryFilter:{field:eT(t.field),op:"IS_NOT_NAN"}};if(OC(t.value))return{unaryFilter:{field:eT(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:eT(t.field),op:tT(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:eT(t.field),direction:XS(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||yC(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=KS(e.startAt)),e.endAt&&(n.structuredQuery.endAt=KS(e.endAt)),n}function $S(t){var e=BS(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Hw(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=QS(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new tE(nT(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return yC(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=JS(n.startAt));var l=null;return n.endAt&&(l=JS(n.endAt)),oE(e,i,a,s,u,"F",c,l)}function QS(t){return t?void 0!==t.unaryFilter?[iT(t)]:void 0!==t.fieldFilter?[rT(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return QS(t)}).reduce(function(t,e){return t.concat(e)}):zw():[]}function KS(t){return{before:t.before,values:t.position}}function JS(t){return new JC(t.values||[],!!t.before)}function XS(t){return IS[t]}function tT(t){return xS[t]}function eT(t){return{fieldPath:t.canonicalString()}}function nT(t){return aC.fromServerFormat(t.fieldPath)}function rT(t){return GC.create(nT(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return zw()}}(t.fieldFilter.op),t.fieldFilter.value)}function iT(t){switch(t.unaryFilter.op){case"IS_NAN":var e=nT(t.unaryFilter.field);return GC.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=nT(t.unaryFilter.field);return GC.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=nT(t.unaryFilter.field);return GC.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=nT(t.unaryFilter.field);return GC.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return zw()}}function oT(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function sT(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function aT(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=cT(e)),e=uT(t.get(n),e);return cT(e)}function uT(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function cT(t){return t+"\x01\x01"}function lT(t){var e=t.length;if(Hw(e>=2),2===e)return Hw("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),oC.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&zw(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:zw()}o=s+2}return new oC(r)}var hT=function(t,e){this.seconds=t,this.nanoseconds=e},dT=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};dT.store="owner",dT.key="owner";var fT=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};fT.store="mutationQueues",fT.keyPath="userId";var pT=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};pT.store="mutations",pT.keyPath="batchId",pT.userMutationsIndex="userMutationsIndex",pT.userMutationsKeyPath=["userId","batchId"];var gT=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,aT(e)]},t.key=function(t,e,n){return[t,aT(e),n]},t}();gT.store="documentMutations",gT.PLACEHOLDER=new gT;var mT=function(t,e){this.path=t,this.readTime=e},yT=function(t,e){this.path=t,this.version=e},vT=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};vT.store="remoteDocuments",vT.readTimeIndex="readTimeIndex",vT.readTimeIndexPath="readTime",vT.collectionReadTimeIndex="collectionReadTimeIndex",vT.collectionReadTimeIndexPath=["parentPath","readTime"];var _T=function(t){this.byteSize=t};_T.store="remoteDocumentGlobal",_T.key="remoteDocumentGlobalKey";var bT=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};bT.store="targets",bT.keyPath="targetId",bT.queryTargetsIndexName="queryTargetsIndex",bT.queryTargetsKeyPath=["canonicalId","targetId"];var wT=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};wT.store="targetDocuments",wT.keyPath=["targetId","path"],wT.documentTargetsIndex="documentTargetsIndex",wT.documentTargetsKeyPath=["path","targetId"];var CT=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};CT.key="targetGlobalKey",CT.store="targetGlobal";var ET=function(t,e){this.collectionId=t,this.parent=e};ET.store="collectionParents",ET.keyPath=["collectionId","parent"];var ST=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};ST.store="clientMetadata",ST.keyPath="clientId";var TT=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};TT.store="bundles",TT.keyPath="bundleId";var AT=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};AT.store="namedQueries",AT.keyPath="name";var DT=(0,ay.ev)((0,ay.ev)([],(0,ay.ev)((0,ay.ev)([],(0,ay.ev)((0,ay.ev)([],(0,ay.ev)((0,ay.ev)([],[fT.store,pT.store,gT.store,vT.store,bT.store,dT.store,CT.store,wT.store]),[ST.store])),[_T.store])),[ET.store])),[TT.store,AT.store]),IT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",xT=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),kT=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},OT=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&zw(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),FT=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new kT,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new RT(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=BT(e.target.error);n.ft.reject(new RT(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new RT(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(jw("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new MT(e)},t}(),PT=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,Dy.z$)())&&Vw("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return jw("SimpleDb","Removing database:",t),qT(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,Dy.z$)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,ay.mG)(this,void 0,void 0,function(){var e,n=this;return(0,ay.Jh)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(jw("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new RT(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new qw(Mw.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new RT(t,n))},i.onupgradeneeded=function(t){jw("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){jw("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,ay.mG)(this,void 0,void 0,function(){var i,o,s,a,u;return(0,ay.Jh)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return(0,ay.Jh)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=FT.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),OT.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return jw("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),NT=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return qT(this.Pt.delete())},t}(),RT=function(t){function e(e,n){var r=this;return(r=t.call(this,Mw.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,ay.ZT)(e,t),e}(qw);function LT(t){return"IndexedDbTransactionError"===t.name}var MT=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(jw("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(jw("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),qT(n)},t.prototype.add=function(t){return jw("SimpleDb","ADD",this.store.name,t,t),qT(this.store.add(t))},t.prototype.get=function(t){var e=this;return qT(this.store.get(t)).next(function(n){return void 0===n&&(n=null),jw("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return jw("SimpleDb","DELETE",this.store.name,t),qT(this.store.delete(t))},t.prototype.count=function(){return jw("SimpleDb","COUNT",this.store.name),qT(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){jw("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new OT(function(n,r){e.onerror=function(t){var e=BT(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new OT(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new NT(i),s=e(i.primaryKey,i.value,o);if(s instanceof OT){var a=s.catch(function(t){return o.done(),OT.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return OT.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function qT(t){return new OT(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=BT(t.target.error);n(e)}})}var UT=!1;function BT(t){var e=PT._t((0,Dy.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new qw("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return UT||(UT=!0,setTimeout(function(){throw r},0)),r}}return t}var jT=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,ay.ZT)(e,t),e}(xT);function VT(t,e){var n=Yw(t);return PT.It(n.Mt,e)}var GT=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&jE(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&VE(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&VE(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(tC.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},mS())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Kw(this.mutations,t.mutations,function(t,e){return ZE(t,e)})&&Kw(this.baseMutations,t.baseMutations,function(t,e){return ZE(t,e)})},t}(),ZT=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Hw(e.mutations.length===r.length);for(var i=pS(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),zT=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=tC.min()),void 0===o&&(o=tC.min()),void 0===s&&(s=cC.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),HT=function(t){this.Lt=t};function YT(t,e){if(e.document)return ZS(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=bC.fromSegments(e.noDocument.path),r=JT(e.noDocument.readTime),i=MC.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=bC.fromSegments(e.unknownDocument.path);return r=JT(e.unknownDocument.version),MC.newUnknownDocument(o,r)}return zw()}function WT(t,e,n){var r=$T(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:MS(t,e.key),fields:e.data.value.mapValue.fields,updateTime:OS(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new vT(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=KT(e.version);return s=e.hasCommittedMutations,new vT(null,new mT(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=KT(e.version);return new vT(new yT(c,l),null,null,!0,r,i)}return zw()}function $T(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function QT(t){var e=new Xw(t[0],t[1]);return tC.fromTimestamp(e)}function KT(t){var e=t.toTimestamp();return new hT(e.seconds,e.nanoseconds)}function JT(t){var e=new Xw(t.seconds,t.nanoseconds);return tC.fromTimestamp(e)}function XT(t,e){for(var n=(e.baseMutations||[]).map(function(e){return HS(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return HS(t.Lt,e)}),o=Xw.fromMillis(e.localWriteTimeMs);return new GT(e.batchId,o,n,i)}function tA(t){var e,n,r=JT(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?JT(t.lastLimboFreeSnapshotVersion):tC.min();return void 0!==t.query.documents?(Hw(1===(n=t.query).documents.length),e=fE(sE(BS(n.documents[0])))):e=function(t){return fE($S(t))}(t.query),new zT(e,t.targetId,0,t.lastListenSequenceNumber,r,i,cC.fromBase64String(t.resumeToken))}function eA(t,e){var n,r=KT(e.snapshotVersion),i=KT(e.lastLimboFreeSnapshotVersion);n=VC(e.target)?YS(t.Lt,e.target):WS(t.Lt,e.target);var o=e.resumeToken.toBase64();return new bT(e.targetId,BC(e.target),r,o,e.sequenceNumber,i,n)}function nA(t){var e=$S({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?pE(e,e.limit,"L"):e}var rA=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return iA(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:JT(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return iA(t).put({bundleId:(n=e).id,createTime:KT(NS(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return oA(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:nA(e.bundledQuery),readTime:JT(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return oA(t).put(function(t){return{name:t.name,readTime:KT(NS(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function iA(t){return VT(t,TT.store)}function oA(t){return VT(t,AT.store)}var sA=function(){function t(){this.Bt=new aA}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),OT.resolve()},t.prototype.getCollectionParents=function(t,e){return OT.resolve(this.Bt.getEntries(e))},t}(),aA=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new aS(oC.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new aS(oC.comparator)).toArray()},t}(),uA=function(){function t(){this.qt=new aA}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:aT(i)};return cA(t).put(o)}return OT.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Jw(e),""],!1,!0);return cA(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(lT(o.parent))}return n})},t}();function cA(t){return VT(t,ET.store)}var lA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hA=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function dA(t,e,n){var r=t.store(pT.store),i=t.store(gT.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Hw(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=gT.key(e,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return OT.waitFor(o).next(function(){return c})}function fA(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw zw();e=t.noDocument}return JSON.stringify(e).length}hA.DEFAULT_COLLECTION_PERCENTILE=10,hA.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hA.DEFAULT=new hA(41943040,hA.DEFAULT_COLLECTION_PERCENTILE,hA.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hA.DISABLED=new hA(-1,0,0);var pA=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return Hw(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return mA(t).$t({index:pT.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=yA(t),s=mA(t);return s.add({}).next(function(a){Hw("number"==typeof a);for(var u=new GT(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return zS(t.Lt,e)}),i=n.mutations.map(function(e){return zS(t.Lt,e)});return new pT(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new aS(function(t,e){return Qw(t.canonicalString(),e.canonicalString())}),d=0,f=r;d<f.length;d++){var p=f[d],g=gT.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,gT.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Kt[a]=u.keys()}),OT.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return mA(t).get(e).next(function(t){return t?(Hw(t.userId===n.userId),XT(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?OT.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return mA(t).$t({index:pT.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Hw(e.batchId>=r),o=XT(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return mA(t).$t({index:pT.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return mA(t).Nt(pT.userMutationsIndex,n).next(function(t){return t.map(function(t){return XT(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=gT.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return yA(t).$t({range:i},function(r,i,s){var a=r[0],u=r[2],c=lT(r[1]);if(a===n.userId&&e.path.isEqual(c))return mA(t).get(u).next(function(t){if(!t)throw zw();Hw(t.userId===n.userId),o.push(XT(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new aS(Qw),i=[];return e.forEach(function(e){var o=gT.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=yA(t).$t({range:s},function(t,i,o){var s=t[0],a=t[2],u=lT(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),OT.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=gT.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new aS(Qw);return yA(t).$t({range:s},function(t,e,o){var s=t[0],u=t[2],c=lT(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(mA(t).get(e).next(function(t){if(null===t)throw zw();Hw(t.userId===n.userId),r.push(XT(n.R,t))}))}),OT.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return dA(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),OT.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return OT.resolve();var r=IDBKeyRange.lowerBound(gT.prefixForUser(e.userId)),i=[];return yA(t).$t({range:r},function(t,n,r){if(t[0]===e.userId){var o=lT(t[1]);i.push(o)}else r.done()}).next(function(){Hw(0===i.length)})})},t.prototype.containsKey=function(t,e){return gA(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return vA(t).get(this.userId).next(function(t){return t||new fT(e.userId,-1,"")})},t}();function gA(t,e,n){var r=gT.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return yA(t).$t({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function mA(t){return VT(t,pT.store)}function yA(t){return VT(t,gT.store)}function vA(t){return VT(t,fT.store)}var _A=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),bA=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new _A(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return tC.fromTimestamp(new Xw(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return wA(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return Hw(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return wA(t).$t(function(s,a){var u=tA(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return OT.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return wA(t).$t(function(t,n){var r=tA(n);e(r)})},t.prototype.Xt=function(t){return CA(t).get(CT.key).next(function(t){return Hw(null!==t),t})},t.prototype.Zt=function(t,e){return CA(t).put(CT.key,e)},t.prototype.te=function(t,e){return wA(t).put(eA(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=BC(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return wA(t).$t({range:r,index:bT.queryTargetsIndexName},function(t,n,r){var o=tA(n);jC(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=EA(t);return e.forEach(function(e){var s=aT(e.path);i.push(o.put(new wT(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),OT.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=EA(t);return OT.forEach(e,function(e){var o=aT(e.path);return OT.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=EA(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=EA(t),i=mS();return r.$t({range:n,kt:!0},function(t,e,n){var r=lT(t[1]),o=new bC(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=aT(e.path),r=IDBKeyRange.bound([n],[Jw(n)],!1,!0),i=0;return EA(t).$t({index:wT.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return wA(t).get(e).next(function(t){return t?tA(t):null})},t}();function wA(t){return VT(t,bT.store)}function CA(t){return VT(t,CT.store)}function EA(t){return VT(t,wT.store)}function SA(t){return(0,ay.mG)(this,void 0,void 0,function(){return(0,ay.Jh)(this,function(e){if(t.code!==Mw.FAILED_PRECONDITION||t.message!==IT)throw t;return jw("LocalStore","Unexpectedly lost primary lease"),[2]})})}function TA(t,e){var n=t[1],r=e[1],i=Qw(t[0],e[0]);return 0===i?Qw(n,r):i}var AA=function(){function t(t){this.ne=t,this.buffer=new aS(TA),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();TA(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),DA=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;jw("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return(0,ay.mG)(e,void 0,void 0,function(){var e;return(0,ay.Jh)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return LT(e=n.sent())?(jw("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,SA(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),IA=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return OT.resolve(Lw.o);var r=new AA(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(jw("LruGarbageCollector","Garbage collection skipped; disabled"),OT.resolve(lA)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(jw("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),lA):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(jw("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Bw()<=Iy.in.DEBUG&&jw("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),OT.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),xA=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new IA(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return kA(t,n)},t.prototype.removeReference=function(t,e,n){return kA(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return kA(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return vA(t).Ot(function(r){return gA(t,r,e).next(function(t){return t&&(n=!0),OT.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),EA(t).delete([0,aT(s.path)])})});i.push(u)}}).next(function(){return OT.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return kA(t,e)},t.prototype.we=function(t,e){var n,r=EA(t),i=Lw.o;return r.$t({index:wT.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Lw.o&&e(new bC(lT(n)),i),i=s,n=o):i=Lw.o}).next(function(){i!==Lw.o&&e(new bC(lT(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function kA(t,e){return EA(t).put(function(t,e){return new wT(0,aT(t.path),e)}(e,t.currentSequenceNumber))}var OA=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){nC(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return rC(this.inner)},t}(),FA=function(){function t(){this.changes=new OA(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:tC.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:MC.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?OT.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),PA=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return LA(t).put(MA(e),n)},t.prototype.removeEntry=function(t,e){var n=LA(t),r=MA(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return LA(t).get(MA(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return LA(t).get(MA(e)).next(function(t){return{document:n.ye(e,t),size:fA(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=lS();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=lS(),i=new iS(bC.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,fA(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return OT.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return LA(t).$t({range:r},function(t,e,r){for(var s=bC.fromSegments(t);o&&bC.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=lS(),o=e.path.length+1,s={};if(n.isEqual(tC.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=$T(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=vT.collectionReadTimeIndex}return LA(t).$t(s,function(t,n,s){if(t.length===o){var a=YT(r.R,n);e.path.isPrefixOf(a.key.path)?vE(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new NA(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return RA(t).get(_T.key).next(function(t){return Hw(!!t),t})},t.prototype.me=function(t,e){return RA(t).put(_T.key,e)},t.prototype.ye=function(t,e){if(e){var n=YT(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(tC.min()))return n}return MC.newInvalidDocument(t)},t}(),NA=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new OA(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return(0,ay.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new aS(function(t,e){return Qw(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=WT(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=fA(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=WT(e.Ie.R,MC.newNoDocument(o,tC.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),OT.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(FA);function RA(t){return VT(t,_T.store)}function LA(t){return VT(t,vT.store)}function MA(t){return t.path.toArray()}var qA=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Hw(n<r&&n>=0&&r<=11);var o=new FT("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(dT.store)}(t),function(t){t.createObjectStore(fT.store,{keyPath:fT.keyPath}),t.createObjectStore(pT.store,{keyPath:pT.keyPath,autoIncrement:!0}).createIndex(pT.userMutationsIndex,pT.userMutationsKeyPath,{unique:!0}),t.createObjectStore(gT.store)}(t),UA(t),function(t){t.createObjectStore(vT.store)}(t));var s=OT.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(wT.store),t.deleteObjectStore(bT.store),t.deleteObjectStore(CT.store)}(t),UA(t)),s=s.next(function(){return function(t){var e=t.store(CT.store),n=new CT(0,0,tC.min().toTimestamp(),0);return e.put(CT.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(pT.store).Nt().next(function(n){t.deleteObjectStore(pT.store),t.createObjectStore(pT.store,{keyPath:pT.keyPath,autoIncrement:!0}).createIndex(pT.userMutationsIndex,pT.userMutationsKeyPath,{unique:!0});var r=e.store(pT.store),i=n.map(function(t){return r.put(t)});return OT.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(ST.store,{keyPath:ST.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(_T.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(vT.store);e.createIndex(vT.readTimeIndex,vT.readTimeIndexPath,{unique:!1}),e.createIndex(vT.collectionReadTimeIndex,vT.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(TT.store,{keyPath:TT.keyPath})}(t),function(t){t.createObjectStore(AT.store,{keyPath:AT.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(vT.store).$t(function(t,n){e+=fA(n)}).next(function(){var n=new _T(e);return t.store(_T.store).put(_T.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(fT.store),r=t.store(pT.store);return n.Nt().next(function(n){return OT.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(pT.userMutationsIndex,i).next(function(r){return OT.forEach(r,function(r){Hw(r.userId===n.userId);var i=XT(e.R,r);return dA(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(wT.store),n=t.store(vT.store);return t.store(CT.store).get(CT.key).next(function(t){var r=[];return n.$t(function(n,i){var o=new oC(n),s=function(t){return[0,aT(t)]}(o);r.push(e.get(s).next(function(n){return n?OT.resolve():function(n){return e.put(new wT(0,aT(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return OT.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(ET.store,{keyPath:ET.keyPath});var n=e.store(ET.store),r=new aA,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:aT(i)})}};return e.store(vT.store).$t({kt:!0},function(t,e){var n=new oC(t);return i(n.popLast())}).next(function(){return e.store(gT.store).$t({kt:!0},function(t,e){var n=lT(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(bT.store);return n.$t(function(t,r){var i=tA(r),o=eA(e.R,i);return n.put(o)})},t}();function UA(t){t.createObjectStore(wT.store,{keyPath:wT.keyPath}).createIndex(wT.documentTargetsIndex,wT.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(bT.store,{keyPath:bT.keyPath}).createIndex(bT.queryTargetsIndexName,bT.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(CT.store)}var BA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",jA=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new qw(Mw.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xA(this,i),this.Le=n+"main",this.R=new HT(u),this.Be=new PT(this.Le,11,new qA(this.R)),this.qe=new bA(this.referenceDelegate,this.R),this.Ut=new uA,this.Ue=function(t,e){return new PA(t,e)}(this.R,this.Ut),this.Ke=new rA,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&Vw("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new qw(Mw.FAILED_PRECONDITION,BA);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new Lw(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,ay.mG)(e,void 0,void 0,function(){return(0,ay.Jh)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return(0,ay.mG)(e,void 0,void 0,function(){return(0,ay.Jh)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,ay.mG)(e,void 0,void 0,function(){return(0,ay.Jh)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return GA(e).put(new ST(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(LT(e))return jw("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return jw("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return VA(t).get(dT.key).next(function(t){return OT.resolve(e.tn(t))})},t.prototype.en=function(t){return GA(t).delete(this.clientId)},t.prototype.nn=function(){return(0,ay.mG)(this,void 0,void 0,function(){var t,e,n,r=this;return(0,ay.Jh)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=VT(t,ST.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return OT.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)this.Qe.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?OT.resolve(!0):VA(t).get(dT.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new qw(Mw.FAILED_PRECONDITION,BA);return!1}}return!(!e.networkEnabled||!e.inForeground)||GA(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&jw("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return(0,ay.mG)(this,void 0,void 0,function(){var t=this;return(0,ay.Jh)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[dT.store,ST.store],function(e){var n=new jT(e,Lw.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return GA(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return pA.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r,i=this;return jw("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",DT,function(o){return r=new jT(o,i.Ne?i.Ne.next():Lw.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw Vw("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new qw(Mw.FAILED_PRECONDITION,IT);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return VA(t).get(dT.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new qw(Mw.FAILED_PRECONDITION,BA)})},t.prototype.Ze=function(t){var e=new dT(this.clientId,this.allowTabSynchronization,Date.now());return VA(t).put(dT.key,e)},t.yt=function(){return PT.yt()},t.prototype.Xe=function(t){var e=this,n=VA(t);return n.get(dT.key).next(function(t){return e.tn(t)?(jw("IndexedDbPersistence","Releasing primary lease."),n.delete(dT.key)):OT.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Vw("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return jw("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Vw("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Vw("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function VA(t){return VT(t,dT.store)}function GA(t){return VT(t,ST.store)}function ZA(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var zA=function(t,e){this.progress=t,this.wn=e},HA=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return bC.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):hE(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new bC(e)).next(function(t){var e=dS();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=dS();return this.Ut.getCollectionParents(t,i).next(function(s){return OT.forEach(s,function(s){var a=function(t,e){return new iE(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=MC.newInvalidDocument(c),r=r.insert(c,l)),VE(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){vE(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=mS(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof YE&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),YA=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=mS(),i=mS(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),WA=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(tC.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(aE(e)||uE(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Bw()<=Iy.in.DEBUG&&jw("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),yE(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new aS(_E(t));return e.forEach(function(e,r){vE(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Bw()<=Iy.in.DEBUG&&jw("QueryEngine","Using full collection scan to execute query:",yE(e)),this.Sn.getDocumentsMatchingQuery(t,e,tC.min())},t}(),$A=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new iS(Qw),this.kn=new OA(function(t){return BC(t)},jC),this.$n=tC.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new HA(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function QA(t,e,n,r){return new $A(t,e,n,r)}function KA(t,e){return(0,ay.mG)(this,void 0,void 0,function(){var n,r,i,o;return(0,ay.Jh)(this,function(s){switch(s.label){case 0:return n=Yw(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new HA(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=mS(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)s=s.add(m[g].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function JA(t,e){var n=Yw(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=OT.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);Hw(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function XA(t){var e=Yw(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function tD(t,e){var n=Yw(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Hw(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=lS();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(eD(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(tC.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return OT.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function eD(t,e,n,r,i){var o=mS();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=lS();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(tC.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):jw("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function nD(t,e){var n=Yw(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function rD(t,e){var n=Yw(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?OT.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new zT(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function iD(t,e,n){return(0,ay.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,ay.Jh)(this,function(a){switch(a.label){case 0:r=Yw(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!LT(s=a.sent()))throw s;return jw("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function oD(t,e,n){var r=Yw(t),i=tC.min(),o=mS();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Yw(t),i=r.kn.get(n);return void 0!==i?OT.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,fE(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:tC.min(),n?o:mS())}).next(function(t){return{documents:t,Bn:o}})})}function sD(t,e){var n=Yw(t),r=Yw(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function aD(t){var e=Yw(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Yw(t),i=lS(),o=$T(n),s=LA(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:vT.readTimeIndex,range:a},function(t,e){var n=YT(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:QT(o)}})}(e.On,t,e.$n)}).then(function(t){var n=t.wn;return e.$n=t.readTime,n})}function uD(t){return(0,ay.mG)(this,void 0,void 0,function(){var e;return(0,ay.Jh)(this,function(n){return[2,(e=Yw(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=LA(t),n=tC.min();return e.$t({index:vT.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=QT(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.$n=t})]})})}function cD(t,e,n,r){return(0,ay.mG)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,d,f;return(0,ay.Jh)(this,function(p){switch(p.label){case 0:for(i=Yw(t),o=mS(),s=lS(),a=pS(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Kn(l.metadata.readTime));return d=i.On.newChangeBuffer({trackRemovals:!0}),[4,rD(i,function(t){return fE(sE(oC.fromString("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return eD(t,d,s,tC.min(),a).next(function(e){return d.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,f.targetId).next(function(){return i.qe.addMatchingKeys(t,o,f.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function lD(t,e,n){return void 0===n&&(n=mS()),(0,ay.mG)(this,void 0,void 0,function(){var r,i;return(0,ay.Jh)(this,function(o){switch(o.label){case 0:return[4,rD(t,fE(nA(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Yw(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=NS(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(t,e);var s=r.withResumeToken(cC.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Ke.saveNamedQuery(t,e)})})]}})})}var hD=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return OT.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:NS(n.createTime)}),OT.resolve()},t.prototype.getNamedQuery=function(t,e){return OT.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:nA(t.bundledQuery),readTime:NS(t.readTime)}}(e)),OT.resolve()},t}(),dD=function(){function t(){this.Wn=new aS(fD.Gn),this.zn=new aS(fD.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new fD(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new fD(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new bC(new oC([])),r=new fD(n,t),i=new fD(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new bC(new oC([])),n=new fD(e,t),r=new fD(e,t+1),i=mS();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new fD(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),fD=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return bC.comparator(t.key,e.key)||Qw(t.ns,e.ns)},t.Hn=function(t,e){return Qw(t.ns,e.ns)||bC.comparator(t.key,e.key)},t}(),pD=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new aS(fD.Gn)}return t.prototype.checkEmpty=function(t){return OT.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new GT(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new fD(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return OT.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return OT.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return OT.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return OT.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return OT.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new fD(e,0),i=new fD(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),OT.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new aS(Qw);return e.forEach(function(t){var e=new fD(t,0),i=new fD(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),OT.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;bC.isDocumentKey(i)||(i=i.child(""));var o=new fD(new bC(i),0),s=new aS(Qw);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),OT.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Hw(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return OT.forEach(e.mutations,function(i){var o=new fD(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new fD(e,0),r=this.rs.firstAfterOrEqual(n);return OT.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return OT.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),gD=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new iS(bC.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return OT.resolve(n?n.document.clone():MC.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=lS();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():MC.newInvalidDocument(t))}),OT.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=lS(),i=new bC(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||vE(e,u)&&(r=r.insert(u.key,u.clone()))}return OT.resolve(r)},t.prototype.fs=function(t,e){return OT.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new mD(this)},t.prototype.getSize=function(t){return OT.resolve(this.size)},t}(),mD=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,ay.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),OT.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(FA),yD=function(){function t(t){this.persistence=t,this.ds=new OA(function(t){return BC(t)},jC),this.lastRemoteSnapshotVersion=tC.min(),this.highestTargetId=0,this.ws=0,this._s=new dD,this.targetCount=0,this.ys=_A.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),OT.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return OT.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return OT.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),OT.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),OT.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new _A(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,OT.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),OT.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,OT.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),OT.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return OT.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return OT.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),OT.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),OT.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),OT.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return OT.resolve(n)},t.prototype.containsKey=function(t,e){return OT.resolve(this._s.containsKey(e))},t}(),vD=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Lw(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new yD(this),this.Ut=new sA,this.Ue=function(t,e){return new gD(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new HT(e),this.Ke=new hD(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new pD(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;jw("MemoryPersistence","Starting transaction:",t);var i=new _D(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return OT.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),_D=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,ay.ZT)(e,t),e}(xT),bD=function(){function t(t){this.persistence=t,this.As=new dD,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw zw()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),OT.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),OT.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),OT.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return OT.forEach(this.vs,function(r){var i=bC.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return OT.or([function(){return OT.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),wD=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function CD(t,e){return"firestore_clients_"+t+"_"+e}function ED(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function SD(t,e){return"firestore_targets_"+t+"_"+e}wD.UNAUTHENTICATED=new wD(null),wD.GOOGLE_CREDENTIALS=new wD("google-credentials-uid"),wD.FIRST_PARTY=new wD("first-party-uid");var TD=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new qw(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Vw("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),AD=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new qw(i.error.code,i.error.message)),o?new t(e,i.state,r):(Vw("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),DD=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=vS(),s=0;i&&s<r.activeTargetIds.length;++s)i=_C(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Vw("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),ID=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Vw("SharedClientState","Failed to parse online state: "+e),null)},t}(),xD=function(){function t(){this.activeTargetIds=vS()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),kD=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new iS(Qw),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=CD(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new xD),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,ay.mG)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return(0,ay.Jh)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(CD(this.persistenceKey,r)))&&(o=DD.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)this.Fs(c[u]);return this.$s=[],this.window.addEventListener("pagehide",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(SD(this.persistenceKey,t));if(n){var r=AD.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(SD(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return jw("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){jw("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){jw("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(jw("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Vw("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,ay.mG)(e,void 0,void 0,function(){var t,e,r,i,o,s;return(0,ay.Jh)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Lw.o;if(null!=t)try{var n=JSON.parse(t);Hw("number"==typeof n),e=n}catch(t){Vw("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Lw.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new TD(this.currentUser,t,e,n),i=ED(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=ED(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=SD(this.persistenceKey,t),i=new AD(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return DD.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return TD.Vs(new wD(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return AD.Vs(r,e)},t.prototype.js=function(t){return ID.Vs(t)},t.prototype.ii=function(t){return(0,ay.mG)(this,void 0,void 0,function(){return(0,ay.Jh)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(jw("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=vS();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),OD=function(){function t(){this.li=new xD,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new xD,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),FD=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),PD=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){jw("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){jw("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),ND={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},RD=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),LD=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return(0,ay.ZT)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new Rw;s.listenOnce(Ow.COMPLETE,function(){try{switch(s.getLastErrorCode()){case kw.NO_ERROR:var e=s.getResponseJson();jw("Connection","XHR received:",JSON.stringify(e)),i(e);break;case kw.TIMEOUT:jw("Connection",'RPC "'+t+'" timed out'),o(new qw(Mw.DEADLINE_EXCEEDED,"Request time out"));break;case kw.HTTP_ERROR:var n=s.getStatus();if(jw("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Mw).indexOf(e)>=0?e:Mw.UNKNOWN}(r.status);o(new qw(a,r.message))}else o(new qw(Mw.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new qw(Mw.UNAVAILABLE,"Connection failed."));break;default:zw()}}finally{jw("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Tw,i=__(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Pw({})),this.Fi(o.initMessageHeaders,e),(0,Dy.uI)()||(0,Dy.b$)()||(0,Dy.d)()||(0,Dy.w1)()||(0,Dy.Mn)()||(0,Dy.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");jw("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new RD({Ei:function(t){c?jw("Connection","Not sending because WebChannel is closed:",t):(u||(jw("Connection","Opening WebChannel transport."),a.open(),u=!0),jw("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Nw.EventType.OPEN,function(){c||jw("Connection","WebChannel transport opened.")}),h(a,Nw.EventType.CLOSE,function(){c||(c=!0,jw("Connection","WebChannel transport closed"),l.Vi())}),h(a,Nw.EventType.ERROR,function(t){c||(c=!0,Gw("Connection","WebChannel transport errored:",t),l.Vi(new qw(Mw.UNAVAILABLE,"The operation could not be completed")))}),h(a,Nw.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Hw(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){jw("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=KE[t];if(void 0!==e)return rS(e)}(i),s=r.message;void 0===o&&(o=Mw.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new qw(o,s)),a.close()}else jw("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Fw.STAT_EVENT,function(t){10===t.stat?jw("Connection","Detected buffering proxy"):11===t.stat&&jw("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);jw("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return jw("RestConnection","Received: ",t),t},function(e){throw Gw("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.7.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+ND[t]},t}());function MD(){return"undefined"!=typeof window?window:null}function qD(){return"undefined"!=typeof document?document:null}function UD(t){return new kS(t,!0)}var BD=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&jw("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),jD=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new BD(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,ay.mG)(this,void 0,void 0,function(){return(0,ay.Jh)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,ay.mG)(this,void 0,void 0,function(){return(0,ay.Jh)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,ay.mG)(this,void 0,void 0,function(){return(0,ay.Jh)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Mw.RESOURCE_EXHAUSTED?(Vw(e.toString()),Vw("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===Mw.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new qw(Mw.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,ay.mG)(t,void 0,void 0,function(){return(0,ay.Jh)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return jw("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(jw("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),VD=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return(0,ay.ZT)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:zw()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Hw(void 0===e||"string"==typeof e),cC.fromBase64String(e||"")):(Hw(void 0===e||e instanceof Uint8Array),cC.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Mw.UNKNOWN:rS(t.code);return new qw(e,t.message||"")}(a);n=new ES(r,i,o,s||null)}else if("documentChange"in e){i=qS(t,(r=e.documentChange).document.name),o=NS(r.document.updateTime);var a=new RC({mapValue:{fields:r.document.fields}}),u=(s=MC.newFoundDocument(i,o,a),r.targetIds||[]);n=new wS(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=qS(t,(r=e.documentDelete).document),o=r.readTime?NS(r.readTime):tC.min(),a=MC.newNoDocument(i,o),n=new wS([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=qS(t,(r=e.documentRemove).document),n=new wS([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return zw();var c=e.filter;i=new eS(r=c.count||0),n=new CS(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return tC.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?tC.min():e.readTime?NS(e.readTime):tC.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=jS(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=VC(r)?{documents:YS(t,r)}:{query:WS(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=FS(t,e.resumeToken):e.snapshotVersion.compareTo(tC.min())>0&&(n.readTime=OS(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return zw()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=jS(this.R),e.removeTarget=t,this.cr(e)},e}(jD),GD=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return(0,ay.ZT)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(Hw(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Hw(void 0!==e),t.map(function(t){return function(t,e){var n=NS(t.updateTime?t.updateTime:e);return n.isEqual(tC.min())&&(n=NS(e)),new ME(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=NS(t.commitTime);return this.listener.Tr(n,e)}return Hw(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=jS(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return zS(e.R,t)})};this.cr(n)},e}(jD),ZD=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,ay.ZT)(e,t),e.prototype.br=function(){if(this.Rr)throw new qw(Mw.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Mw.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new qw(Mw.UNKNOWN,t.toString())})},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.$i(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Mw.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new qw(Mw.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),zD=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Vw(e),this.Vr=!1):jw("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),HD=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return(0,ay.mG)(o,void 0,void 0,function(){return(0,ay.Jh)(this,function(t){switch(t.label){case 0:return eI(this)?(jw("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,ay.mG)(this,void 0,void 0,function(){var e;return(0,ay.Jh)(this,function(n){switch(n.label){case 0:return(e=Yw(t)).Or.add(4),[4,WD(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,YD(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new zD(n,r)};function YD(t){return(0,ay.mG)(this,void 0,void 0,function(){var e,n;return(0,ay.Jh)(this,function(r){switch(r.label){case 0:if(!eI(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function WD(t){return(0,ay.mG)(this,void 0,void 0,function(){var e,n;return(0,ay.Jh)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function $D(t,e){var n=Yw(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),tI(n)?XD(n):mI(n).er()&&KD(n,e))}function QD(t,e){var n=Yw(t),r=mI(n);n.$r.delete(e),r.er()&&JD(n,e),0===n.$r.size&&(r.er()?r.ir():eI(n)&&n.Br.set("Unknown"))}function KD(t,e){t.qr.U(e.targetId),mI(t).mr(e)}function JD(t,e){t.qr.U(e),mI(t).yr(e)}function XD(t){t.qr=new TS({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),mI(t).start(),t.Br.Sr()}function tI(t){return eI(t)&&!mI(t).tr()&&t.$r.size>0}function eI(t){return 0===Yw(t).Or.size}function nI(t){t.qr=void 0}function rI(t){return(0,ay.mG)(this,void 0,void 0,function(){return(0,ay.Jh)(this,function(e){return t.$r.forEach(function(e,n){KD(t,e)}),[2]})})}function iI(t,e){return(0,ay.mG)(this,void 0,void 0,function(){return(0,ay.Jh)(this,function(n){return nI(t),tI(t)?(t.Br.Nr(e),XD(t)):t.Br.set("Unknown"),[2]})})}function oI(t,e,n){return(0,ay.mG)(this,void 0,void 0,function(){var r,i,o;return(0,ay.Jh)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof ES&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return(0,ay.mG)(this,void 0,void 0,function(){var n,r,i,o;return(0,ay.Jh)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.$r.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),jw("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,sI(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof wS?t.qr.X(e):e instanceof CS?t.qr.rt(e):t.qr.et(e),n.isEqual(tC.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,XA(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(cC.EMPTY_BYTE_STRING,n.snapshotVersion)),JD(t,e);var r=new zT(n.target,e,1,n.sequenceNumber);KD(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return jw("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,sI(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function sI(t,e,n){return(0,ay.mG)(this,void 0,void 0,function(){var r=this;return(0,ay.Jh)(this,function(i){switch(i.label){case 0:if(!LT(e))throw e;return t.Or.add(1),[4,WD(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return XA(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return(0,ay.mG)(r,void 0,void 0,function(){return(0,ay.Jh)(this,function(e){switch(e.label){case 0:return jw("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,YD(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function aI(t,e){return e().catch(function(n){return sI(t,n,e)})}function uI(t){return(0,ay.mG)(this,void 0,void 0,function(){var e,n,r,i,o;return(0,ay.Jh)(this,function(s){switch(s.label){case 0:e=Yw(t),n=yI(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return eI(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,nD(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=yI(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,sI(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return cI(e)&&lI(e),[2]}})})}function cI(t){return eI(t)&&!yI(t).tr()&&t.kr.length>0}function lI(t){yI(t).start()}function hI(t){return(0,ay.mG)(this,void 0,void 0,function(){return(0,ay.Jh)(this,function(e){return yI(t).Ar(),[2]})})}function dI(t){return(0,ay.mG)(this,void 0,void 0,function(){var e,n,r;return(0,ay.Jh)(this,function(i){for(e=yI(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function fI(t,e,n){return(0,ay.mG)(this,void 0,void 0,function(){var r,i;return(0,ay.Jh)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=ZT.from(r,e,n),[4,aI(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,uI(t)];case 2:return o.sent(),[2]}})})}function pI(t,e){return(0,ay.mG)(this,void 0,void 0,function(){return(0,ay.Jh)(this,function(n){switch(n.label){case 0:return e&&yI(t).pr?[4,function(t,e){return(0,ay.mG)(this,void 0,void 0,function(){var n,r;return(0,ay.Jh)(this,function(i){switch(i.label){case 0:return nS(r=e.code)&&r!==Mw.ABORTED?(n=t.kr.shift(),yI(t).sr(),[4,aI(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,uI(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return cI(t)&&lI(t),[2]}})})}function gI(t,e){return(0,ay.mG)(this,void 0,void 0,function(){var n;return(0,ay.Jh)(this,function(r){switch(r.label){case 0:return n=Yw(t),e?(n.Or.delete(2),[4,YD(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,WD(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function mI(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Yw(t);return r.br(),new VD(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:rI.bind(null,t),Ri:iI.bind(null,t),_r:oI.bind(null,t)}),t.Mr.push(function(n){return(0,ay.mG)(e,void 0,void 0,function(){return(0,ay.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),tI(t)?XD(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),nI(t),e.label=3;case 3:return[2]}})})})),t.Ur}function yI(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=Yw(t);return r.br(),new GD(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:hI.bind(null,t),Ri:pI.bind(null,t),Ir:dI.bind(null,t),Tr:fI.bind(null,t)}),t.Mr.push(function(n){return(0,ay.mG)(e,void 0,void 0,function(){return(0,ay.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,uI(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.kr.length>0&&(jw("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Kr}var vI=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new kT,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new qw(Mw.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function _I(t,e){if(Vw("AsyncQueue",e+": "+t),LT(t))return new qw(Mw.UNAVAILABLE,e+": "+t);throw t}var bI=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||bC.comparator(e.key,n.key)}:function(t,e){return bC.comparator(t.key,e.key)},this.keyedMap=dS(),this.sortedSet=new iS(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),wI=function(){function t(){this.Qr=new iS(bC.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):zw():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),CI=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,bI.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&gE(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),EI=function(){this.Wr=void 0,this.listeners=[]},SI=function(){this.queries=new OA(function(t){return mE(t)},gE),this.onlineState="Unknown",this.Gr=new Set};function TI(t,e){return(0,ay.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return(0,ay.Jh)(this,function(c){switch(c.label){case 0:if(n=Yw(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new EI),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=_I(a,"Initialization of query '"+yE(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&xI(n),[2]}})})}function AI(t,e){return(0,ay.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,ay.Jh)(this,function(a){return n=Yw(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function DI(t,e){for(var n=Yw(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&xI(n)}function II(t,e,n){var r=Yw(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function xI(t){t.Gr.forEach(function(t){t.next()})}var kI=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new CI(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=CI.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),OI=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),FI=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return qS(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?ZS(this.R,t.document,!1):MC.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return NS(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new FI(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||mS()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return(0,ay.mG)(this,void 0,void 0,function(){var t,e,n,r,i;return(0,ay.Jh)(this,function(o){switch(o.label){case 0:return[4,cD(this.localStore,new FI(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,lD(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new zA(Object.assign({},this.progress),t))]}})})}}();var PI=function(t){this.key=t},NI=function(t){this.key=t},RI=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=mS(),this.mutatedKeys=mS(),this.lo=_E(t),this.fo=new bI(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new wI,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=aE(this.query)&&i.size===this.query.limit?i.last():null,c=uE(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=vE(n.query,e)?e:null,d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?d!==f&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),aE(this.query)||uE(this.query))for(;s.size>this.query.limit;){var l=aE(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zw()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new CI(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new wI,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=mS(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new NI(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new PI(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=mS();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return CI.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),LI=function(t,e,n){this.query=t,this.targetId=e,this.view=n},MI=function(t){this.key=t,this.bo=!1},qI=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new OA(function(t){return mE(t)},gE),this.Vo=new Map,this.So=new Set,this.Do=new iS(bC.comparator),this.Co=new Map,this.No=new dD,this.xo={},this.Fo=new Map,this.ko=_A.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function UI(t,e){return(0,ay.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,ay.Jh)(this,function(a){switch(a.label){case 0:return n=px(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,rD(n.localStore,fE(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,BI(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&$D(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function BI(t,e,n,r){return(0,ay.mG)(this,void 0,void 0,function(){var i,o,s,a,u,c;return(0,ay.Jh)(this,function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return(0,ay.mG)(this,void 0,void 0,function(){var i,o,s;return(0,ay.Jh)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,oD(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(XI(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,oD(t.localStore,e,!0)];case 1:return i=l.sent(),o=new RI(e,i.Bn),s=o._o(i.documents),a=bS.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),XI(t,n,u.To),c=new LI(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function jI(t,e){return(0,ay.mG)(this,void 0,void 0,function(){var n,r,i;return(0,ay.Jh)(this,function(o){switch(o.label){case 0:return n=Yw(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!gE(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,iD(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),QD(n.remoteStore,r.targetId),KI(n,r.targetId)}).catch(SA)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return KI(n,r.targetId),[4,iD(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function VI(t,e,n){return(0,ay.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,ay.Jh)(this,function(a){switch(a.label){case 0:r=gx(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Yw(t),i=Xw.now(),o=e.reduce(function(t,e){return t.add(e.key)},mS());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=GE(c,n.get(c.key));null!=l&&s.push(new YE(c.key,l,LC(l.value.mapValue),qE.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new iS(Qw)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,nx(r,i.changes)];case 3:return a.sent(),[4,uI(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=_I(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function GI(t,e){return(0,ay.mG)(this,void 0,void 0,function(){var n,r;return(0,ay.Jh)(this,function(i){switch(i.label){case 0:n=Yw(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,tD(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(Hw(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Hw(r.bo):t.removedDocuments.size>0&&(Hw(r.bo),r.bo=!1))}),[4,nx(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,SA(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function ZI(t,e,n){var r=Yw(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Yw(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&xI(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function zI(t,e,n){return(0,ay.mG)(this,void 0,void 0,function(){var r,i,o,s,a,u;return(0,ay.Jh)(this,function(c){switch(c.label){case 0:return(r=Yw(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new iS(bC.comparator)).insert(o,MC.newNoDocument(o,tC.min())),a=mS().add(o),u=new _S(tC.min(),new Map,new aS(Qw),s,a),[4,GI(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),ex(r),[3,4];case 2:return[4,iD(r.localStore,e,!1).then(function(){return KI(r,e,n)}).catch(SA)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function HI(t,e){return(0,ay.mG)(this,void 0,void 0,function(){var n,r,i;return(0,ay.Jh)(this,function(o){switch(o.label){case 0:n=Yw(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,JA(n.localStore,e)];case 2:return i=o.sent(),QI(n,r,null),$I(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,nx(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,SA(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function YI(t,e,n){return(0,ay.mG)(this,void 0,void 0,function(){var r,i;return(0,ay.Jh)(this,function(o){switch(o.label){case 0:r=Yw(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Yw(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return Hw(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),QI(r,e,n),$I(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,nx(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,SA(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function WI(t,e){return(0,ay.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,ay.Jh)(this,function(a){switch(a.label){case 0:eI((n=Yw(t)).remoteStore)||jw("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Yw(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=_I(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function $I(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function QI(t,e,n){var r=Yw(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function KI(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||JI(t,e)})}function JI(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(QD(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),ex(t))}function XI(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof PI?(t.No.addReference(o.key,e),tx(t,o)):o instanceof NI?(jw("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||JI(t,o.key)):zw()}}function tx(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(jw("SyncEngine","New document in limbo: "+n),t.So.add(r),ex(t))}function ex(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new bC(oC.fromString(e)),r=t.ko.next();t.Co.set(r,new MI(n)),t.Do=t.Do.insert(n,r),$D(t.remoteStore,new zT(fE(sE(n.path)),r,2,Lw.o))}}function nx(t,e,n){return(0,ay.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,ay.Jh)(this,function(a){switch(a.label){case 0:return r=Yw(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.Oo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=YA.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return(0,ay.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return(0,ay.Jh)(this,function(l){switch(l.label){case 0:n=Yw(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return OT.forEach(e,function(e){return OT.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return OT.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!LT(r=l.sent()))throw r;return jw("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function rx(t,e){return(0,ay.mG)(this,void 0,void 0,function(){var n,r;return(0,ay.Jh)(this,function(i){switch(i.label){case 0:return(n=Yw(t)).currentUser.isEqual(e)?[3,3]:(jw("SyncEngine","User change. New user:",e.toKey()),[4,KA(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new qw(Mw.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,nx(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function ix(t,e){var n=Yw(t),r=n.Co.get(e);if(r&&r.bo)return mS().add(r.key);var i=mS(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function ox(t,e){return(0,ay.mG)(this,void 0,void 0,function(){var n,r,i;return(0,ay.Jh)(this,function(o){switch(o.label){case 0:return[4,oD((n=Yw(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&XI(n,e.targetId,i.To),i)]}})})}function sx(t){return(0,ay.mG)(this,void 0,void 0,function(){var e;return(0,ay.Jh)(this,function(n){return[2,aD((e=Yw(t)).localStore).then(function(t){return nx(e,t)})]})})}function ax(t,e,n,r){return(0,ay.mG)(this,void 0,void 0,function(){var i,o;return(0,ay.Jh)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Yw(t),r=Yw(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):OT.resolve(null)})})}((i=Yw(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,uI(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(QI(i,e,r||null),$I(i,e),function(t,e){Yw(Yw(t)._n).Gt(e)}(i.localStore,e)):zw(),s.label=4;case 4:return[4,nx(i,o)];case 5:return s.sent(),[3,7];case 6:jw("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function ux(t,e){return(0,ay.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return(0,ay.Jh)(this,function(c){switch(c.label){case 0:return px(n=Yw(t)),gx(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,cx(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,gI(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)$D(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return KI(n,e),iD(n.localStore,e,!0)}),QD(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,cx(n,a)];case 5:return c.sent(),function(t){var e=Yw(t);e.Co.forEach(function(t,n){QD(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new iS(bC.comparator)}(n),n.$o=!1,[4,gI(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function cx(t,e,n){return(0,ay.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,d,f,p;return(0,ay.Jh)(this,function(g){switch(g.label){case 0:n=Yw(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,rD(n.localStore,fE(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(d=n.Po.get(h[l]),[4,ox(n,d)]):[3,6];case 4:(f=g.sent()).snapshot&&i.push(f.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,sD(n.localStore,a)];case 8:return p=g.sent(),[4,rD(n.localStore,p)];case 9:return u=g.sent(),[4,BI(n,lx(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function lx(t){return oE(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function hx(t){var e=Yw(t);return Yw(Yw(e.localStore).persistence).fn()}function dx(t,e,n,r){return(0,ay.mG)(this,void 0,void 0,function(){var i,o,s;return(0,ay.Jh)(this,function(a){switch(a.label){case 0:return(i=Yw(t)).$o?(jw("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,aD(i.localStore)];case 3:return o=a.sent(),s=_S.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,nx(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,iD(i.localStore,e,!0)];case 6:return a.sent(),KI(i,e,r),[3,8];case 7:zw(),a.label=8;case 8:return[2]}})})}function fx(t,e,n){return(0,ay.mG)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return(0,ay.Jh)(this,function(d){switch(d.label){case 0:if(!(r=px(t)).$o)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(jw("SyncEngine","Adding an already active target "+s),[3,5]):[4,sD(r.localStore,s)]:[3,6];case 2:return a=d.sent(),[4,rD(r.localStore,a)];case 3:return u=d.sent(),[4,BI(r,lx(a),u.targetId,!1)];case 4:d.sent(),$D(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return(0,ay.Jh)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,iD(r.localStore,t,!1).then(function(){QD(r.remoteStore,t),KI(r,t)}).catch(SA)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,d.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function px(t){var e=Yw(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=GI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ix.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zI.bind(null,e),e.vo._r=DI.bind(null,e.eventManager),e.vo.Mo=II.bind(null,e.eventManager),e}function gx(t){var e=Yw(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YI.bind(null,e),e}var mx=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,ay.mG)(this,void 0,void 0,function(){return(0,ay.Jh)(this,function(e){switch(e.label){case 0:return this.R=UD(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return QA(this.persistence,new WA,t.initialUser,this.R)},t.prototype.qo=function(t){return new vD(bD.bs,this.R)},t.prototype.Bo=function(t){return new OD},t.prototype.terminate=function(){return(0,ay.mG)(this,void 0,void 0,function(){return(0,ay.Jh)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),yx=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,ay.ZT)(e,t),e.prototype.initialize=function(e){return(0,ay.mG)(this,void 0,void 0,function(){return(0,ay.Jh)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,uD(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,gx(this.Qo.syncEngine)];case 4:return n.sent(),[4,uI(this.Qo.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Ko=function(t){return QA(this.persistence,new WA,t.initialUser,this.R)},e.prototype.Uo=function(t){return new DA(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=ZA(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?hA.withCacheSize(this.cacheSizeBytes):hA.DEFAULT;return new jA(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,MD(),qD(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new OD},e}(mx),vx=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,ay.ZT)(e,t),e.prototype.initialize=function(e){return(0,ay.mG)(this,void 0,void 0,function(){var n,r=this;return(0,ay.Jh)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof kD?(this.sharedClientState.syncEngine={ui:ax.bind(null,n),ai:dx.bind(null,n),hi:fx.bind(null,n),fn:hx.bind(null,n),ci:sx.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return(0,ay.mG)(r,void 0,void 0,function(){return(0,ay.Jh)(this,function(e){switch(e.label){case 0:return[4,ux(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=MD();if(!kD.yt(e))throw new qw(Mw.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=ZA(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new kD(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(yx),_x=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,ay.mG)(this,void 0,void 0,function(){var n=this;return(0,ay.Jh)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return ZI(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=rx.bind(null,this.syncEngine),[4,gI(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new SI},t.prototype.createDatastore=function(t){var e=UD(t.databaseInfo.databaseId),n=new LD(t.databaseInfo);return function(t,e,n){return new ZD(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return ZI(s.syncEngine,t,0)},o=PD.yt()?new PD:new FD,new HD(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new qI(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,ay.mG)(this,void 0,void 0,function(){var e;return(0,ay.Jh)(this,function(n){switch(n.label){case 0:return e=Yw(t),jw("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,WD(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),bx=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),wx=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new kT,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,ay.mG)(this,void 0,void 0,function(){return(0,ay.Jh)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return(0,ay.mG)(this,void 0,void 0,function(){return(0,ay.Jh)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return(0,ay.mG)(this,void 0,void 0,function(){var t,e,n,r;return(0,ay.Jh)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new OI(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return(0,ay.mG)(this,void 0,void 0,function(){var t,e;return(0,ay.Jh)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return(0,ay.mG)(this,void 0,void 0,function(){var e;return(0,ay.Jh)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,ay.mG)(this,void 0,void 0,function(){var t,e;return(0,ay.Jh)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,ay.mG)(this,void 0,void 0,function(){var e,n=this;return(0,ay.Jh)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new qw(Mw.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,ay.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a;return(0,ay.Jh)(this,function(u){switch(u.label){case 0:return n=Yw(t),r=jS(n.R)+"/documents",i={documents:e.map(function(t){return MS(n.R,t)})},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Hw(!!e.found);var n=qS(t,e.found.name),r=NS(e.found.updateTime),i=new RC({mapValue:{fields:e.found.fields}});return MC.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Hw(!!e.missing),Hw(!!e.readTime);var n=qS(t,e.missing),r=NS(e.readTime);return MC.newNoDocument(n,r)}(t,e):zw()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Hw(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new XE(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,ay.mG)(this,void 0,void 0,function(){var t,e=this;return(0,ay.Jh)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=bC.fromPath(n);e.mutations.push(new tS(r,e.precondition(r)))}),[4,function(t,e){return(0,ay.mG)(this,void 0,void 0,function(){var n,r,i;return(0,ay.Jh)(this,function(o){switch(o.label){case 0:return n=Yw(t),r=jS(n.R)+"/documents",i={writes:e.map(function(t){return zS(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw zw();e=tC.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new qw(Mw.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?qE.updateTime(e):qE.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(tC.min()))throw new qw(Mw.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qE.updateTime(e)}return qE.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Cx=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new BD(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,ay.mG)(t,void 0,void 0,function(){var t,e,n=this;return(0,ay.Jh)(this,function(r){return t=new wx(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!yC(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!nS(e)}return!1},t}(),Ex=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=wD.UNAUTHENTICATED,this.clientId=$w.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(t){return(0,ay.mG)(r,void 0,void 0,function(){return(0,ay.Jh)(this,function(e){switch(e.label){case 0:return jw("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}})})})}return t.prototype.getConfiguration=function(){return(0,ay.mG)(this,void 0,void 0,function(){return(0,ay.Jh)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new qw(Mw.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new kT;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,ay.mG)(t,void 0,void 0,function(){var t,n;return(0,ay.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=_I(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Sx(t,e){return(0,ay.mG)(this,void 0,void 0,function(){var n,r,i=this;return(0,ay.Jh)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),jw("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(t){return(0,ay.mG)(i,void 0,void 0,function(){return(0,ay.Jh)(this,function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,KA(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Tx(t,e){return(0,ay.mG)(this,void 0,void 0,function(){var n,r;return(0,ay.Jh)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Ax(t)];case 1:return n=i.sent(),jw("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(t){return function(t,e){return(0,ay.mG)(this,void 0,void 0,function(){var n,r;return(0,ay.Jh)(this,function(i){switch(i.label){case 0:return(n=Yw(t)).asyncQueue.verifyOperationInProgress(),jw("RemoteStore","RemoteStore received new credentials"),r=eI(n),n.Or.add(3),[4,WD(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,YD(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,t)}),t.onlineComponents=e,[2]}})})}function Ax(t){return(0,ay.mG)(this,void 0,void 0,function(){return(0,ay.Jh)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(jw("FirestoreClient","Using default OfflineComponentProvider"),[4,Sx(t,new mx)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Dx(t){return(0,ay.mG)(this,void 0,void 0,function(){return(0,ay.Jh)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(jw("FirestoreClient","Using default OnlineComponentProvider"),[4,Tx(t,new _x)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function Ix(t){return Ax(t).then(function(t){return t.persistence})}function xx(t){return Ax(t).then(function(t){return t.localStore})}function kx(t){return Dx(t).then(function(t){return t.remoteStore})}function Ox(t){return Dx(t).then(function(t){return t.syncEngine})}function Fx(t){return(0,ay.mG)(this,void 0,void 0,function(){var e,n;return(0,ay.Jh)(this,function(r){switch(r.label){case 0:return[4,Dx(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=UI.bind(null,e.syncEngine),n.onUnlisten=jI.bind(null,e.syncEngine),n)]}})})}function Px(t,e,n){var r=this;void 0===n&&(n={});var i=new kT;return t.asyncQueue.enqueueAndForget(function(){return(0,ay.mG)(r,void 0,void 0,function(){var r;return(0,ay.Jh)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new bx({next:function(o){e.enqueueAndForget(function(){return AI(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new qw(Mw.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new qw(Mw.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new kI(sE(n.path),o,{includeMetadataChanges:!0,so:!0});return TI(t,s)},[4,Fx(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Nx(t,e,n){var r=this;void 0===n&&(n={});var i=new kT;return t.asyncQueue.enqueueAndForget(function(){return(0,ay.mG)(r,void 0,void 0,function(){var r;return(0,ay.Jh)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new bx({next:function(n){e.enqueueAndForget(function(){return AI(t,s)}),n.fromCache&&"server"===r.source?i.reject(new qw(Mw.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new kI(n,o,{includeMetadataChanges:!0,so:!0});return TI(t,s)},[4,Fx(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Rx=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},Lx=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Mx=new Map,qx=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Ux=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(wD.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Bx=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable(function(){return e(n.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),jx=function(){function t(t){var e=this;this.currentUser=wD.UNAUTHENTICATED,this.oc=new kT,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var n=function(t){jw("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit(function(t){return n(t)}),setTimeout(function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(jw("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}},0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(jw("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Hw("string"==typeof n.accessToken),new qx(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return(0,ay.mG)(n,void 0,void 0,function(){return(0,ay.Jh)(this,function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Hw(null===t||"string"==typeof t),new wD(t)},t}(),Vx=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=wD.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),Gx=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new Vx(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(wD.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Zx(t,e,n){if(!n)throw new qw(Mw.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function zx(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new qw(Mw.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Hx(t,e,n,r){if(!0===e&&!0===r)throw new qw(Mw.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Yx(t){if(!bC.isDocumentKey(t))throw new qw(Mw.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Wx(t){if(bC.isDocumentKey(t))throw new qw(Mw.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function $x(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":zw()}function Qx(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new qw(Mw.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=$x(t);throw new qw(Mw.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Kx(t,e){if(e<=0)throw new qw(Mw.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Jx=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new qw(Mw.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new qw(Mw.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Hx("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Xx=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jx({}),this._settingsFrozen=!1,t instanceof Lx?(this._databaseId=t,this._credentials=new Ux):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new qw(Mw.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lx(t.options.projectId)}(t),this._credentials=new jx(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new qw(Mw.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new qw(Mw.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jx(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Ux;switch(t.type){case"gapi":var e=t.client;return Hw(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Gx(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new qw(Mw.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Mx.get(this))&&(jw("ComponentProvider","Removing Datastore"),Mx.delete(this),t.terminate()),Promise.resolve();var t},t}(),tk=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new nk(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),ek=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),nk=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,sE(r))||this)._path=r,i.type="collection",i}return(0,ay.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new tk(this.firestore,null,new bC(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(ek);function rk(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,Dy.m9)(t),Zx("collection","path",e),t instanceof Xx)return Wx(n=oC.fromString.apply(oC,(0,ay.ev)([e],r))),new nk(t,null,n);if(!(t instanceof tk||t instanceof nk))throw new qw(Mw.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Wx(n=oC.fromString.apply(oC,(0,ay.ev)([t.path],r)).child(oC.fromString(e))),new nk(t.firestore,null,n)}function ik(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,Dy.m9)(t),1===arguments.length&&(e=$w.u()),Zx("doc","path",e),t instanceof Xx)return Yx(n=oC.fromString.apply(oC,(0,ay.ev)([e],r))),new tk(t,null,new bC(n));if(!(t instanceof tk||t instanceof nk))throw new qw(Mw.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Yx(n=t._path.child(oC.fromString.apply(oC,(0,ay.ev)([e],r)))),new tk(t.firestore,t instanceof nk?t.converter:null,new bC(n))}function ok(t,e){return t=(0,Dy.m9)(t),e=(0,Dy.m9)(e),(t instanceof tk||t instanceof nk)&&(e instanceof tk||e instanceof nk)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function sk(t,e){return t=(0,Dy.m9)(t),e=(0,Dy.m9)(e),t instanceof ek&&e instanceof ek&&t.firestore===e.firestore&&gE(t._query,e._query)&&t.converter===e.converter}var ak=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=[],this.Zi=new BD(this,"async_queue_retry"),this.Tc=function(){var e=qD();e&&jw("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=qD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Tc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ic(),this.Ac(t)},t.prototype.enterRestrictedMode=function(){if(!this._c){this._c=!0;var t=qD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Tc)}},t.prototype.enqueue=function(t){return this.Ic(),this._c?new Promise(function(t){}):this.Ac(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.wc.push(t),e.Rc()})},t.prototype.Rc=function(){return(0,ay.mG)(this,void 0,void 0,function(){var t,e=this;return(0,ay.Jh)(this,function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!LT(t=n.sent()))throw t;return jw("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return e.Rc()}),n.label=5;case 5:return[2]}})})},t.prototype.Ac=function(t){var e=this,n=this.dc.then(function(){return e.gc=!0,t().catch(function(t){throw e.yc=t,e.gc=!1,Vw("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.gc=!1,t})});return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ic(),this.Ec.indexOf(t)>-1&&(e=0);var i=vI.createAndSchedule(this,t,e,n,function(t){return r.bc(t)});return this.mc.push(i),i},t.prototype.Ic=function(){this.yc&&zw()},t.prototype.verifyOperationInProgress=function(){},t.prototype.vc=function(){return(0,ay.mG)(this,void 0,void 0,function(){var t;return(0,ay.Jh)(this,function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Pc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Vc=function(t){var e=this;return this.vc().then(function(){e.mc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.vc()})},t.prototype.Sc=function(t){this.Ec.push(t)},t.prototype.bc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function uk(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new kT,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var ck=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new ak,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,ay.ZT)(e,t),e.prototype._terminate=function(){return this._firestoreClient||hk(this),this._firestoreClient.terminate()},e}(Xx);function lk(t){return t._firestoreClient||hk(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function hk(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Rx(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Ex(t._credentials,t._queue,r)}function dk(t,e,n){var r=this,i=new kT;return t.asyncQueue.enqueue(function(){return(0,ay.mG)(r,void 0,void 0,function(){var r;return(0,ay.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Sx(t,n)];case 1:return o.sent(),[4,Tx(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Mw.FAILED_PRECONDITION||t.code===Mw.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function fk(t){if(t._initialized||t._terminated)throw new qw(Mw.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var pk=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new qw(Mw.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new aC(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),gk=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(cC.fromBase64String(e))}catch(e){throw new qw(Mw.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(cC.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),mk=function(t){this._methodName=t},yk=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new qw(Mw.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new qw(Mw.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Qw(this._lat,t._lat)||Qw(this._long,t._long)},t}(),vk=/^__.*__$/,_k=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new YE(t,this.data,this.fieldMask,e,this.fieldTransforms):new HE(t,this.data,e,this.fieldTransforms)},t}(),bk=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new YE(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function wk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zw()}}var Ck=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Dc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Cc",{get:function(){return this.settings.Cc},enumerable:!1,configurable:!0}),t.prototype.Nc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.xc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.kc(t),r},t.prototype.$c=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.Dc(),r},t.prototype.Oc=function(t){return this.Nc({path:void 0,Fc:!0})},t.prototype.Mc=function(t){return Vk(t,this.settings.methodName,this.settings.Lc||!1,this.path,this.settings.Bc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Dc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.kc(this.path.get(t))},t.prototype.kc=function(t){if(0===t.length)throw this.Mc("Document fields must not be empty");if(wk(this.Cc)&&vk.test(t))throw this.Mc('Document fields cannot begin and end with "__"')},t}(),Ek=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||UD(t)}return t.prototype.qc=function(t,e,n,r){return void 0===r&&(r=!1),new Ck({Cc:t,methodName:e,Bc:n,path:aC.emptyPath(),Fc:!1,Lc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Sk(t){var e=t._freezeSettings(),n=UD(t._databaseId);return new Ek(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Tk(t,e,n,r,i,o){void 0===o&&(o={});var s=t.qc(o.merge||o.mergeFields?2:0,e,n,i);qk("Data must be an object, but it was:",s,r);var a,u,c=Lk(r,s);if(o.merge)a=new uC(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var f=Uk(e,d[h],n);if(!s.contains(f))throw new qw(Mw.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");Gk(l,f)||l.push(f)}a=new uC(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new _k(new RC(c),a,u)}var Ak=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,ay.ZT)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Cc)throw t.Mc(1===t.Cc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(mk);function Dk(t,e,n){return new Ck({Cc:3,Bc:e.settings.Bc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Ik=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,ay.ZT)(e,t),e.prototype._toFieldTransform=function(t){return new LE(t.path,new IE)},e.prototype.isEqual=function(t){return t instanceof e},e}(mk),xk=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return(0,ay.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=Dk(this,t,!0),n=this.Uc.map(function(t){return Rk(t,e)}),r=new xE(n);return new LE(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(mk),kk=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return(0,ay.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=Dk(this,t,!0),n=this.Uc.map(function(t){return Rk(t,e)}),r=new OE(n);return new LE(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(mk),Ok=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,ay.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=new PE(t.R,EE(t.R,this.Kc));return new LE(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(mk);function Fk(t,e,n,r){var i=t.qc(1,e,n);qk("Data must be an object, but it was:",i,r);var o=[],s=RC.empty();nC(r,function(t,r){var a=jk(e,t,n);r=(0,Dy.m9)(r);var u=i.$c(a);if(r instanceof Ak)o.push(a);else{var c=Rk(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new uC(o);return new bk(s,a,i.fieldTransforms)}function Pk(t,e,n,r,i,o){var s=t.qc(1,e,n),a=[Uk(e,r,n)],u=[i];if(o.length%2!=0)throw new qw(Mw.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Uk(e,o[c])),u.push(o[c+1]);for(var l=[],h=RC.empty(),d=a.length-1;d>=0;--d)if(!Gk(l,a[d])){var f=a[d],p=u[d];p=(0,Dy.m9)(p);var g=s.$c(f);if(p instanceof Ak)l.push(f);else{var m=Rk(p,g);null!=m&&(l.push(f),h.set(f,m))}}var y=new uC(l);return new bk(h,y,s.fieldTransforms)}function Nk(t,e,n,r){return void 0===r&&(r=!1),Rk(n,t.qc(r?4:3,e))}function Rk(t,e){if(Mk(t=(0,Dy.m9)(t)))return qk("Unsupported field value:",e,t),Lk(t,e);if(t instanceof mk)return function(t,e){if(!wk(e.Cc))throw e.Mc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Mc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Cc)throw e.Mc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Rk(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,Dy.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return EE(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Xw.fromDate(t);return{timestampValue:OS(e.R,n)}}if(t instanceof Xw)return n=new Xw(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:OS(e.R,n)};if(t instanceof yk)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof gk)return{bytesValue:FS(e.R,t._byteString)};if(t instanceof tk){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Mc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:RS(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Mc("Unsupported field value: "+$x(t))}(t,e)}function Lk(t,e){var n={};return rC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):nC(t,function(t,r){var i=Rk(r,e.xc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Mk(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Xw||t instanceof yk||t instanceof gk||t instanceof tk||t instanceof mk)}function qk(t,e,n){if(!Mk(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=$x(n);throw e.Mc("an object"===r?t+" a custom object":t+" "+r)}}function Uk(t,e,n){if((e=(0,Dy.m9)(e))instanceof pk)return e._internalPath;if("string"==typeof e)return jk(t,e);throw Vk("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Bk=new RegExp("[~\\*/\\[\\]]");function jk(t,e,n){if(e.search(Bk)>=0)throw Vk("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(pk.bind.apply(pk,(0,ay.ev)([void 0],e.split(".")))))._internalPath}catch(VO){throw Vk("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Vk(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new qw(Mw.INVALID_ARGUMENT,(a+=". ")+t+u)}function Gk(t,e){return t.some(function(t){return t.isEqual(e)})}var Zk=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new tk(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new zk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Hk("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),zk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,ay.ZT)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Zk);function Hk(t,e){return"string"==typeof e?jk(t,e):e instanceof pk?e._internalPath:e._delegate._internalPath}var Yk=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Wk=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return(0,ay.ZT)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new $k(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Hk("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Zk),$k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,ay.ZT)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Wk),Qk=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Yk(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new $k(n._firestore,n._userDataWriter,r.key,r,new Yk(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new qw(Mw.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new $k(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Yk(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new $k(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Yk(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Kk(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Kk(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zw()}}function Jk(t,e){return t instanceof Wk&&e instanceof Wk?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Qk&&e instanceof Qk&&t._firestore===e._firestore&&sk(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Xk(t){if(uE(t)&&0===t.explicitOrderBy.length)throw new qw(Mw.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var tO=function(){};function eO(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var nO=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.jc=n,i.Wc=r,i.type="where",i}return(0,ay.ZT)(e,t),e.prototype._apply=function(t){var e=Sk(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new qw(Mw.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){cO(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(uO(r,t,l[c]));a={arrayValue:{values:u}}}else a=uO(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||cO(s,o),a=Nk(n,"where",s,"in"===o||"not-in"===o);var h=GC.create(i,o,a);return function(t,e){if(e.g()){var n=lE(t);if(null!==n&&!n.isEqual(e.field))throw new qw(Mw.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=cE(t);null!==r&&lO(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new qw(Mw.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Qc,this.jc,this.Wc);return new ek(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new iE(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(tO),rO=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Gc=n,r.type="orderBy",r}return(0,ay.ZT)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new qw(Mw.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new qw(Mw.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new tE(e,n);return function(t,e){if(null===cE(t)){var n=lE(t);null!==n&&lO(0,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Gc);return new ek(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new iE(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(tO),iO=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return(0,ay.ZT)(e,t),e.prototype._apply=function(t){return new ek(t.firestore,t.converter,pE(t._query,this.zc,this.Hc))},e}(tO),oO=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return(0,ay.ZT)(e,t),e.prototype._apply=function(t){var e=aO(t,this.type,this.Jc,this.Yc);return new ek(t.firestore,t.converter,function(t,e){return new iE(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(tO),sO=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return(0,ay.ZT)(e,t),e.prototype._apply=function(t){var e=aO(t,this.type,this.Jc,this.Yc);return new ek(t.firestore,t.converter,function(t,e){return new iE(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(tO);function aO(t,e,n,r){if(n[0]=(0,Dy.m9)(n[0]),n[0]instanceof Zk)return function(t,e,n,r,i){if(!r)throw new qw(Mw.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=dE(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(IC(e,r.key));else{var c=r.data.field(u.field);if(pC(c))throw new qw(Mw.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new qw(Mw.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new JC(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Sk(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new qw(Mw.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new qw(Mw.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!hE(t)&&-1!==c.indexOf("/"))throw new qw(Mw.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(oC.fromString(c));if(!bC.isDocumentKey(l))throw new qw(Mw.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new bC(l);a.push(IC(e,h))}else{var d=Nk(n,r,c);a.push(d)}}return new JC(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function uO(t,e,n){if("string"==typeof(n=(0,Dy.m9)(n))){if(""===n)throw new qw(Mw.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!hE(e)&&-1!==n.indexOf("/"))throw new qw(Mw.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(oC.fromString(n));if(!bC.isDocumentKey(r))throw new qw(Mw.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return IC(t,new bC(r))}if(n instanceof tk)return IC(t,n._key);throw new qw(Mw.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+$x(n)+".")}function cO(t,e){if(!Array.isArray(t)||0===t.length)throw new qw(Mw.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new qw(Mw.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function lO(t,e,n){if(!n.isEqual(e))throw new qw(Mw.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var hO=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),wC(t)){case 0:return null;case 1:return t.booleanValue;case 2:return dC(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(fC(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw zw()}},t.prototype.convertObject=function(t,e){var n=this,r={};return nC(t.fields,function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new yk(dC(t.latitude),dC(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=gC(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(mC(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=hC(t);return new Xw(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=oC.fromString(t);Hw(sT(n));var r=new Lx(n.get(1),n.get(3)),i=new bC(n.popFirst(5));return r.isEqual(e)||Vw("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function dO(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var fO=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,ay.ZT)(e,t),e.prototype.convertBytes=function(t){return new gk(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new tk(this.firestore,null,e)},e}(hO),pO=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Sk(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=gO(t,this._firestore),i=dO(r.converter,e,n),o=Tk(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,qE.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=gO(t,this._firestore);return o="string"==typeof(e=(0,Dy.m9)(e))||e instanceof pk?Pk(this._dataReader,"WriteBatch.update",s._key,e,n,r):Fk(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,qE.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=gO(t,this._firestore);return this._mutations=this._mutations.concat(new XE(e._key,qE.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new qw(Mw.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function gO(t,e){if((t=(0,Dy.m9)(t)).firestore!==e)throw new qw(Mw.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var mO=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,ay.ZT)(e,t),e.prototype.convertBytes=function(t){return new gk(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new tk(this.firestore,null,e)},e}(hO);function yO(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Qx(t,tk);var o=Qx(t.firestore,ck),s=Sk(o);return _O(o,[("string"==typeof(e=(0,Dy.m9)(e))||e instanceof pk?Pk(s,"updateDoc",t._key,e,n,r):Fk(s,"updateDoc",t._key,e)).toMutation(t._key,qE.exists(!0))])}function vO(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=(0,Dy.m9)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||uk(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(uk(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof tk)c=Qx(t.firestore,ck),l=sE(t._key.path),u={next:function(e){i[a]&&i[a](bO(c,t,e))},error:i[a+1],complete:i[a+2]};else{var f=Qx(t,ek);c=Qx(f.firestore,ck),l=f._query;var p=new mO(c);u={next:function(t){i[a]&&i[a](new Qk(c,p,f,t))},error:i[a+1],complete:i[a+2]},Xk(t._query)}return function(t,e,n,r){var i=this,o=new bx(r),s=new kI(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return(0,ay.mG)(i,void 0,void 0,function(){var e;return(0,ay.Jh)(this,function(n){switch(n.label){case 0:return e=TI,[4,Fx(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,ay.mG)(i,void 0,void 0,function(){var e;return(0,ay.Jh)(this,function(n){switch(n.label){case 0:return e=AI,[4,Fx(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(lk(c),l,h,u)}function _O(t,e){return function(t,e){var n=this,r=new kT;return t.asyncQueue.enqueueAndForget(function(){return(0,ay.mG)(n,void 0,void 0,function(){var n;return(0,ay.Jh)(this,function(i){switch(i.label){case 0:return n=VI,[4,Ox(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(lk(t),e)}function bO(t,e,n){var r=n.docs.get(e._key),i=new mO(t);return new Wk(t,i,e._key,r,new Yk(n.hasPendingWrites,n.fromCache),e.converter)}var wO=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,ay.ZT)(e,t),e.prototype.get=function(e){var n=this,r=gO(e,this._firestore),i=new mO(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Wk(n._firestore,i,r._key,t._document,new Yk(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Sk(t)}return t.prototype.get=function(t){var e=this,n=gO(t,this._firestore),r=new fO(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return zw();var i=t[0];if(i.isFoundDocument())return new Zk(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Zk(e._firestore,r,n._key,null,n.converter);throw zw()})},t.prototype.set=function(t,e,n){var r=gO(t,this._firestore),i=dO(r.converter,e,n),o=Tk(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=gO(t,this._firestore);return o="string"==typeof(e=(0,Dy.m9)(e))||e instanceof pk?Pk(this._dataReader,"Transaction.update",s._key,e,n,r):Fk(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=gO(t,this._firestore);return this._transaction.delete(e._key),this},t}());function CO(){if("undefined"==typeof Uint8Array)throw new qw(Mw.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function EO(){if("undefined"==typeof atob)throw new qw(Mw.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var SO=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return EO(),new t(gk.fromBase64String(e))},t.fromUint8Array=function(e){return CO(),new t(gk.fromUint8Array(e))},t.prototype.toBase64=function(){return EO(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return CO(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),TO=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){fk(t=Qx(t,ck));var n=lk(t),r=t._freezeSettings(),i=new _x;return dk(n,i,new yx(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){fk(t=Qx(t,ck));var e=lk(t),n=t._freezeSettings(),r=new _x;return dk(e,r,new vx(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new qw(Mw.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new kT;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,ay.mG)(e,void 0,void 0,function(){var e;return(0,ay.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,ay.mG)(this,void 0,void 0,function(){return(0,ay.Jh)(this,function(e){switch(e.label){case 0:return PT.yt()?[4,PT.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(ZA(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),AO=function(){function t(t,e,n){var r=this;this._delegate=e,this.Xc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Lx||(this.Zc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Gw("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=Qx(t,Xx))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Gw("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=(0,Dy.Sg)(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new qw(Mw.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new Bx(new qx(o,new wD(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,ay.mG)(e,void 0,void 0,function(){var e,n;return(0,ay.Jh)(this,function(r){switch(r.label){case 0:return[4,Ix(t)];case 1:return e=r.sent(),[4,kx(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Yw(t);return e.Or.delete(0),YD(e)}(n))]}})})})}(lk(Qx(this._delegate,ck)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,ay.mG)(e,void 0,void 0,function(){var e,n;return(0,ay.Jh)(this,function(r){switch(r.label){case 0:return[4,Ix(t)];case 1:return e=r.sent(),[4,kx(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,ay.mG)(this,void 0,void 0,function(){var e;return(0,ay.Jh)(this,function(n){switch(n.label){case 0:return(e=Yw(t)).Or.add(0),[4,WD(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(lk(Qx(this._delegate,ck)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Hx("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Xc.enableMultiTabIndexedDbPersistence(this):this.Xc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Xc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Zc&&(this.Zc._removeServiceInstance("firestore"),this.Zc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new kT;return t.asyncQueue.enqueueAndForget(function(){return(0,ay.mG)(e,void 0,void 0,function(){var e;return(0,ay.Jh)(this,function(r){switch(r.label){case 0:return e=WI,[4,Ox(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(lk(Qx(this._delegate,ck)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new bx(e);return t.asyncQueue.enqueueAndForget(function(){return(0,ay.mG)(n,void 0,void 0,function(){var e;return(0,ay.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){Yw(t).Gr.add(e),e.next()},[4,Fx(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,ay.mG)(n,void 0,void 0,function(){var e;return(0,ay.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){Yw(t).Gr.delete(e)},[4,Fx(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(lk(t=Qx(t,ck)),uk(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Zc)throw new qw(Mw.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Zc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new BO(this,rk(this._delegate,t))}catch(t){throw FO(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new OO(this,ik(this._delegate,t))}catch(t){throw FO(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new MO(this,function(t,e){if(t=Qx(t,Xx),Zx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new qw(Mw.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new ek(t,null,function(t){return new iE(oC.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw FO(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new kT;return t.asyncQueue.enqueueAndForget(function(){return(0,ay.mG)(n,void 0,void 0,function(){var n;return(0,ay.Jh)(this,function(i){switch(i.label){case 0:return[4,function(t){return Dx(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new Cx(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(lk(t),function(n){return e(new wO(t,n))})}(this._delegate,function(n){return t(new IO(e,n))})},t.prototype.batch=function(){var t=this;return lk(this._delegate),new xO(new pO(this._delegate,function(e){return _O(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new qw(Mw.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new qw(Mw.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),DO=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,ay.ZT)(e,t),e.prototype.convertBytes=function(t){return new SO(new gk(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return OO.tu(e,this.firestore,null)},e}(hO),IO=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new DO(t)}return t.prototype.get=function(t){var e=this,n=jO(t);return this._delegate.get(n).then(function(t){return new RO(e._firestore,new Wk(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=jO(t);return n?(zx("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=jO(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,ay.ev)([s,e,n],i)),this},t.prototype.delete=function(t){var e=jO(t);return this._delegate.delete(e),this},t}(),xO=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=jO(t);return n?(zx("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=jO(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,ay.ev)([s,e,n],i)),this},t.prototype.delete=function(t){var e=jO(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),kO=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new $k(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new LO(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.eu=function(e,n){var r=t.nu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new DO(e),n),i.set(n,o)),o},t}();kO.nu=new WeakMap;var OO=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new DO(t)}return t.su=function(e,n,r){if(e.length%2!=0)throw new qw(Mw.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new tk(n._delegate,r,new bC(e)))},t.tu=function(e,n,r){return new t(n,new tk(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new BO(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new BO(this.firestore,rk(this._delegate,t))}catch(t){throw FO(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,Dy.m9)(t))instanceof tk&&ok(this._delegate,t)},t.prototype.set=function(t,e){e=zx("DocumentReference.set",e);try{return function(t,e,n){t=Qx(t,tk);var r=Qx(t.firestore,ck),i=dO(t.converter,e,n);return _O(r,[Tk(Sk(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,qE.none())])}(this._delegate,t,e)}catch(t){throw FO(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?yO(this._delegate,t):yO.apply(void 0,(0,ay.ev)([this._delegate,t,e],n))}catch(t){throw FO(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return _O(Qx((t=this._delegate).firestore,ck),[new XE(t._key,qE.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=PO(e),i=NO(e,function(e){return new RO(t.firestore,new Wk(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return vO(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Qx(t,tk);var e=Qx(t.firestore,ck),n=lk(e),r=new mO(e);return function(t,e){var n=this,r=new kT;return t.asyncQueue.enqueueAndForget(function(){return(0,ay.mG)(n,void 0,void 0,function(){var n;return(0,ay.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,ay.mG)(this,void 0,void 0,function(){var r,i;return(0,ay.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Yw(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new qw(Mw.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=_I(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,xx(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Wk(e,r,t._key,n,new Yk(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Qx(t,tk);var e=Qx(t.firestore,ck);return Px(lk(e),t._key,{source:"server"}).then(function(n){return bO(e,t,n)})}(this._delegate):function(t){t=Qx(t,tk);var e=Qx(t.firestore,ck);return Px(lk(e),t._key).then(function(n){return bO(e,t,n)})}(this._delegate)).then(function(t){return new RO(e.firestore,new Wk(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?kO.eu(this.firestore,e):null))},t}();function FO(t,e,n){return t.message=t.message.replace(e,n),t}function PO(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!uk(r))return r}return{}}function NO(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=uk(t[0])?t[0]:uk(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var RO=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new OO(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Jk(this._delegate,t._delegate)},t}(),LO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,ay.ZT)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(RO),MO=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new DO(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,eO(this._delegate,function(t,e,n){var r=e,i=Hk("where",t);return new nO(i,r,n)}(e,n,r)))}catch(e){throw FO(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,eO(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Hk("orderBy",t);return new rO(r,n)}(e,n)))}catch(e){throw FO(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,eO(this._delegate,function(t){return Kx("limit",t),new iO("limit",t,"F")}(e)))}catch(e){throw FO(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,eO(this._delegate,function(t){return Kx("limitToLast",t),new iO("limitToLast",t,"L")}(e)))}catch(e){throw FO(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,eO(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new oO("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw FO(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,eO(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new oO("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw FO(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,eO(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new sO("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw FO(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,eO(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new sO("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw FO(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return sk(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Qx(t,ek);var e=Qx(t.firestore,ck),n=lk(e),r=new mO(e);return function(t,e){var n=this,r=new kT;return t.asyncQueue.enqueueAndForget(function(){return(0,ay.mG)(n,void 0,void 0,function(){var n;return(0,ay.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,ay.mG)(this,void 0,void 0,function(){var r,i,o,s,a;return(0,ay.Jh)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,oD(t,e,!0)];case 1:return a=u.sent(),r=new RI(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=_I(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,xx(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new Qk(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Qx(t,ek);var e=Qx(t.firestore,ck),n=lk(e),r=new mO(e);return Nx(n,t._query,{source:"server"}).then(function(n){return new Qk(e,r,t,n)})}(this._delegate):function(t){t=Qx(t,ek);var e=Qx(t.firestore,ck),n=lk(e),r=new mO(e);return Xk(t._query),Nx(n,t._query).then(function(n){return new Qk(e,r,t,n)})}(this._delegate)).then(function(t){return new UO(e.firestore,new Qk(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=PO(e),i=NO(e,function(e){return new UO(t.firestore,new Qk(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return vO(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?kO.eu(this.firestore,e):null))},t}(),qO=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new LO(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),UO=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new MO(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new LO(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new qO(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new LO(n._firestore,r))})},t.prototype.isEqual=function(t){return Jk(this._delegate,t._delegate)},t}(),BO=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,ay.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new OO(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new OO(this.firestore,void 0===t?ik(this._delegate):ik(this._delegate,t))}catch(t){throw FO(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Qx(t.firestore,ck),r=ik(t),i=dO(t.converter,e);return _O(n,[Tk(Sk(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,qE.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new OO(e.firestore,t)})},e.prototype.isEqual=function(t){return ok(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?kO.eu(this.firestore,t):null))},e}(MO);function jO(t){return Qx(t,tk)}var VO,GO=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(pk.bind.apply(pk,(0,ay.ev)([void 0],t)))}return t.documentId=function(){return new t(aC.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,Dy.m9)(t))instanceof pk&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),ZO=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Ik("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Ak("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new xk("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new kk("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Ok("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),zO=n(5119),HO={Firestore:AO,GeoPoint:yk,Timestamp:Xw,Blob:SO,Transaction:IO,WriteBatch:xO,DocumentReference:OO,DocumentSnapshot:RO,Query:MO,QueryDocumentSnapshot:LO,QuerySnapshot:UO,CollectionReference:BO,FieldPath:GO,FieldValue:ZO,setLogLevel:function(t){Uw.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function YO(t,e){return function(t,e=ki.z){return new we.y(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function WO(t,e){return YO(t,e).pipe((0,Ee.U)(t=>({payload:t,type:"query"})))}function $O(t,e){return WO(t,e).pipe(os(void 0),Rf(),(0,Ee.U)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function QO(t,e,n){return $O(t,n).pipe(Ni((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return KO(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return KO(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return KO(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Mi(),(0,Ee.U)(t=>t.map(t=>({type:t.type,payload:t}))))}function KO(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function JO(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(function(t,e){t.INTERNAL.registerComponent(new zO.wA("firestore",function(t){return function(t,e){return new AO(t,new ck(t,e),new TO)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},HO)))})(VO=Ay.Z),VO.registerVersion("@firebase/firestore","2.3.8");class XO{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=$O(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,Ee.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(os(void 0),Rf(),so(([t,e])=>e.length>0||!t),(0,Ee.U)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Ni((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=JO(t);return QO(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return WO(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ee.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,be.D)(this.query.get(t)).pipe((0,Ki.QV)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new tF(this.ref.doc(t),this.afs)}}class tF{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=sF(n,e);return new XO(r,i,this.afs)}snapshotChanges(){return YO(this.ref,this.afs.schedulers.outsideAngular).pipe(os(void 0),Rf(),(0,Ee.U)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe((0,Ee.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,be.D)(this.ref.get(t)).pipe((0,Ki.QV)(this.afs.schedulers.insideAngular))}}class eF{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?$O(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ee.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)),so(t=>t.length>0),this.afs.keepUnstableUntilFirst):$O(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Ni((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=JO(t);return QO(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return WO(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ee.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,be.D)(this.query.get(t)).pipe((0,Ki.QV)(this.afs.schedulers.insideAngular))}}const nF=new r.OlP("angularfire2.enableFirestorePersistence"),rF=new r.OlP("angularfire2.firestore.persistenceSettings"),iF=new r.OlP("angularfire2.firestore.settings"),oF=new r.OlP("angularfire2.firestore.use-emulator");function sF(t,e=(t=>t)){return{query:e(t),ref:t}}let aF=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new $i.HU(o),this.keepUnstableUntilFirst=(0,$i.ss)(this.schedulers);const c=(0,$i.on)(t,o,e);!Si.Z.auth&&u&&(0,$i.yq)();const l=a;[this.firestore,this.persistenceEnabled$]=(0,$i.sI)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!Pt(i)){const e=()=>{try{return(0,be.D)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(VO){return"undefined"!=typeof console&&console.warn(VO),(0,xi.of)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,(0,xi.of)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=sF(n,e),o=this.schedulers.ngZone.run(()=>r);return new XO(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new eF(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new tF(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.LFG($i.Dh),r.LFG($i.xv,8),r.LFG(nF,8),r.LFG(iF,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(rF,8),r.LFG(oF,8),r.LFG(Ao,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG($i.Dh),r.LFG($i.xv,8),r.LFG(nF,8),r.LFG(iF,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(rF,8),r.LFG(oF,8),r.LFG(Ao,8))},token:t,providedIn:"any"}),t})(),uF=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:nF,useValue:!0},{provide:rF,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[aF]}),t})(),cF=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[Ty,uF]}),t})();function lF(t){return(lF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hF(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dF(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){hF(t,e,n[e])})}return t}function fF(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var pF={},gF={};try{"undefined"!=typeof window&&(pF=window),"undefined"!=typeof document&&(gF=document),"undefined"!=typeof MutationObserver&&MutationObserver,"undefined"!=typeof performance&&performance}catch(VO){}var mF=(pF.navigator||{}).userAgent,yF=void 0===mF?"":mF,vF=pF,_F=gF,bF=!!_F.documentElement&&!!_F.head&&"function"==typeof _F.addEventListener&&"function"==typeof _F.createElement,wF=(~yF.indexOf("MSIE")||yF.indexOf("Trident/"),"svg-inline--fa"),CF=[1,2,3,4,5,6,7,8,9,10],EF=CF.concat([11,12,13,14,15,16,17,18,19,20]),SF={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},TF=(["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",SF.GROUP,SF.SWAP_OPACITY,SF.PRIMARY,SF.SECONDARY].concat(CF.map(function(t){return"".concat(t,"x")})).concat(EF.map(function(t){return"w-".concat(t)})),vF.FontAwesomeConfig||{});_F&&"function"==typeof _F.querySelector&&[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(t){var e=fF(t,2),n=e[1],r=function(t){return""===t||"false"!==t&&("true"===t||t)}(function(t){var e=_F.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}(e[0]));null!=r&&(TF[n]=r)});var AF=dF({},{familyPrefix:"fa",replacementClass:wF,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},TF);AF.autoReplaceSvg||(AF.observeMutations=!1);var DF=dF({},AF);vF.FontAwesomeConfig=DF;var IF=vF||{};IF.___FONT_AWESOME___||(IF.___FONT_AWESOME___={}),IF.___FONT_AWESOME___.styles||(IF.___FONT_AWESOME___.styles={}),IF.___FONT_AWESOME___.hooks||(IF.___FONT_AWESOME___.hooks={}),IF.___FONT_AWESOME___.shims||(IF.___FONT_AWESOME___.shims=[]);var xF=IF.___FONT_AWESOME___,kF=[];bF&&((_F.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(_F.readyState)||_F.addEventListener("DOMContentLoaded",function t(){_F.removeEventListener("DOMContentLoaded",t),kF.map(function(t){return t()})}));var OF,FF="pending",PF="settled",NF="fulfilled",RF="rejected",LF=function(){},MF="undefined"!=typeof global&&void 0!==global.process&&"function"==typeof global.process.emit,qF="undefined"==typeof setImmediate?setTimeout:setImmediate,UF=[];function BF(){for(var t=0;t<UF.length;t++)UF[t][0](UF[t][1]);UF=[],OF=!1}function jF(t,e){UF.push([t,e]),OF||(OF=!0,qF(BF,0))}function VF(t){var e=t.owner,n=e._state,r=e._data,i=t[n],o=t.then;if("function"==typeof i){n=NF;try{r=i(r)}catch(VO){HF(o,VO)}}GF(o,r)||(n===NF&&ZF(o,r),n===RF&&HF(o,r))}function GF(t,e){var n;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"==typeof e||"object"===lF(e))){var r=e.then;if("function"==typeof r)return r.call(e,function(r){n||(n=!0,e===r?zF(t,r):ZF(t,r))},function(e){n||(n=!0,HF(t,e))}),!0}}catch(VO){return n||HF(t,VO),!0}return!1}function ZF(t,e){t!==e&&GF(t,e)||zF(t,e)}function zF(t,e){t._state===FF&&(t._state=PF,t._data=e,jF(WF,t))}function HF(t,e){t._state===FF&&(t._state=PF,t._data=e,jF($F,t))}function YF(t){t._then=t._then.forEach(VF)}function WF(t){t._state=NF,YF(t)}function $F(t){t._state=RF,YF(t),!t._handled&&MF&&global.process.emit("unhandledRejection",t._data,t)}function QF(t){global.process.emit("rejectionHandled",t)}function KF(t){if("function"!=typeof t)throw new TypeError("Promise resolver "+t+" is not a function");if(this instanceof KF==0)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(t,e){function n(t){HF(e,t)}try{t(function(t){ZF(e,t)},n)}catch(VO){n(VO)}}(t,this)}KF.prototype={constructor:KF,_state:FF,_then:null,_data:void 0,_handled:!1,then:function(t,e){var n={owner:this,then:new this.constructor(LF),fulfilled:t,rejected:e};return!e&&!t||this._handled||(this._handled=!0,this._state===RF&&MF&&jF(QF,this)),this._state===NF||this._state===RF?jF(VF,n):this._then.push(n),n.then},catch:function(t){return this.then(null,t)}},KF.all=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.all().");return new KF(function(e,n){var r=[],i=0;function o(t){return i++,function(n){r[t]=n,--i||e(r)}}for(var s,a=0;a<t.length;a++)(s=t[a])&&"function"==typeof s.then?s.then(o(a),n):r[a]=s;i||e(r)})},KF.race=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.race().");return new KF(function(e,n){for(var r,i=0;i<t.length;i++)(r=t[i])&&"function"==typeof r.then?r.then(e,n):e(r)})},KF.resolve=function(t){return t&&"object"===lF(t)&&t.constructor===KF?t:new KF(function(e){e(t)})},KF.reject=function(t){return new KF(function(e,n){n(t)})};var JF=function(t,e,n,r){var i,o,s,a=Object.keys(t),u=a.length,c=void 0!==r?function(t,e){return function(n,r,i,o){return t.call(e,n,r,i,o)}}(e,r):e;for(void 0===n?(i=1,s=t[a[0]]):(i=0,s=n);i<u;i++)s=c(s,t[o=a[i]],o,t);return s};function XF(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.skipHooks,i=void 0!==r&&r,o=Object.keys(e).reduce(function(t,n){var r=e[n];return r.icon?t[r.iconName]=r.icon:t[n]=r,t},{});"function"!=typeof xF.hooks.addPack||i?xF.styles[t]=dF({},xF.styles[t]||{},o):xF.hooks.addPack(t,o),"fas"===t&&XF("fa",e)}var tP=xF.styles,eP=xF.shims,nP=function(){var t=function(t){return JF(tP,function(e,n,r){return e[r]=JF(n,t,{}),e},{})};t(function(t,e,n){return e[3]&&(t[e[3]]=n),t}),t(function(t,e,n){var r=e[2];return t[n]=n,r.forEach(function(e){t[e]=n}),t});var e="far"in tP;JF(eP,function(t,n){var r=n[1];return"far"!==r||e||(r="fas"),t[n[0]]={prefix:r,iconName:n[2]},t},{})};function rP(t){this.name="MissingIcon",this.message=t||"Icon unavailable",this.stack=(new Error).stack}nP(),(rP.prototype=Object.create(Error.prototype)).constructor=rP;var iP={fill:"currentColor"},oP={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},sP=(dF({},iP,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"}),dF({},oP,{attributeName:"opacity"}));dF({},iP,{cx:"256",cy:"364",r:"28"}),dF({},oP,{attributeName:"r",values:"28;14;28;28;14;28;"}),dF({},sP,{values:"1;0;1;1;0;1;"}),dF({},iP,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),dF({},sP,{values:"1;0;0;0;0;1;"}),dF({},iP,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),dF({},sP,{values:"0;0;1;1;0;0;"}),new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.definitions={}}var e;return(e=[{key:"add",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach(function(e){t.definitions[e]=dF({},t.definitions[e]||{},i[e]),XF(e,i[e]),nP()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,e){var n=e.prefix&&e.iconName&&e.icon?{0:e}:e;return Object.keys(n).map(function(e){var r=n[e],i=r.prefix,o=r.iconName,s=r.icon;t[i]||(t[i]={}),t[i][o]=s}),t}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}());let aP=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})(),uP=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[yc,vc,Wo,_c,Tc,Ec,Sc],imports:[[Ot,aP,$g,Yn,wi,_e,ge,sy,tf,cF],ge,Ot,$g,Yn,wi,_e,sy,tf,cF,aP]}),t})(),cP=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-home"]],decls:2,vars:0,template:function(t,e){1&t&&(r.TgZ(0,"p"),r._uU(1,"home works!"),r.qZA())},styles:[""]}),t})(),lP=(()=>{class t{constructor(t){this.auth=t}login(){this.auth.login()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(yc))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-login"]],decls:3,vars:0,consts:[["rel","stylesheet","href","https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"],[1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(r._UZ(0,"link",0),r.TgZ(1,"button",1),r.NdJ("click",function(){return e.login()}),r._uU(2,"Login with Google"),r.qZA())},styles:[""]}),t})(),hP=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[uP,uc.forChild([{path:"",component:cP},{path:"login",component:lP}])]]}),t})();class dP{constructor(t,e,n){this.userId=t,this.shipping=e,this.shoppingCart=n,this.datePlaced=0,this.items=[],this.orderPrice=0,this.datePlaced=(new Date).getTime(),this.items=this.shoppingCart.items.map(t=>({product:{title:t.title,imageUrl:t.imageUrl,price:t.price},quantity:t.quantity,totalPrice:t.totalPrice})),this.orderPrice=this.totalOrderPrice}get totalOrderPrice(){let t=0;return this.shoppingCart.items.forEach(e=>{t+=e.totalPrice}),t}}function fP(t,e){1&t&&(r.TgZ(0,"div"),r._uU(1,"Name is required."),r.qZA())}function pP(t,e){if(1&t&&(r.TgZ(0,"div",17),r.YNc(1,fP,2,0,"div",18),r.qZA()),2&t){r.oxw();const t=r.MAs(4);r.xp6(1),r.Q6J("ngIf",t.errors.required)}}function gP(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",2),r.TgZ(1,"label",14),r._uU(2,"Full Name"),r.qZA(),r.TgZ(3,"input",15,16),r.NdJ("ngModelChange",function(e){return r.CHM(t),r.oxw().shipping.name=e}),r.qZA(),r.YNc(5,pP,2,1,"div",6),r.qZA()}if(2&t){const t=r.MAs(4),e=r.oxw();r.xp6(3),r.Q6J("ngModel",e.shipping.name),r.xp6(2),r.Q6J("ngIf",t.touched&&t.invalid)}}function mP(t,e){1&t&&(r.TgZ(0,"div"),r._uU(1,"Address Line 1 is required."),r.qZA())}function yP(t,e){if(1&t&&(r.TgZ(0,"div",17),r.YNc(1,mP,2,0,"div",18),r.qZA()),2&t){r.oxw();const t=r.MAs(7);r.xp6(1),r.Q6J("ngIf",t.errors.required)}}function vP(t,e){1&t&&(r.TgZ(0,"div"),r._uU(1,"Address Line 2 is required."),r.qZA())}function _P(t,e){if(1&t&&(r.TgZ(0,"div",17),r.YNc(1,vP,2,0,"div",18),r.qZA()),2&t){r.oxw();const t=r.MAs(11);r.xp6(1),r.Q6J("ngIf",t.errors.required)}}function bP(t,e){1&t&&(r.TgZ(0,"div"),r._uU(1,"City is required."),r.qZA())}function wP(t,e){if(1&t&&(r.TgZ(0,"div",17),r.YNc(1,bP,2,0,"div",18),r.qZA()),2&t){r.oxw();const t=r.MAs(17);r.xp6(1),r.Q6J("ngIf",t.errors.required)}}let CP=(()=>{class t{constructor(t,e,n){this.orderService=t,this.route=e,this.auth=n,this.shipping={},this.userId=""}ngOnInit(){var t=this;return Ei(function*(){t.subscription=t.auth.user$.subscribe(e=>t.userId=e?e.uid:""),t.autoFillName()})()}productOrder(){var t=this;return Ei(function*(){let e=new dP(t.userId,t.shipping,t.cart),n=yield t.orderService.placeOrder(e);t.route.navigate(["order-success",n.key])})()}ngOnDestroy(){this.subscription.unsubscribe()}autoFillName(){var t=this;return Ei(function*(){let e=yield t.auth.getName();Object.assign(t.shipping,{name:e})})()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Sc),r.Y36(Wu),r.Y36(yc))},t.\u0275cmp=r.Xpm({type:t,selectors:[["shipping-form"]],inputs:{cart:"cart"},decls:22,vars:8,consts:[["shippingF","ngForm"],["class","form-group",4,"ngIf"],[1,"form-group"],["for","address"],["type","text","placeholder","Address line 1","id","address","name","address","required","",1,"form-control",3,"ngModel","ngModelChange"],["address","ngModel"],["class","alert alert-danger",4,"ngIf"],["type","text","placeholder","Address line 2","id","address 2","name","address 2","required","",1,"form-control",3,"ngModel","ngModelChange"],["address2","ngModel"],["for","city"],["type","text","placeholder","City","id","city","name","city","required","",1,"form-control",3,"ngModel","ngModelChange"],["city","ngModel"],[1,"dropdown-divider"],[1,"btn","btn-primary",3,"disabled","click"],["for","name"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","ngModel"],[1,"alert","alert-danger"],[4,"ngIf"]],template:function(t,e){if(1&t&&(r.TgZ(0,"form",null,0),r.YNc(2,gP,6,2,"div",1),r.TgZ(3,"div",2),r.TgZ(4,"label",3),r._uU(5,"Address"),r.qZA(),r.TgZ(6,"input",4,5),r.NdJ("ngModelChange",function(t){return e.shipping.address=t}),r.qZA(),r.YNc(8,yP,2,1,"div",6),r.qZA(),r.TgZ(9,"div",2),r.TgZ(10,"input",7,8),r.NdJ("ngModelChange",function(t){return e.shipping.address2=t}),r.qZA(),r.YNc(12,_P,2,1,"div",6),r.qZA(),r.TgZ(13,"div",2),r.TgZ(14,"label",9),r._uU(15,"City"),r.qZA(),r.TgZ(16,"input",10,11),r.NdJ("ngModelChange",function(t){return e.shipping.city=t}),r.qZA(),r.YNc(18,wP,2,1,"div",6),r.qZA(),r._UZ(19,"div",12),r.TgZ(20,"button",13),r.NdJ("click",function(){return e.productOrder()}),r._uU(21,"Check Out"),r.qZA(),r.qZA()),2&t){const t=r.MAs(1),n=r.MAs(7),i=r.MAs(11),o=r.MAs(17);r.xp6(2),r.Q6J("ngIf",e.userId),r.xp6(4),r.Q6J("ngModel",e.shipping.address),r.xp6(2),r.Q6J("ngIf",n.touched&&n.invalid),r.xp6(2),r.Q6J("ngModel",e.shipping.address2),r.xp6(2),r.Q6J("ngIf",i.touched&&i.invalid),r.xp6(4),r.Q6J("ngModel",e.shipping.city),r.xp6(2),r.Q6J("ngIf",o.touched&&o.invalid),r.xp6(2),r.Q6J("disabled",t.invalid)}},directives:[xn,rn,Tn,gt,Fe,zn,nn,In],styles:[".form-group[_ngcontent-%COMP%]{padding-top:5px;padding-bottom:10px}.btn[_ngcontent-%COMP%]{margin-right:5px;margin-bottom:10px;margin-top:10px}"]}),t})();function EP(t,e){if(1&t&&(r.TgZ(0,"li",14),r._uU(1),r.TgZ(2,"div",13),r._uU(3),r.ALo(4,"currency"),r.qZA(),r.qZA()),2&t){const t=e.$implicit;r.xp6(1),r.AsE(" ",t.quantity," x ",t.title," "),r.xp6(2),r.hij(" ",r.xi3(4,3,t.totalPrice,"USD")," ")}}function SP(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",1),r.TgZ(1,"div",2),r.TgZ(2,"h5",3),r.TgZ(3,"button",4),r.NdJ("click",function(){r.CHM(t);const e=r.oxw();return e.toggleState=!e.toggleState}),r._uU(4," Order Summary "),r.TgZ(5,"mat-icon",5),r._uU(6),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(7,"div",6),r.TgZ(8,"div",7),r.TgZ(9,"div",8),r.TgZ(10,"p",9),r._uU(11),r.qZA(),r.TgZ(12,"ul",10),r.YNc(13,EP,5,6,"li",11),r.TgZ(14,"li",12),r._uU(15," Total "),r.TgZ(16,"div",13),r._uU(17),r.ALo(18,"currency"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=r.oxw();r.xp6(6),r.Oqu(t.toggleState?"expand_more":"expand_less"),r.xp6(5),r.hij("You have ",t.cart.totalItemsCount," items in your shopping cart."),r.xp6(2),r.Q6J("ngForOf",t.cart.items),r.xp6(4),r.hij(" ",r.xi3(18,4,t.cart.totalCartPrice,"USD")," ")}}function TP(t,e){if(1&t&&(r.TgZ(0,"li",14),r.TgZ(1,"div",15),r.TgZ(2,"div",16),r._uU(3),r.qZA(),r.TgZ(4,"div",17),r._uU(5),r.ALo(6,"currency"),r.qZA(),r.TgZ(7,"div",18),r._uU(8),r.qZA(),r.TgZ(9,"div",20),r._uU(10),r.ALo(11,"currency"),r.qZA(),r.qZA(),r.qZA()),2&t){const t=e.$implicit;r.xp6(3),r.hij(" ",t.product.title," "),r.xp6(2),r.hij(" ",r.xi3(6,4,t.totalPrice,"USD")," "),r.xp6(3),r.hij(" ",t.quantity," "),r.xp6(2),r.hij(" ",r.xi3(11,7,t.totalPrice,"USD")," ")}}function AP(t,e){if(1&t&&(r.TgZ(0,"div",1),r.TgZ(1,"div",2),r.TgZ(2,"h1",3),r._uU(3," Order Details "),r.qZA(),r.qZA(),r.TgZ(4,"div"),r.TgZ(5,"div",7),r.TgZ(6,"div",8),r.TgZ(7,"p",9),r._uU(8),r.qZA(),r.TgZ(9,"ul",10),r.TgZ(10,"li",12),r.TgZ(11,"div",15),r.TgZ(12,"div",16),r._uU(13," Product "),r.qZA(),r.TgZ(14,"div",17),r._uU(15," Price "),r.qZA(),r.TgZ(16,"div",18),r._uU(17," Qty "),r.qZA(),r.TgZ(18,"div",19),r._uU(19," Total "),r.qZA(),r.qZA(),r.qZA(),r.YNc(20,TP,12,10,"li",11),r.TgZ(21,"li",12),r._uU(22," Total "),r.TgZ(23,"div",13),r._uU(24),r.ALo(25,"currency"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.xp6(8),r.hij("",t.order.items.length," items in order."),r.xp6(12),r.Q6J("ngForOf",t.order.items),r.xp6(4),r.hij(" ",r.xi3(25,3,t.order.orderPrice,"USD")," ")}}let DP=(()=>{class t{constructor(){this.toggleState=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["check-out-card"]],inputs:{cart:"cart",order:"order"},decls:2,vars:2,consts:[["class","card",4,"ngIf"],[1,"card"],["id","heading",1,"card-header"],[1,"mb-0"],["role","button","data-bs-toggle","collapse","data-bs-target","#collapseOrder","aria-expanded","true","aria-controls","collapseOrder",1,"btn","order-summary",3,"click"],[1,"right"],["id","collapseOrder",1,"collapse","show"],[1,"card","m3"],[1,"card-body"],[1,"card-text"],[1,"list-group-flush"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item","fw-bold"],[1,"float-end"],[1,"list-group-item"],[1,"row"],[1,"col-sm-6","text-start"],[1,"col-sm-2","text-start"],[1,"col-sm-2","text-center"],[1,"col-sm-2","text-end"],[1,"text-end","col-2"]],template:function(t,e){1&t&&(r.YNc(0,SP,19,7,"div",0),r.YNc(1,AP,26,6,"div",0)),2&t&&(r.Q6J("ngIf",e.cart),r.xp6(1),r.Q6J("ngIf",e.order))},directives:[gt,dg,ft],pipes:[kt],styles:[".price-col[_ngcontent-%COMP%]{width:200px;text-align:right}.card-header[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{transition:transform .3s ease-in-out}.card-header[_ngcontent-%COMP%]   .collapsed[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{transform:rotate(90deg)}.order-summary[_ngcontent-%COMP%]{width:100%;padding-bottom:0;padding-top:0;height:100%}.order-summary[_ngcontent-%COMP%] > .mat-icon[_ngcontent-%COMP%]{float:right;margin-right:10px}"]}),t})();function IP(t,e){if(1&t&&(r.TgZ(0,"div",1),r.TgZ(1,"div",2),r._UZ(2,"shipping-form",3),r.qZA(),r.TgZ(3,"div",2),r._UZ(4,"check-out-card",3),r.qZA(),r.qZA()),2&t){const t=e.ngIf;r.xp6(2),r.Q6J("cart",t),r.xp6(2),r.Q6J("cart",t)}}let xP=(()=>{class t{constructor(t){this.shoppingCartService=t}ngOnInit(){var t=this;return Ei(function*(){t.cart$=yield t.shoppingCartService.getCart()})()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Ec))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-check-out"]],decls:4,vars:3,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"col-6"],[3,"cart"]],template:function(t,e){1&t&&(r.TgZ(0,"h2"),r._uU(1,"Shipping Information"),r.qZA(),r.YNc(2,IP,5,2,"div",0),r.ALo(3,"async")),2&t&&(r.xp6(2),r.Q6J("ngIf",r.lcZ(3,1,e.cart$)))},directives:[gt,CP,DP],pipes:[At],styles:[""]}),t})();function kP(t,e){if(1&t&&(r.TgZ(0,"div"),r.TgZ(1,"h2"),r._uU(2),r.ALo(3,"date"),r.qZA(),r.TgZ(4,"h3"),r._uU(5,"Shipping Address"),r.qZA(),r.TgZ(6,"div",1),r.TgZ(7,"ul",2),r.TgZ(8,"li"),r._uU(9),r.qZA(),r.TgZ(10,"li"),r._uU(11),r.qZA(),r.TgZ(12,"li"),r._uU(13),r.qZA(),r.TgZ(14,"li"),r._uU(15),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.xp6(2),r.Oqu(r.lcZ(3,5,t.order.datePlaced)),r.xp6(7),r.Oqu(t.order.shipping.name),r.xp6(2),r.Oqu(t.order.shipping.address),r.xp6(2),r.Oqu(t.order.shipping.address2),r.xp6(2),r.Oqu(t.order.shipping.city)}}let OP=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["shipping-address"]],inputs:{order:"order"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"float-start"],[1,"list-unstyled"]],template:function(t,e){1&t&&r.YNc(0,kP,16,7,"div",0),2&t&&r.Q6J("ngIf",e.order)},directives:[gt],pipes:[xt],styles:[""]}),t})();function FP(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",1),r.TgZ(1,"div",2),r.TgZ(2,"h2"),r._uU(3),r.qZA(),r.qZA(),r.TgZ(4,"div",3),r.TgZ(5,"button",4),r.NdJ("click",function(){return r.CHM(t),r.oxw().goBack()}),r._uU(6,"Back"),r.qZA(),r.qZA(),r.TgZ(7,"div",5),r._UZ(8,"shipping-address",6),r.qZA(),r.TgZ(9,"div",7),r._UZ(10,"check-out-card",6),r.qZA(),r.qZA()}if(2&t){const t=e.ngIf,n=r.oxw();r.xp6(3),r.hij("Order # ",n.id,""),r.xp6(5),r.Q6J("order",t),r.xp6(2),r.Q6J("order",t)}}let PP=(()=>{class t{constructor(t,e){this.route=t,this.orderService=e,this.id=this.route.snapshot.paramMap.get("id"),this.id&&(this.order$=this.orderService.getOrderByOrderId(this.id))}goBack(){window.history.back()}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Aa),r.Y36(Sc))},t.\u0275cmp=r.Xpm({type:t,selectors:[["my-order-details"]],decls:2,vars:3,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"col-sm-8"],[1,"col-sm-4","text-end"],[1,"btn","btn-light",3,"click"],[1,"col-sm-3"],[3,"order"],[1,"col-9"]],template:function(t,e){1&t&&(r.YNc(0,FP,11,3,"div",0),r.ALo(1,"async")),2&t&&r.Q6J("ngIf",r.lcZ(1,1,e.order$))},directives:[gt,OP,DP],pipes:[At],styles:[""]}),t})();const NP=function(t){return["/my/orders",t]};function RP(t,e){if(1&t&&(r.TgZ(0,"tr"),r.TgZ(1,"td"),r._uU(2),r.qZA(),r.TgZ(3,"td"),r._uU(4),r.ALo(5,"date"),r.qZA(),r.TgZ(6,"td"),r._uU(7),r.ALo(8,"currency"),r.qZA(),r.TgZ(9,"td"),r.TgZ(10,"a",4),r._uU(11,"View"),r.qZA(),r.qZA(),r.qZA()),2&t){const t=e.$implicit;r.xp6(2),r.Oqu(t.key),r.xp6(2),r.Oqu(r.lcZ(5,4,t.datePlaced)),r.xp6(3),r.Oqu(r.xi3(8,6,t.orderPrice,"USD")),r.xp6(3),r.Q6J("routerLink",r.VKq(9,NP,t.key))}}function LP(t,e){if(1&t&&(r.TgZ(0,"table",1),r.TgZ(1,"thead"),r.TgZ(2,"tr"),r.TgZ(3,"th",2),r._uU(4,"Order #"),r.qZA(),r.TgZ(5,"th",2),r._uU(6,"Date"),r.qZA(),r.TgZ(7,"th",2),r._uU(8,"Total Price"),r.qZA(),r._UZ(9,"th",2),r.qZA(),r.qZA(),r.TgZ(10,"tbody"),r.YNc(11,RP,12,11,"tr",3),r.qZA(),r.qZA()),2&t){const t=e.ngIf;r.xp6(11),r.Q6J("ngForOf",t)}}let MP=(()=>{class t{constructor(t,e){this.orderService=t,this.authService=e,this.order$=this.authService.user$.pipe(Ai(t=>this.orderService.getMapOrdersByUserId(t.uid)))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Sc),r.Y36(yc))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-my-order"]],decls:4,vars:3,consts:[["class","table",4,"ngIf"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(t,e){1&t&&(r.TgZ(0,"h1"),r._uU(1,"Orders"),r.qZA(),r.YNc(2,LP,12,1,"table",0),r.ALo(3,"async")),2&t&&(r.xp6(2),r.Q6J("ngIf",r.lcZ(3,1,e.order$)))},directives:[gt,ft,Qu],pipes:[At,xt,kt],styles:[""]}),t})(),qP=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-order-success"]],decls:2,vars:0,template:function(t,e){1&t&&(r.TgZ(0,"p"),r._uU(1,"order-success works!"),r.qZA())},styles:[""]}),t})();const UP=function(t){return{category:t}};function BP(t,e){if(1&t&&(r.TgZ(0,"a",4),r._uU(1),r.qZA()),2&t){const t=e.$implicit,n=r.oxw();r.ekj("active",n.category===t.key),r.Q6J("queryParams",r.VKq(4,UP,t.key)),r.xp6(1),r.hij("",t.name," ")}}let jP=(()=>{class t{constructor(t){this.categoryRef=t.categoriesRef,this.categories$=this.categoryRef.snapshotChanges().pipe((0,Ee.U)(t=>t.map(t=>Object.assign({key:t.payload.key},t.payload.val()))))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(_c))},t.\u0275cmp=r.Xpm({type:t,selectors:[["product-filter"]],inputs:{category:"category"},decls:6,vars:5,consts:[[1,"sticky-top"],[1,"list-group"],["routerLink","/products",1,"list-group-item","list-group-item-action"],["routerLink","/products","class","list-group-item list-group-item-action",3,"queryParams","active",4,"ngFor","ngForOf"],["routerLink","/products",1,"list-group-item","list-group-item-action",3,"queryParams"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"a",2),r._uU(3," All Categories "),r.qZA(),r.YNc(4,BP,2,6,"a",3),r.ALo(5,"async"),r.qZA(),r.qZA()),2&t&&(r.xp6(2),r.ekj("active",!e.category),r.xp6(2),r.Q6J("ngForOf",r.lcZ(5,3,e.categories$)))},directives:[Qu,ft],pipes:[At],styles:[".sticky-top[_ngcontent-%COMP%]{top:80px}.list-group-item.active[_ngcontent-%COMP%]{background-color:purple;border-color:purple}"]}),t})();function VP(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",6),r.NdJ("click",function(){return r.CHM(t),r.oxw().removeAll()}),r._uU(1,"Remove"),r.qZA()}}let GP=(()=>{class t{constructor(t){this.cartService=t,this.remove=!1}addToCart(){this.cartService.addToCart(this.product)}removeFromCart(){this.cartService.removeFromCart(this.product)}removeAll(){this.cartService.removeAll(this.product)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Ec))},t.\u0275cmp=r.Xpm({type:t,selectors:[["product-quantity"]],inputs:{product:"product",shoppingCart:["shopping-cart","shoppingCart"],remove:"remove"},decls:11,vars:2,consts:[[1,"row","g-0"],[1,"col-2"],[1,"btn","btn-secondary",3,"click"],[1,"col"],[1,"text"],["class","btn btn-light btn-sm remove",3,"click",4,"ngIf"],[1,"btn","btn-light","btn-sm","remove",3,"click"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"button",2),r.NdJ("click",function(){return e.removeFromCart()}),r._uU(3,"- "),r.qZA(),r.qZA(),r.TgZ(4,"div",3),r.TgZ(5,"button",4),r._uU(6),r.qZA(),r.qZA(),r.TgZ(7,"div",1),r.TgZ(8,"button",2),r.NdJ("click",function(){return e.addToCart()}),r._uU(9,"+ "),r.qZA(),r.qZA(),r.YNc(10,VP,2,0,"button",5),r.qZA()),2&t&&(r.xp6(6),r.Oqu(e.shoppingCart.getQuantity(e.product)),r.xp6(4),r.Q6J("ngIf",e.remove))},directives:[gt],styles:[".remove[_ngcontent-%COMP%]{margin-top:10px;width:100%}button[_ngcontent-%COMP%]{width:100%;padding-left:0;padding-right:0}.text[_ngcontent-%COMP%]{height:100%;background-color:initial;background-repeat:no-repeat;border:none;overflow:hidden;pointer-events:none}"]}),t})();function ZP(t,e){if(1&t&&r._UZ(0,"img",8),2&t){const t=r.oxw(2);r.s9C("alt",t.product.title),r.Q6J("src",t.product.imageUrl,r.LSH)}}function zP(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",12),r.NdJ("click",function(){return r.CHM(t),r.oxw(3).addToCart()}),r._uU(1,"Add to Cart"),r.qZA()}}function HP(t,e){if(1&t&&r._UZ(0,"product-quantity",13),2&t){const t=r.oxw(3);r.Q6J("product",t.product)("shopping-cart",t.shoppingCart)}}function YP(t,e){if(1&t&&(r.TgZ(0,"div",9),r.YNc(1,zP,2,0,"button",10),r.YNc(2,HP,1,2,"ng-template",null,11,r.W1O),r.qZA()),2&t){const t=r.MAs(3),e=r.oxw(2);r.xp6(1),r.Q6J("ngIf",0===e.shoppingCart.getQuantity(e.product))("ngIfElse",t)}}function WP(t,e){if(1&t&&(r.TgZ(0,"div",1),r.TgZ(1,"div",2),r.YNc(2,ZP,1,2,"img",3),r.qZA(),r.TgZ(3,"div",4),r.TgZ(4,"h2",5),r._uU(5),r.ALo(6,"titlecase"),r.qZA(),r.TgZ(7,"h3",6),r._uU(8),r.ALo(9,"currency"),r.qZA(),r.qZA(),r.YNc(10,YP,4,2,"div",7),r.qZA()),2&t){const t=r.oxw();r.xp6(2),r.Q6J("ngIf",t.product.imageUrl),r.xp6(3),r.Oqu(r.lcZ(6,4,t.product.title)),r.xp6(3),r.hij("",r.gM2(9,6,t.product.price,"USD","symbol","1.2-2")," "),r.xp6(2),r.Q6J("ngIf",t.showActions&&t.shoppingCart)}}let $P=(()=>{class t{constructor(t){this.cartService=t,this.showActions=!0}addToCart(){this.cartService.addToCart(this.product)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Ec))},t.\u0275cmp=r.Xpm({type:t,selectors:[["product-card"]],inputs:{product:"product",showActions:["show-actions","showActions"],shoppingCart:["shopping-cart","shoppingCart"]},decls:1,vars:1,consts:[["class","card mb-3",4,"ngIf"],[1,"card","mb-3"],[1,"wrapper"],["class","card-img-top",3,"src","alt",4,"ngIf"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["class","d-grid card-footer",4,"ngIf"],[1,"card-img-top",3,"src","alt"],[1,"d-grid","card-footer"],["class","btn btn-secondary",3,"click",4,"ngIf","ngIfElse"],["updateQuantity",""],[1,"btn","btn-secondary",3,"click"],[3,"product","shopping-cart"]],template:function(t,e){1&t&&r.YNc(0,WP,11,11,"div",0),2&t&&r.Q6J("ngIf",e.product.title)},directives:[gt,GP],pipes:[It,kt],styles:[".card-footer[_ngcontent-%COMP%]{padding:0}.card[_ngcontent-%COMP%]{margin-bottom:30px}.mat-icon[_ngcontent-%COMP%]{height:20px;width:20px;font-size:20px}.card-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;display:block;width:100%;height:100%}*[_ngcontent-%COMP%]{box-sizing:border-box}"]}),t})();function QP(t,e){if(1&t&&(r.ynx(0),r.TgZ(1,"div",3),r._UZ(2,"product-card",10),r.qZA(),r.BQk()),2&t){const t=e.$implicit,n=r.oxw().ngIf;r.xp6(2),r.Q6J("shopping-cart",n)("product",t)}}function KP(t,e){if(1&t&&(r.TgZ(0,"div",6),r.YNc(1,QP,3,2,"ng-container",7),r.TgZ(2,"div",8),r._UZ(3,"mat-progress-spinner",9),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("ngForOf",t.filteredProduct),r.xp6(1),r.Udp("display",t.isProgressVisible?"inline":"none")}}let JP=(()=>{class t{constructor(t,e,n){this.shoppingCartService=t,this.route=e,this.productService=n,this.isProgressVisible=!1,this.products=[],this.filteredProduct=[]}ngOnInit(){var t=this;return Ei(function*(){t.cart$=yield t.shoppingCartService.getCart(),t.populateProduct()})()}applyFilter(){this.filteredProduct=this.category?this.products.filter(t=>t.category===this.category):this.products,this.isProgressVisible=!1}populateProduct(){this.isProgressVisible=!0,this.productService.getMapProduct().pipe(Ai(t=>(this.products=t,this.route.queryParamMap))).subscribe(t=>{this.category=t.get("category"),this.applyFilter()})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Ec),r.Y36(Aa),r.Y36(Tc))},t.\u0275cmp=r.Xpm({type:t,selectors:[["product"]],decls:7,vars:4,consts:[[1,"row"],[1,"col-3"],[3,"category"],[1,"col"],[1,"container"],["class","row row-cols-3",4,"ngIf"],[1,"row","row-cols-3"],[4,"ngFor","ngForOf"],[1,"progressIndicator"],["color","primary","mode","indeterminate",1,"example-margin"],[3,"shopping-cart","product"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r._UZ(2,"product-filter",2),r.qZA(),r.TgZ(3,"div",3),r.TgZ(4,"div",4),r.YNc(5,KP,4,3,"div",5),r.ALo(6,"async"),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(2),r.Q6J("category",e.category),r.xp6(3),r.Q6J("ngIf",r.lcZ(6,2,e.cart$)))},directives:[jP,gt,ft,wg,$P],pipes:[At],styles:['.wrapper[_ngcontent-%COMP%]{position:relative;overflow:hidden}.wrapper[_ngcontent-%COMP%]:after{content:"";display:block;padding-top:100%}.wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;height:100%;max-width:none;position:absolute;left:50%;top:0;transform:translateX(-50%)}']}),t})();function XP(t,e){if(1&t&&(r.TgZ(0,"tr"),r.TgZ(1,"td"),r._UZ(2,"div",10),r.qZA(),r.TgZ(3,"td",4),r._uU(4),r.qZA(),r.TgZ(5,"td",5),r._UZ(6,"product-quantity",11),r.qZA(),r.TgZ(7,"td",6),r._uU(8),r.ALo(9,"currency"),r.qZA(),r.qZA()),2&t){const t=e.$implicit,n=r.oxw().ngIf;r.xp6(2),r.Udp("background-image","url("+t.imageUrl+")"),r.xp6(2),r.Oqu(t.title),r.xp6(2),r.Q6J("remove",!0)("product",t)("shopping-cart",n),r.xp6(2),r.Oqu(r.xi3(9,7,t.totalPrice,"USD"))}}function tN(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",1),r.TgZ(1,"p"),r._uU(2),r.qZA(),r.TgZ(3,"button",2),r.NdJ("click",function(){return r.CHM(t),r.oxw().clearCart()}),r._uU(4,"Clear Cart"),r.qZA(),r.TgZ(5,"table",3),r.TgZ(6,"thead"),r.TgZ(7,"tr"),r._UZ(8,"th"),r.TgZ(9,"th",4),r._uU(10,"Product"),r.qZA(),r.TgZ(11,"th",5),r._uU(12,"Quantity"),r.qZA(),r.TgZ(13,"th",6),r._uU(14,"Price"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(15,"tbody"),r.YNc(16,XP,10,10,"tr",7),r.qZA(),r.TgZ(17,"tfoot"),r.TgZ(18,"tr"),r._UZ(19,"th"),r._UZ(20,"th"),r.TgZ(21,"th",6),r._uU(22,"Total Price"),r.qZA(),r.TgZ(23,"th",6),r._uU(24),r.ALo(25,"currency"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(26,"div"),r._UZ(27,"div",8),r.TgZ(28,"button",9),r.NdJ("click",function(){return r.CHM(t),r.oxw().checkOut()}),r._uU(29,"Check Out"),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=e.ngIf;r.xp6(2),r.hij(" You have ",t.totalItemsCount," items in your shopping cart "),r.xp6(14),r.Q6J("ngForOf",t.items),r.xp6(8),r.Oqu(r.xi3(25,4,t.totalCartPrice,"USD")),r.xp6(4),r.Q6J("disabled",0===t.totalItemsCount)}}let eN=(()=>{class t{constructor(t,e){this.shoppingCartService=t,this.route=e}ngOnInit(){var t=this;return Ei(function*(){t.cart$=yield t.shoppingCartService.getCart()})()}checkOut(){this.route.navigate(["check-out"])}clearCart(){this.shoppingCartService.clearCart()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Ec),r.Y36(Wu))},t.\u0275cmp=r.Xpm({type:t,selectors:[["shopping-cart"]],decls:4,vars:3,consts:[["class","row col-10",4,"ngIf"],[1,"row","col-10"],[1,"btn","btn-light","btn-sm",3,"click"],[1,"table"],[1,"product-col"],[1,"quantity-col"],[1,"price-col"],[4,"ngFor","ngForOf"],[1,"divider"],[1,"btn","btn-primary","btn-sm","checkout",3,"disabled","click"],[1,"thumbnail"],[3,"remove","product","shopping-cart"]],template:function(t,e){1&t&&(r.TgZ(0,"h1"),r._uU(1,"Shopping Cart"),r.qZA(),r.YNc(2,tN,30,7,"div",0),r.ALo(3,"async")),2&t&&(r.xp6(2),r.Q6J("ngIf",r.lcZ(3,1,e.cart$)))},directives:[gt,ft,GP],pipes:[At,kt],styles:[".quantity-col[_ngcontent-%COMP%]{width:150px;text-align:center}.price-col[_ngcontent-%COMP%]{width:200px;text-align:right}.product-col[_ngcontent-%COMP%]{width:200px;text-align:left}.thumbnail[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:100px;background-size:cover;text-align:center;align-content:center;align-items:center}.divider[_ngcontent-%COMP%]{width:5px;height:auto;display:inline-block}.checkout[_ngcontent-%COMP%]{float:right}"]}),t})(),nN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[uP,uc.forChild([{path:"products",component:JP},{path:"shopping-cart",component:eN},{path:"check-out",component:xP,canActivate:[vc]},{path:"order-success/:id",component:qP,canActivate:[vc]},{path:"my/orders/:id",component:PP,canActivate:[vc]},{path:"my/orders",component:MP,canActivate:[vc]}])]]}),t})();const rN=function(t){return["/admin/orders",t]};function iN(t,e){if(1&t&&(r.TgZ(0,"tr"),r.TgZ(1,"td"),r._uU(2),r.qZA(),r.TgZ(3,"td"),r._uU(4),r.ALo(5,"titlecase"),r.qZA(),r.TgZ(6,"td"),r._uU(7),r.ALo(8,"date"),r.qZA(),r.TgZ(9,"td"),r._uU(10),r.ALo(11,"currency"),r.qZA(),r.TgZ(12,"td"),r.TgZ(13,"a",2),r._uU(14,"View"),r.qZA(),r.qZA(),r.qZA()),2&t){const t=e.$implicit;r.xp6(2),r.Oqu(t.key),r.xp6(2),r.Oqu(r.lcZ(5,5,t.shipping.name)),r.xp6(3),r.Oqu(r.lcZ(8,7,t.datePlaced)),r.xp6(3),r.Oqu(r.xi3(11,9,t.orderPrice,"USD")),r.xp6(3),r.Q6J("routerLink",r.VKq(12,rN,t.key))}}let oN=(()=>{class t{constructor(t,e){this.orderService=t,this.authService=e,this.dtOptions={},this.dtTrigger=new Qi.xQ}ngOnInit(){this.order$=this.orderService.getMapOrder(),this.order$.subscribe(t=>{this.orderArr=t,this.dtTrigger.next()}),this.dtOptions={pagingType:"full_numbers",pageLength:8}}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Sc),r.Y36(yc))},t.\u0275cmp=r.Xpm({type:t,selectors:[["admin-orders"]],viewQuery:function(t,e){if(1&t&&r.Gf(ve,5),2&t){let t;r.iGM(t=r.CRH())&&(e.datatableElement=t.first)}},decls:16,vars:3,consts:[["datatable","",1,"row-border","hover",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(t,e){1&t&&(r.TgZ(0,"h1"),r._uU(1,"Orders"),r.qZA(),r.TgZ(2,"table",0),r.TgZ(3,"thead"),r.TgZ(4,"tr"),r.TgZ(5,"th"),r._uU(6,"Order #"),r.qZA(),r.TgZ(7,"th"),r._uU(8,"Customer Name"),r.qZA(),r.TgZ(9,"th"),r._uU(10,"Order Placed"),r.qZA(),r.TgZ(11,"th"),r._uU(12,"Total Price"),r.qZA(),r._UZ(13,"th"),r.qZA(),r.qZA(),r.TgZ(14,"tbody"),r.YNc(15,iN,15,14,"tr",1),r.qZA(),r.qZA()),2&t&&(r.xp6(2),r.Q6J("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),r.xp6(13),r.Q6J("ngForOf",e.orderArr))},directives:[ve,ft,Qu],pipes:[It,xt,kt],styles:[""]}),t})();const sN=function(t){return["/admin/products/",t]};function aN(t,e){if(1&t&&(r.TgZ(0,"tr"),r.TgZ(1,"td"),r._uU(2),r.qZA(),r.TgZ(3,"td"),r._uU(4),r.ALo(5,"titlecase"),r.qZA(),r.TgZ(6,"td"),r._uU(7),r.ALo(8,"titlecase"),r.qZA(),r.TgZ(9,"td"),r._uU(10),r.ALo(11,"currency"),r.qZA(),r.TgZ(12,"td"),r.TgZ(13,"a",5),r._uU(14,"Edit"),r.qZA(),r.qZA(),r.qZA()),2&t){const t=e.$implicit;r.xp6(2),r.Oqu(t.key),r.xp6(2),r.Oqu(r.lcZ(5,5,t.title)),r.xp6(3),r.Oqu(r.lcZ(8,7,t.category)),r.xp6(3),r.Oqu(r.xi3(11,9,t.price,"USD")),r.xp6(3),r.Q6J("routerLink",r.VKq(12,sN,t.key))}}let uN=(()=>{class t{constructor(t){this.productService=t,this.dtOptions={},this.dtTrigger=new Qi.xQ}ngOnInit(){this.product$=this.productService.getMapProduct(),this.product$.subscribe(t=>{this.productArr=t,this.dtTrigger.next()}),this.dtOptions={pagingType:"full_numbers",pageLength:8}}ngOnDestroy(){this.dtTrigger.unsubscribe()}filter(t){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Tc))},t.\u0275cmp=r.Xpm({type:t,selectors:[["admin-products"]],viewQuery:function(t,e){if(1&t&&r.Gf(ve,5),2&t){let t;r.iGM(t=r.CRH())&&(e.datatableElement=t.first)}},decls:21,vars:3,consts:[["routerLink","/admin/products/new",1,"float-end","btn","btn-light"],[1,"divider"],[1,"dropdown-divider"],["datatable","",1,"row-border","hover",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(t,e){1&t&&(r.TgZ(0,"h1"),r._uU(1,"Products"),r.qZA(),r.TgZ(2,"div"),r.TgZ(3,"button",0),r._uU(4,"New Products"),r.qZA(),r.qZA(),r.TgZ(5,"div",1),r._UZ(6,"hr",2),r.TgZ(7,"table",3),r.TgZ(8,"thead"),r.TgZ(9,"tr"),r.TgZ(10,"th"),r._uU(11,"Id"),r.qZA(),r.TgZ(12,"th"),r._uU(13,"Title"),r.qZA(),r.TgZ(14,"th"),r._uU(15,"Category"),r.qZA(),r.TgZ(16,"th"),r._uU(17,"Price"),r.qZA(),r._UZ(18,"th"),r.qZA(),r.qZA(),r.TgZ(19,"tbody"),r.YNc(20,aN,15,14,"tr",4),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(7),r.Q6J("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),r.xp6(13),r.Q6J("ngForOf",e.productArr))},directives:[$u,ve,ft,Qu],pipes:[It,kt],styles:[".button[_ngcontent-%COMP%]{padding:10px}.divider[_ngcontent-%COMP%]{margin-top:60px}"]}),t})();function cN(t,e){1&t&&(r.TgZ(0,"div",26),r._uU(1,"Title is required"),r.qZA())}function lN(t,e){1&t&&(r.TgZ(0,"div"),r._uU(1,"Price is required"),r.qZA())}function hN(t,e){1&t&&(r.TgZ(0,"div"),r._uU(1,"Price must be at least 0"),r.qZA())}function dN(t,e){if(1&t&&(r.TgZ(0,"div",26),r.YNc(1,lN,2,0,"div",27),r.YNc(2,hN,2,0,"div",27),r.qZA()),2&t){r.oxw();const t=r.MAs(17);r.xp6(1),r.Q6J("ngIf",t.errors.required),r.xp6(1),r.Q6J("ngIf",t.errors.min)}}function fN(t,e){if(1&t&&(r.TgZ(0,"option",28),r._uU(1),r.qZA()),2&t){const t=e.$implicit;r.s9C("value",t.key),r.xp6(1),r.hij(" ",t.name," ")}}function pN(t,e){1&t&&(r.TgZ(0,"div",26),r._uU(1,"Category is required"),r.qZA())}function gN(t,e){1&t&&(r.TgZ(0,"div"),r._uU(1,"Image URL is required"),r.qZA())}function mN(t,e){1&t&&(r.TgZ(0,"div"),r._uU(1,"Image URL is not valid"),r.qZA())}function yN(t,e){if(1&t&&(r.TgZ(0,"div",26),r.YNc(1,gN,2,0,"div",27),r.YNc(2,mN,2,0,"div",27),r.qZA()),2&t){r.oxw();const t=r.MAs(32);r.xp6(1),r.Q6J("ngIf",t.errors.required),r.xp6(1),r.Q6J("ngIf",t.errors.url)}}function vN(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",29),r.NdJ("click",function(){return r.CHM(t),r.oxw().delete()}),r._uU(1,"Delete"),r.qZA()}}let _N=(()=>{class t{constructor(t,e,n,r){this.categoryService=t,this.productService=e,this.router=n,this.route=r,this.product={},this.categoryRef=this.categoryService.categoriesRef,this.categories=this.categoryRef.snapshotChanges().pipe((0,Ee.U)(t=>t.map(t=>Object.assign({key:t.payload.key},t.payload.val())))),this.categories$=t.categories,this.id=this.route.snapshot.paramMap.get("id"),this.id&&this.productService.getProduct(this.id).valueChanges().pipe(ho(1)).subscribe(t=>this.product=t)}create(t){this.id?this.productService.update(this.id,t):this.productService.create(t),this.router.navigate(["/admin/products"]),console.log(t)}delete(){confirm("Are you sure you want to delete the product?")&&(this.productService.delete(this.id),this.router.navigate(["/admin/products"]))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(_c),r.Y36(Tc),r.Y36(Wu),r.Y36(Aa))},t.\u0275cmp=r.Xpm({type:t,selectors:[["admin-product-form"]],decls:40,vars:15,consts:[[1,"row"],[1,"col-md-6"],[3,"ngSubmit"],["f","ngForm"],[1,"form-group"],["for","title"],["name","title","id","title","type","text","required","",1,"form-control",3,"ngModel","ngModelChange"],["title","ngModel"],["class","alert alert-danger",4,"ngIf"],["for","price"],[1,"input-group"],[1,"input-group-text"],["name","price","id","price","type","number","required","",1,"form-control",3,"ngModel","min","ngModelChange"],["price","ngModel"],["for","category"],["name","category","id","category","required","",1,"form-control",3,"ngModel","ngModelChange"],["category","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","imageUrl"],["name","imageUrl","id","imageUrl","type","text","required","","url","",1,"form-control",3,"ngModel","ngModelChange"],["imageUrl","ngModel"],[1,"dropdown-divider"],[1,"btn","btn-primary"],["type","button","class","btn btn-danger",3,"click",4,"ngIf"],[3,"product","show-actions"],[1,"alert","alert-danger"],[4,"ngIf"],[3,"value"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"form",2,3),r.NdJ("ngSubmit",function(){r.CHM(t);const n=r.MAs(3);return e.create(n.value)}),r.TgZ(4,"div",4),r.TgZ(5,"label",5),r._uU(6,"Title"),r.qZA(),r.TgZ(7,"input",6,7),r.NdJ("ngModelChange",function(t){return e.product.title=t}),r.qZA(),r.YNc(9,cN,2,0,"div",8),r.qZA(),r.TgZ(10,"div",4),r.TgZ(11,"label",9),r._uU(12,"Price"),r.qZA(),r.TgZ(13,"div",10),r.TgZ(14,"span",11),r._uU(15,"$"),r.qZA(),r.TgZ(16,"input",12,13),r.NdJ("ngModelChange",function(t){return e.product.price=t}),r.qZA(),r.qZA(),r.YNc(18,dN,3,2,"div",8),r.qZA(),r.TgZ(19,"div",4),r.TgZ(20,"label",14),r._uU(21,"Category"),r.qZA(),r.TgZ(22,"select",15,16),r.NdJ("ngModelChange",function(t){return e.product.category=t}),r._UZ(24,"option",17),r.YNc(25,fN,2,2,"option",18),r.ALo(26,"async"),r.qZA(),r.YNc(27,pN,2,0,"div",8),r.qZA(),r.TgZ(28,"div",4),r.TgZ(29,"label",19),r._uU(30,"Image Url"),r.qZA(),r.TgZ(31,"input",20,21),r.NdJ("ngModelChange",function(t){return e.product.imageUrl=t}),r.qZA(),r.YNc(33,yN,3,2,"div",8),r.qZA(),r._UZ(34,"div",22),r.TgZ(35,"button",23),r._uU(36,"Save"),r.qZA(),r.YNc(37,vN,2,0,"button",24),r.qZA(),r.qZA(),r.TgZ(38,"div",1),r._UZ(39,"product-card",25),r.qZA(),r.qZA()}if(2&t){const t=r.MAs(8),n=r.MAs(17),i=r.MAs(23),o=r.MAs(32);r.xp6(7),r.Q6J("ngModel",e.product.title),r.xp6(2),r.Q6J("ngIf",t.touched&&t.invalid),r.xp6(7),r.Q6J("ngModel",e.product.price)("min",0),r.xp6(2),r.Q6J("ngIf",n.touched&&n.invalid),r.xp6(4),r.Q6J("ngModel",e.product.category),r.xp6(3),r.Q6J("ngForOf",r.lcZ(26,13,e.categories)),r.xp6(2),r.Q6J("ngIf",i.touched&&i.invalid),r.xp6(4),r.Q6J("ngModel",e.product.imageUrl),r.xp6(2),r.Q6J("ngIf",o.touched&&o.invalid),r.xp6(4),r.Q6J("ngIf",e.id),r.xp6(2),r.Q6J("product",e.product)("show-actions",!1)}},directives:[xn,rn,Tn,Fe,zn,nn,In,gt,On,Gn,Hr,Rn,Ln,Bn,ft,mi,$P],pipes:[At],styles:[".form-group[_ngcontent-%COMP%]{padding-top:5px;padding-bottom:5px}.btn[_ngcontent-%COMP%]{margin-right:5px;margin-bottom:10px;margin-top:10px}"]}),t})(),bN=(()=>{class t{constructor(t,e,n){this.userService=t,this.auth=e}canActivate(){return this.auth.appUser$.pipe((0,Ee.U)(t=>t.isAdmin))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Wo),r.LFG(yc),r.LFG(Wu))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),wN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[bN],imports:[[uP,uc.forChild([{path:"admin/products/new",component:_N,canActivate:[vc,bN]},{path:"admin/products/:id",component:_N,canActivate:[vc,bN]},{path:"admin/products",component:uN,canActivate:[vc,bN]},{path:"admin/orders",component:oN,canActivate:[vc,bN]},{path:"admin/orders/:id",component:PP,canActivate:[vc,bN]}])]]}),t})();const CN=[];let EN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[uc.forRoot(CN)],uc]}),t})();class SN{constructor(){this.name="",this.email="",this.isAdmin=!1}}function TN(t,e){if(1&t&&(r.TgZ(0,"span",15),r._uU(1),r.qZA()),2&t){const t=e.ngIf;r.xp6(1),r.hij(" ",t.totalItemsCount," ")}}function AN(t,e){1&t&&(r.ynx(0),r.TgZ(1,"a",22),r._uU(2,"Manage Orders"),r.qZA(),r.TgZ(3,"a",23),r._uU(4,"Manage Products"),r.qZA(),r.BQk())}function DN(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"li",16),r.TgZ(1,"a",17),r._uU(2),r.qZA(),r.TgZ(3,"div",18),r.TgZ(4,"a",19),r._uU(5,"My Orders"),r.qZA(),r.YNc(6,AN,5,0,"ng-container",20),r.TgZ(7,"a",21),r.NdJ("click",function(){return r.CHM(t),r.oxw().logout()}),r._uU(8,"Log Out"),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=r.oxw();r.xp6(2),r.hij(" ",t.appUser.name," "),r.xp6(4),r.Q6J("ngIf",t.appUser.isAdmin)}}function IN(t,e){1&t&&(r.TgZ(0,"li",8),r.TgZ(1,"a",24),r._uU(2,"Login"),r.qZA(),r.qZA())}let xN=(()=>{class t{constructor(t,e){this.auth=t,this.shoppingCartService=e}ngOnInit(){var t=this;return Ei(function*(){t.auth.appUser$.subscribe(e=>e?(t.appUser=e,t.loggedIn=!0):(t.appUser=new SN,t.loggedIn=!1)),t.cart$=yield t.shoppingCartService.getCart()})()}logout(){this.auth.logout(),window.location.reload()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(yc),r.Y36(Ec))},t.\u0275cmp=r.Xpm({type:t,selectors:[["bs-navbar"]],decls:21,vars:5,consts:[[1,"navbar","navbar-expand-md","navbar-light","fixed-top","bg-light"],[1,"container"],["routerLink","/",1,"navbar-brand"],[1,"fa","fa-info-circle"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarCollapse","aria-controls","navbarCollapse","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarCollapse",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-md-0"],[1,"nav-item"],["routerLink","/products",1,"nav-link"],[1,"navbar-nav","mb-2","mb-md-0"],["routerLink","/shopping-cart",1,"nav-link"],["class","count-notif badge rounded-pill bg-warning",4,"ngIf"],["ngbDropdown","","class","nav-item dropdown",4,"ngIf","ngIfElse"],["anonymousUser",""],[1,"count-notif","badge","rounded-pill","bg-warning"],["ngbDropdown","",1,"nav-item","dropdown"],["ngbDropdownToggle","","aria-label","User dropdown menu",1,"nav-link","dropdown-toggle"],["ngbDropdownMenu","","aria-label","User menu",1,"dropdown-menu"],["ngbDropdownItem","","routerLink","/my/orders",1,"dropdown-item"],[4,"ngIf"],["ngbDropdownItem","","routerLink","/",1,"dropdown-item",3,"click"],["ngbDropdownItem","","routerLink","/admin/orders",1,"dropdown-item"],["ngbDropdownItem","","routerLink","/admin/products",1,"dropdown-item"],["routerLink","/login",1,"nav-link"]],template:function(t,e){if(1&t&&(r.TgZ(0,"nav",0),r.TgZ(1,"div",1),r.TgZ(2,"a",2),r._UZ(3,"i",3),r.qZA(),r.TgZ(4,"button",4),r._UZ(5,"span",5),r.qZA(),r.TgZ(6,"div",6),r.TgZ(7,"ul",7),r.TgZ(8,"li",8),r.TgZ(9,"a",9),r._uU(10,"Products"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(11,"ul",10),r.TgZ(12,"li",8),r.TgZ(13,"a",11),r.TgZ(14,"mat-icon"),r._uU(15,"shopping_cart"),r.qZA(),r.YNc(16,TN,2,1,"span",12),r.ALo(17,"async"),r.qZA(),r.qZA(),r.YNc(18,DN,9,2,"li",13),r.YNc(19,IN,3,0,"ng-template",null,14,r.W1O),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t){const t=r.MAs(20);r.xp6(16),r.Q6J("ngIf",r.lcZ(17,3,e.cart$)),r.xp6(2),r.Q6J("ngIf",e.loggedIn)("ngIfElse",t)}},directives:[Om,Qu,dg,gt,Lm,Rm,Pm,Fm],pipes:[At],styles:["li[_ngcontent-%COMP%]{cursor:pointer}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.count-notif[_ngcontent-%COMP%]{vertical-align:middle;margin-left:-10px;margin-top:-35px;font-size:10px}.badge-warning[_ngcontent-%COMP%]{padding:3px}.navbar-light[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%]{color:peru}"]}),t})(),kN=(()=>{class t{constructor(t,e,n){this.auth=t,this.us=n,this.userSub=t.$user.subscribe(t=>{if(t){n.save(t);let r=localStorage.getItem("returnUrl");r&&(e.navigateByUrl(r),localStorage.removeItem("returnUrl"))}})}ngOnDestroy(){this.userSub.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(yc),r.Y36(Wu),r.Y36(Wo))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"container"]],template:function(t,e){1&t&&(r.TgZ(0,"header"),r._UZ(1,"bs-navbar"),r.qZA(),r.TgZ(2,"div",0),r._UZ(3,"router-outlet"),r.qZA())},directives:[xN,Ju],styles:[""]}),t})();const ON={apiKey:"AIzaSyDD899PXeoSoz7xcZKJMTNEcygsPMXT7_c",authDomain:"final-shopping.firebaseapp.com",projectId:"final-shopping",storageBucket:"final-shopping.appspot.com",messagingSenderId:"699146189621",appId:"1:699146189621:web:92e3b4897d988bb5092a7c"};let FN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t,bootstrap:[kN]}),t.\u0275inj=r.cJS({providers:[],imports:[[uP,wN,nN,hP,EN,$i.hO.initializeApp(ON),uc.forRoot([])]]}),t})();(0,r.G48)(),fe().bootstrapModule(FN).catch(t=>console.error(t))},4762:(t,e,n)=>{"use strict";n.d(e,{ZT:()=>i,pi:()=>o,mG:()=>s,Jh:()=>a,XA:()=>u,CR:()=>c,ev:()=>l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}}},t=>{"use strict";t(t.s=3139)}]);